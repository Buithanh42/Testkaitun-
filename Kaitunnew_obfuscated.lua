
local var_2099 = [[CmxvY2FsIGlzUnVubmluZyA9IGZhbHNlCgotLSBIw6BtIGNo4bqheSBhdXRvIGZhcm0KZnVuY3Rpb24gQXV0b0Zhcm0oKQogICAgd2hpbGUgaXNSdW5uaW5nIGRvCiAgICAgICAgLS0gQ29kZSBhdXRvIGZhcm0g4bufIMSRw6J5CiAgICAgICAgcHJpbnQoIkF1dG8gRmFybSDEkGFuZyBDaOG6oXkuLi4iKQogICAgICAgIHdhaXQoMSkgLS0gxJBp4buBdSBjaOG7iW5oIHRo4budaSBnaWFuIGzhurdwCiAgICBlbmQKZW5kCgpsb2NhbCBzaXRpbmtsaWIgPSBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9naXRodWIuY29tL0VydXRUaGVUZXJ1L3VpbGlicmFyeS9ibG9iL21haW4vU2l0aW5rJTIwTGliL1NvdXJjZS5sdWE/cmF3PXRydWUiKSkoKQpsb2NhbCBzaXRpbmtndWkgPSBzaXRpbmtsaWI6U3RhcnQoewogICAgWyJOYW1lIl0gPSAiTEggSHViIHwgS2FpdHVuQmYiLAogICAgWyJEZXNjcmlwdGlvbiJdID0gIkJ5IEh2YW5sb25nZyIsCiAgICBbIkluZm8gQ29sb3IiXSA9IENvbG9yMy5mcm9tUkdCKDUuMDAwMDAwMTc2OTUxMjg5LCA1OS4wMDAwMDAyODMxMjIwNiwgMTEzLjAwMDAwMDg2NDI2NzM1KSwKICAgIFsiTG9nbyBJbmZvIl0gPSAiIiwKICAgIFsiTG9nbyBQbGF5ZXIiXSA9ICIiLAogICAgWyJOYW1lIEluZm8iXSA9ICJIYXZhbmxvbmdnIiwKICAgIFsiTmFtZSBQbGF5ZXIiXSA9ICJoYXZhbmxvbmdfIiwKICAgIFsiSW5mbyBEZXNjcmlwdGlvbiJdID0gIiIsCiAgICBbIlRhYiBXaWR0aCJdID0gMTM1LAogICAgWyJDb2xvciJdID0gQ29sb3IzLmZyb21SR0IoMTI3LjAwMDAwMDAyOTgwMjMyLCAxNDYuMDAwMDA2NDk2OTA2MjgsIDI0Mi4wMDAwMDA3NzQ4NjAzOCksCiAgICBbIkNsb3NlQ2FsbEJhY2siXSA9IGZ1bmN0aW9uKCkgZW5kCn0pCgotLSBNYWluIFRhYiBhbmQgU2VjdGlvbgpsb2NhbCBNYWluVGFiID0gc2l0aW5rZ3VpOk1ha2VUYWIoIk1haW4iKQpsb2NhbCBTZWN0aW9uID0gTWFpblRhYjpTZWN0aW9uKHsKICAgIFsiVGl0bGUiXSA9ICJNYWluRmFybSIsCiAgICBbIkNvbnRlbnQiXSA9ICJDdXR0YXkiCn0pCgpsb2NhbCBUb2dnbGUgPSBTZWN0aW9uOlRvZ2dsZSh7CiAgICBbIlRpdGxlIl09ICJrYWl0dW4gYmV0YSIsCiAgICBbIkNvbnRlbnQiXSA9ICJWYWlsb25uIiwKICAgIFsiRGVmYXVsdCJdID0gZmFsc2UsCiAgICBbIkNhbGxiYWNrIl0gPSBmdW5jdGlvbihWYWx1ZSkgCiAgICAgICAgaWYgVmFsdWUgdGhlbgogICAgICAgICAgICBsb2Fkc3RyaW5nKFs9WwoKc3Bhd24oZnVuY3Rpb24oKQoJCXBjYWxsKGZ1bmN0aW9uKCkKCQkJd2hpbGUgd2FpdCgpIGRvCgkJCQlpZiBfRy5YRVJVTktBSVRVTiBhbmQgV29ybGQxIHRoZW4KCQkJCQlpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZSA+PSAzMTEgdGhlbgoJCQkJCQlfRy5BdXRvUGxheWVySHVudGVyID0gZmFsc2UKCQkJCQllbmQKCQkJCWVuZAoJCQllbmQKCQllbmQpCgllbmQpCnRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWyJfV29ybGRPcmlnaW4iXTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gKCJDdXJ2ZWRSaW5nIikgb3Igdi5OYW1lID09ICgiU2xhc2hIaXQiKSBvciB2Lk5hbWUgPT0gKCJTd29yZFNsYXNoIikgb3Igdi5OYW1lID09ICgiU2xhc2hUYWlsIikgb3Igdi5OYW1lID09ICgiU291bmRzIikgdGhlbgogICAgICAgICAgICAgICAgICAgIHY6RGVzdHJveSgpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kCmVuZCkKCmlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5FZmZlY3QuQ29udGFpbmVyOkZpbmRGaXJzdENoaWxkKCJEZWF0aCIpIHRoZW4KICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5FZmZlY3QuQ29udGFpbmVyLkRlYXRoOkRlc3Ryb3koKQplbmQKaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLkVmZmVjdC5Db250YWluZXI6RmluZEZpcnN0Q2hpbGQoIlJlc3Bhd24iKSB0aGVuCiAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuRWZmZWN0LkNvbnRhaW5lci5SZXNwYXduOkRlc3Ryb3koKQplbmQKaWYgZ2FtZS5QbGFjZUlkID09IDI3NTM5MTU1NDkgdGhlbgogICAgV29ybGQxID0gdHJ1ZQplbHNlaWYgZ2FtZS5QbGFjZUlkID09IDQ0NDIyNzIxODMgdGhlbgogICAgV29ybGQyID0gdHJ1ZQplbHNlaWYgZ2FtZS5QbGFjZUlkID09IDc0NDk0MjM2MzUgdGhlbgogICAgV29ybGQzID0gdHJ1ZQplbmQKbG9jYWwgZnVuY3Rpb24gQ2hlY2tRdWVzdCgpIAogICAgTXlMZXZlbCA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWUKICAgIGlmIFdvcmxkMSB0aGVuCiAgICAgICAgaWYgTXlMZXZlbCA9PSAxIG9yIE15TGV2ZWwgPD0gOSB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJCYW5kaXQiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAxCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJCYW5kaXRRdWVzdDEiCiAgICAgICAgICAgIE5hbWVNb24gPSAiQmFuZGl0IgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoMTA1OS4zNzE5NSwgMTUuNDQ5NTA2OCwgMTU1MC40MjMxLCAwLjkzOTcwMDU0NCwgLTAsIC0wLjM0MTk5ODM2OSwgMCwgMSwgLTAsIDAuMzQxOTk4MzY5LCAwLCAwLjkzOTcwMDU0NCkKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygxMDQ1Ljk2MjY0NjQ4NDM3NSwgMjcuMDAyNTA4MTYzNDUyMTUsIDE1NjAuODIwMzEyNSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAxMCBvciBNeUxldmVsIDw9IDE0IHRoZW4KICAgICAgICAgICAgTW9uID0gIk1vbmtleSIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDEKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkp1bmdsZVF1ZXN0IgogICAgICAgICAgICBOYW1lTW9uID0gIk1vbmtleSIKICAgICAgICAgICAgQ0ZyYW1lUXVlc3QgPSBDRnJhbWUubmV3KC0xNTk4LjA4OTExLCAzNS41NTAxMTc1LCAxNTMuMzc3ODM4LCAwLCAwLCAxLCAwLCAxLCAtMCwgLTEsIDAsIDApCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTE0NDguNTE4MDY2NDA2MjUsIDY3Ljg1MzAxMjA4NDk2MDk0LCAxMS40NjU3OTY0NzA2NDIwOSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAxNSBvciBNeUxldmVsIDw9IDI5IHRoZW4KICAgICAgICAgICAgTW9uID0gIkdvcmlsbGEiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAyCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJKdW5nbGVRdWVzdCIKICAgICAgICAgICAgTmFtZU1vbiA9ICJHb3JpbGxhIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoLTE1OTguMDg5MTEsIDM1LjU1MDExNzUsIDE1My4zNzc4MzgsIDAsIDAsIDEsIDAsIDEsIC0wLCAtMSwgMCwgMCkKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtMTEyOS44ODM2NjY5OTIxODc1LCA0MC40NjM1NDY3NTI5Mjk2OSwgLTUyNS40MjM3MDYwNTQ2ODc1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDMwIG9yIE15TGV2ZWwgPD0gMzkgdGhlbgogICAgICAgICAgICBNb24gPSAiUGlyYXRlIgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMQogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQnVnZ3lRdWVzdDEiCiAgICAgICAgICAgIE5hbWVNb24gPSAiUGlyYXRlIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoLTExNDEuMDc0ODMsIDQuMTAwMDE4MDIsIDM4MzEuNTQ5OCwgMC45NjU5Mjk2MjcsIC0wLCAtMC4yNTg4MDQ3OTgsIDAsIDEsIC0wLCAwLjI1ODgwNDc5OCwgMCwgMC45NjU5Mjk2MjcpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTExMDMuNTEzNDI3NzM0Mzc1LCAxMy43NTIwNTIzMDcxMjg5MDYsIDM4OTYuMDkxMDY0NDUzMTI1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDQwIG9yIE15TGV2ZWwgPD0gNTkgdGhlbgogICAgICAgICAgICBNb24gPSAiQnJ1dGUiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAyCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJCdWdneVF1ZXN0MSIKICAgICAgICAgICAgTmFtZU1vbiA9ICJCcnV0ZSIKICAgICAgICAgICAgQ0ZyYW1lUXVlc3QgPSBDRnJhbWUubmV3KC0xMTQxLjA3NDgzLCA0LjEwMDAxODAyLCAzODMxLjU0OTgsIDAuOTY1OTI5NjI3LCAtMCwgLTAuMjU4ODA0Nzk4LCAwLCAxLCAtMCwgMC4yNTg4MDQ3OTgsIDAsIDAuOTY1OTI5NjI3KQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0xMTQwLjA4Mzc0MDIzNDM3NSwgMTQuODA5ODg1MDI1MDI0NDE0LCA0MzIyLjkyMTM4NjcxODc1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDYwIG9yIE15TGV2ZWwgPD0gNzQgdGhlbgogICAgICAgICAgICBNb24gPSAiRGVzZXJ0IEJhbmRpdCIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDEKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkRlc2VydFF1ZXN0IgogICAgICAgICAgICBOYW1lTW9uID0gIkRlc2VydCBCYW5kaXQiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldyg4OTQuNDg4NjQ3LCA1LjE0MDAwNzAyLCA0MzkyLjQzMzU5LCAwLjgxOTE1NTY5MywgLTAsIC0wLjU3MzU3MTI2NSwgMCwgMSwgLTAsIDAuNTczNTcxMjY1LCAwLCAwLjgxOTE1NTY5MykKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg5MjQuNzk5ODA0Njg3NSwgNi40NDg2NzQ2Nzg4MDI0OSwgNDQ4MS41ODU5Mzc1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDc1IG9yIE15TGV2ZWwgPD0gODkgdGhlbgogICAgICAgICAgICBNb24gPSAiRGVzZXJ0IE9mZmljZXIiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAyCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEZXNlcnRRdWVzdCIKICAgICAgICAgICAgTmFtZU1vbiA9ICJEZXNlcnQgT2ZmaWNlciIKICAgICAgICAgICAgQ0ZyYW1lUXVlc3QgPSBDRnJhbWUubmV3KDg5NC40ODg2NDcsIDUuMTQwMDA3MDIsIDQzOTIuNDMzNTksIDAuODE5MTU1NjkzLCAtMCwgLTAuNTczNTcxMjY1LCAwLCAxLCAtMCwgMC41NzM1NzEyNjUsIDAsIDAuODE5MTU1NjkzKQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDE2MDguMjgyMjI2NTYyNSwgOC42MTQyMjQ0MzM4OTg5MjYsIDQzNzEuMDA3MzI0MjE4NzUpCiAgICAgICAgZWxzZWlmIE15TGV2ZWwgPT0gOTAgb3IgTXlMZXZlbCA8PSA5OSB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJTbm93IEJhbmRpdCIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDEKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNub3dRdWVzdCIKICAgICAgICAgICAgTmFtZU1vbiA9ICJTbm93IEJhbmRpdCIKICAgICAgICAgICAgQ0ZyYW1lUXVlc3QgPSBDRnJhbWUubmV3KDEzODkuNzQ0NTEsIDg4LjE1MTkzMTgsIC0xMjk4LjkwNzk2LCAtMC4zNDIwNDI2ODUsIDAsIDAuOTM5Njg0MzkxLCAwLCAxLCAwLCAtMC45Mzk2ODQzOTEsIDAsIC0wLjM0MjA0MjY4NSkKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygxMzU0LjM0NzkwMDM5MDYyNSwgODcuMjcyNzczNzQyNjc1NzgsIC0xMzkzLjk0NjUzMzIwMzEyNSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAxMDAgb3IgTXlMZXZlbCA8PSAxMTkgdGhlbgogICAgICAgICAgICBNb24gPSAiU25vd21hbiIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDIKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNub3dRdWVzdCIKICAgICAgICAgICAgTmFtZU1vbiA9ICJTbm93bWFuIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoMTM4OS43NDQ1MSwgODguMTUxOTMxOCwgLTEyOTguOTA3OTYsIC0wLjM0MjA0MjY4NSwgMCwgMC45Mzk2ODQzOTEsIDAsIDEsIDAsIC0wLjkzOTY4NDM5MSwgMCwgLTAuMzQyMDQyNjg1KQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDEyMDEuNjQxMjM1MzUxNTYyNSwgMTQ0LjU3OTU4OTg0Mzc1LCAtMTU1MC4wNjcwMTY2MDE1NjI1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDEyMCBvciBNeUxldmVsIDw9IDE0OSB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJDaGllZiBQZXR0eSBPZmZpY2VyIgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMQogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTWFyaW5lUXVlc3QyIgogICAgICAgICAgICBOYW1lTW9uID0gIkNoaWVmIFBldHR5IE9mZmljZXIiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldygtNTAzOS41ODY0MywgMjcuMzUwMDM4NSwgNDMyNC42ODAxOCwgMCwgMCwgLTEsIDAsIDEsIDAsIDEsIDAsIDApCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTQ4ODEuMjMwOTU3MDMxMjUsIDIyLjY1MjA0NDI5NjI2NDY1LCA0MjczLjc1MjQ0MTQwNjI1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDE1MCBvciBNeUxldmVsIDw9IDE3NCB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJTa3kgQmFuZGl0IgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMQogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2t5UXVlc3QiCiAgICAgICAgICAgIE5hbWVNb24gPSAiU2t5IEJhbmRpdCIKICAgICAgICAgICAgQ0ZyYW1lUXVlc3QgPSBDRnJhbWUubmV3KC00ODM5LjUzMDI3LCA3MTYuMzY4NTkxLCAtMjYxOS40NDE2NSwgMC44NjYwMDcyNjgsIDAsIDAuNTAwMDMxNDEyLCAwLCAxLCAwLCAtMC41MDAwMzE0MTIsIDAsIDAuODY2MDA3MjY4KQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC00OTUzLjIwNzAzMTI1LCAyOTUuNzQ0MjAxNjYwMTU2MjUsIC0yODk5LjIyOTAwMzkwNjI1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDE3NSBvciBNeUxldmVsIDw9IDE4OSB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJEYXJrIE1hc3RlciIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDIKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNreVF1ZXN0IgogICAgICAgICAgICBOYW1lTW9uID0gIkRhcmsgTWFzdGVyIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoLTQ4MzkuNTMwMjcsIDcxNi4zNjg1OTEsIC0yNjE5LjQ0MTY1LCAwLjg2NjAwNzI2OCwgMCwgMC41MDAwMzE0MTIsIDAsIDEsIDAsIC0wLjUwMDAzMTQxMiwgMCwgMC44NjYwMDcyNjgpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTUyNTkuODQ0NzI2NTYyNSwgMzkxLjM5NzY3NDU2MDU0NjksIC0yMjI5LjAzNTQwMDM5MDYyNSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAxOTAgb3IgTXlMZXZlbCA8PSAyMDkgdGhlbgogICAgICAgICAgICBNb24gPSAiUHJpc29uZXIiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAxCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJQcmlzb25lclF1ZXN0IgogICAgICAgICAgICBOYW1lTW9uID0gIlByaXNvbmVyIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoNTMwOC45MzExNSwgMS42NTUxNzUyMSwgNDc1LjEyMDUxNCwgLTAuMDg5NDI3NDcxMiwgLTUuMDAyOTI5MThlLTA5LCAtMC45OTU5OTMzMTYsIDEuNjA4MTc4NTllLTA5LCAxLCAtNS4xNjc0NDg2OWUtMDksIDAuOTk1OTkzMzE2LCAtMi4wNjM4NDcwOWUtMDksIC0wLjA4OTQyNzQ3MTIpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNTA5OC45NzM2MzI4MTI1LCAtMC4zMjA0MDU4MTEwNzEzOTU5LCA0NzQuMjM3MzM1MjA1MDc4MSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAyMTAgb3IgTXlMZXZlbCA8PSAyNDkgdGhlbgogICAgICAgICAgICBNb24gPSAiRGFuZ2Vyb3VzIFByaXNvbmVyIgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMgogICAgICAgICAgICBOYW1lUXVlc3QgPSAiUHJpc29uZXJRdWVzdCIKICAgICAgICAgICAgTmFtZU1vbiA9ICJEYW5nZXJvdXMgUHJpc29uZXIiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldyg1MzA4LjkzMTE1LCAxLjY1NTE3NTIxLCA0NzUuMTIwNTE0LCAtMC4wODk0Mjc0NzEyLCAtNS4wMDI5MjkxOGUtMDksIC0wLjk5NTk5MzMxNiwgMS42MDgxNzg1OWUtMDksIDEsIC01LjE2NzQ0ODY5ZS0wOSwgMC45OTU5OTMzMTYsIC0yLjA2Mzg0NzA5ZS0wOSwgLTAuMDg5NDI3NDcxMikKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg1NjU0LjU2MzQ3NjU2MjUsIDE1LjYzMzQwMTg3MDcyNzUzOSwgODY2LjI5OTE5NDMzNTkzNzUpCiAgICAgICAgZWxzZWlmIE15TGV2ZWwgPT0gMjUwIG9yIE15TGV2ZWwgPD0gMjc0IHRoZW4KICAgICAgICAgICAgTW9uID0gIlRvZ2EgV2FycmlvciIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDEKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNvbG9zc2V1bVF1ZXN0IgogICAgICAgICAgICBOYW1lTW9uID0gIlRvZ2EgV2FycmlvciIKICAgICAgICAgICAgQ0ZyYW1lUXVlc3QgPSBDRnJhbWUubmV3KC0xNTgwLjA0NjYzLCA2LjM1MDAwMjc3LCAtMjk4Ni40NzUzNCwgLTAuNTE1MDM3Mjk4LCAwLCAtMC44NTcxNjc3MjEsIDAsIDEsIDAsIDAuODU3MTY3NzIxLCAwLCAtMC41MTUwMzcyOTgpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTE4MjAuMjE0ODQzNzUsIDUxLjY4Mzg1Njk2NDExMTMzLCAtMjc0MC42NjUwMzkwNjI1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDI3NSBvciBNeUxldmVsIDw9IDI5OSB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJHbGFkaWF0b3IiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAyCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDb2xvc3NldW1RdWVzdCIKICAgICAgICAgICAgTmFtZU1vbiA9ICJHbGFkaWF0b3IiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldygtMTU4MC4wNDY2MywgNi4zNTAwMDI3NywgLTI5ODYuNDc1MzQsIC0wLjUxNTAzNzI5OCwgMCwgLTAuODU3MTY3NzIxLCAwLCAxLCAwLCAwLjg1NzE2NzcyMSwgMCwgLTAuNTE1MDM3Mjk4KQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0xMjkyLjgzODEzNDc2NTYyNSwgNTYuMzgwODgyMjYzMTgzNTk0LCAtMzMzOS4wMzE0OTQxNDA2MjUpCiAgICAgICAgZWxzZWlmIE15TGV2ZWwgPT0gMzAwIG9yIE15TGV2ZWwgPD0gMzI0IHRoZW4KICAgICAgICAgICAgTW9uID0gIk1pbGl0YXJ5IFNvbGRpZXIiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAxCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJNYWdtYVF1ZXN0IgogICAgICAgICAgICBOYW1lTW9uID0gIk1pbGl0YXJ5IFNvbGRpZXIiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldygtNTMxMy4zNzAxMiwgMTAuOTUwMDA4NCwgODUxNS4yOTM5NSwgLTAuNDk5OTU5NDY5LCAwLCAwLjg2NjA0ODgxMywgMCwgMSwgMCwgLTAuODY2MDQ4ODEzLCAwLCAtMC40OTk5NTk0NjkpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTU0MTEuMTY0NTUwNzgxMjUsIDExLjA4MTU1NDQxMjg0MTc5NywgODQ1NC4yOTI5Njg3NSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAzMjUgb3IgTXlMZXZlbCA8PSAzNzQgdGhlbgogICAgICAgICAgICBNb24gPSAiTWlsaXRhcnkgU3B5IgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMgogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTWFnbWFRdWVzdCIKICAgICAgICAgICAgTmFtZU1vbiA9ICJNaWxpdGFyeSBTcHkiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldygtNTMxMy4zNzAxMiwgMTAuOTUwMDA4NCwgODUxNS4yOTM5NSwgLTAuNDk5OTU5NDY5LCAwLCAwLjg2NjA0ODgxMywgMCwgMSwgMCwgLTAuODY2MDQ4ODEzLCAwLCAtMC40OTk5NTk0NjkpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTU4MDIuODY4MTY0MDYyNSwgODYuMjYyNDEzMDI0OTAyMzQsIDg4MjguODU5Mzc1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDM3NSBvciBNeUxldmVsIDw9IDM5OSB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJGaXNobWFuIFdhcnJpb3IiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAxCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGaXNobWFuUXVlc3QiCiAgICAgICAgICAgIE5hbWVNb24gPSAiRmlzaG1hbiBXYXJyaW9yIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoNjExMjIuNjUyMzQzNzUsIDE4LjQ5NzQ0MjI0NTQ4MywgMTU2OS4zOTk3ODAyNzM0KQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDYwODc4LjMwMDc4MTI1LCAxOC40ODI4MzAwNDc2MDc0MjIsIDE1NDMuNzU3NDQ2Mjg5MDYyNSkKICAgICAgICAgICAgaWYgX0cuQXV0b0Zhcm0gYW5kIChDRnJhbWVRdWVzdC5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMTAwMDAgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIixWZWN0b3IzLm5ldyg2MTE2My44NTE1NjI1LCAxMS42Nzk2ODc1LCAxODE5Ljc4NDE3OTY4NzUpKQogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSA0MDAgb3IgTXlMZXZlbCA8PSA0NDkgdGhlbgogICAgICAgICAgICBNb24gPSAiRmlzaG1hbiBDb21tYW5kbyIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDIKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZpc2htYW5RdWVzdCIKICAgICAgICAgICAgTmFtZU1vbiA9ICJGaXNobWFuIENvbW1hbmRvIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoNjExMjIuNjUyMzQzNzUsIDE4LjQ5NzQ0MjI0NTQ4MywgMTU2OS4zOTk3ODAyNzM0KQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDYxOTIyLjYzMjgxMjUsIDE4LjQ4MjgzMDA0NzYwNzQyMiwgMTQ5My45MzQzMjYxNzE4NzUpCiAgICAgICAgICAgIGlmIF9HLkF1dG9GYXJtIGFuZCAoQ0ZyYW1lUXVlc3QuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDEwMDAwIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsVmVjdG9yMy5uZXcoNjExNjMuODUxNTYyNSwgMTEuNjc5Njg3NSwgMTgxOS43ODQxNzk2ODc1KSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZWlmIE15TGV2ZWwgPT0gNDUwIG9yIE15TGV2ZWwgPD0gNDc0IHRoZW4KICAgICAgICAgICAgTW9uID0gIkdvZCdzIEd1YXJkIgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMQogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2t5RXhwMVF1ZXN0IgogICAgICAgICAgICBOYW1lTW9uID0gIkdvZCdzIEd1YXJkIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoLTQ3MjEuODg4NjcsIDg0My44NzQ2OTUsIC0xOTQ5Ljk2NjQzLCAwLjk5NjE5MTg1OSwgLTAsIC0wLjA4NzE4ODQzMDEsIDAsIDEsIC0wLCAwLjA4NzE4ODQzMDEsIDAsIDAuOTk2MTkxODU5KQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC00NzEwLjA0Mjk2ODc1LCA4NDUuMjc2OTc3NTM5MDYyNSwgLTE5MjcuMzA3OTgzMzk4NDM3NSkKICAgICAgICAgICAgaWYgX0cuQXV0b0Zhcm0gYW5kIChDRnJhbWVRdWVzdC5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMTAwMDAgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIixWZWN0b3IzLm5ldygtNDYwNy44MjI3NSwgODcyLjU0MjQ4LCAtMTY2Ny41NTY4OCkpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDQ3NSBvciBNeUxldmVsIDw9IDUyNCB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJTaGFuZGEiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAyCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTa3lFeHAxUXVlc3QiCiAgICAgICAgICAgIE5hbWVNb24gPSAiU2hhbmRhIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoLTc4NTkuMDk4MTQsIDU1NDQuMTkwNDMsIC0zODEuNDc2MTk2LCAtMC40MjI1OTI5OTgsIDAsIDAuOTA2MzE5NjE4LCAwLCAxLCAwLCAtMC45MDYzMTk2MTgsIDAsIC0wLjQyMjU5Mjk5OCkKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtNzY3OC40ODk3NDYwOTM3NSwgNTU2Ni40MDM4MDg1OTM3NSwgLTQ5Ny4yMTU2MDY2ODk0NTMxKQogICAgICAgICAgICBpZiBfRy5BdXRvRmFybSBhbmQgKENGcmFtZVF1ZXN0LlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAxMDAwMCB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLFZlY3RvcjMubmV3KC03ODk0LjYxNzY3NTc4MTMsIDU1NDcuMTQxNjAxNTYyNSwgLTM4MC4yOTExOTg3MzA0NykpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDUyNSBvciBNeUxldmVsIDw9IDU0OSB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJSb3lhbCBTcXVhZCIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDEKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNreUV4cDJRdWVzdCIKICAgICAgICAgICAgTmFtZU1vbiA9ICJSb3lhbCBTcXVhZCIKICAgICAgICAgICAgQ0ZyYW1lUXVlc3QgPSBDRnJhbWUubmV3KC03OTA2LjgxNTkyLCA1NjM0LjY2MjYsIC0xNDExLjk5MTk0LCAwLCAwLCAtMSwgMCwgMSwgMCwgMSwgMCwgMCkKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtNzYyNC4yNTI0NDE0MDYyNSwgNTY1OC4xMzMzMDA3ODEyNSwgLTE0NjcuMzU0MjQ4MDQ2ODc1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDU1MCBvciBNeUxldmVsIDw9IDYyNCB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJSb3lhbCBTb2xkaWVyIgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMgogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2t5RXhwMlF1ZXN0IgogICAgICAgICAgICBOYW1lTW9uID0gIlJveWFsIFNvbGRpZXIiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldygtNzkwNi44MTU5MiwgNTYzNC42NjI2LCAtMTQxMS45OTE5NCwgMCwgMCwgLTEsIDAsIDEsIDAsIDEsIDAsIDApCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTc4MzYuNzUzNDE3OTY4NzUsIDU2NDUuNjY0MDYyNSwgLTE3OTAuNjIzNjU3MjI2NTYyNSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSA2MjUgb3IgTXlMZXZlbCA8PSA2NDkgdGhlbgogICAgICAgICAgICBNb24gPSAiR2FsbGV5IFBpcmF0ZSIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDEKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZvdW50YWluUXVlc3QiCiAgICAgICAgICAgIE5hbWVNb24gPSAiR2FsbGV5IFBpcmF0ZSIKICAgICAgICAgICAgQ0ZyYW1lUXVlc3QgPSBDRnJhbWUubmV3KDUyNTkuODE5ODIsIDM3LjM1MDAxNzUsIDQwNTAuMDI5MywgMC4wODcxMzEzODEsIDAsIDAuOTk2MTk2ODY2LCAwLCAxLCAwLCAtMC45OTYxOTY4NjYsIDAsIDAuMDg3MTMxMzgxKQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDU1NTEuMDIxOTcyNjU2MjUsIDc4LjkwMTM1MTkyODcxMDk0LCAzOTMwLjQxMjg0MTc5Njg3NSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA+PSA2NTAgdGhlbgogICAgICAgICAgICBNb24gPSAiR2FsbGV5IENhcHRhaW4iCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAyCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGb3VudGFpblF1ZXN0IgogICAgICAgICAgICBOYW1lTW9uID0gIkdhbGxleSBDYXB0YWluIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoNTI1OS44MTk4MiwgMzcuMzUwMDE3NSwgNDA1MC4wMjkzLCAwLjA4NzEzMTM4MSwgMCwgMC45OTYxOTY4NjYsIDAsIDEsIDAsIC0wLjk5NjE5Njg2NiwgMCwgMC4wODcxMzEzODEpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNTQ0MS45NTE2NjAxNTYyNSwgNDIuNTAyMDU5OTM2NTIzNDQsIDQ5NTAuMDkzNzUpCiAgICAgICAgZW5kCiAgICBlbHNlaWYgV29ybGQyIHRoZW4KICAgICAgICBpZiBNeUxldmVsID09IDcwMCBvciBNeUxldmVsIDw9IDcyNCB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJSYWlkZXIiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAxCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJBcmVhMVF1ZXN0IgogICAgICAgICAgICBOYW1lTW9uID0gIlJhaWRlciIKICAgICAgICAgICAgQ0ZyYW1lUXVlc3QgPSBDRnJhbWUubmV3KC00MjkuNTQzNTE4LCA3MS43Njk5OTY2LCAxODM2LjE4MTg4LCAtMC4yMjQ5NTk4NSwgMCwgLTAuOTc0MzY4MDk1LCAwLCAxLCAwLCAwLjk3NDM2ODA5NSwgMCwgLTAuMjI0OTU5ODUpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTcyOC4zMjY3MjExOTE0MDYyLCA1Mi43NzkzMTk3NjMxODM1OTQsIDIzNDUuNzcwNTA3ODEyNSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSA3MjUgb3IgTXlMZXZlbCA8PSA3NzQgdGhlbgogICAgICAgICAgICBNb24gPSAiTWVyY2VuYXJ5IgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMgogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQXJlYTFRdWVzdCIKICAgICAgICAgICAgTmFtZU1vbiA9ICJNZXJjZW5hcnkiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldygtNDI5LjU0MzUxOCwgNzEuNzY5OTk2NiwgMTgzNi4xODE4OCwgLTAuMjI0OTU5ODUsIDAsIC0wLjk3NDM2ODA5NSwgMCwgMSwgMCwgMC45NzQzNjgwOTUsIDAsIC0wLjIyNDk1OTg1KQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0xMDA0LjMyNDQwMTg1NTQ2ODgsIDgwLjE1ODg2Njg4MjMyNDIyLCAxNDI0LjYxOTM4NDc2NTYyNSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSA3NzUgb3IgTXlMZXZlbCA8PSA3OTkgdGhlbgogICAgICAgICAgICBNb24gPSAiU3dhbiBQaXJhdGUiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAxCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJBcmVhMlF1ZXN0IgogICAgICAgICAgICBOYW1lTW9uID0gIlN3YW4gUGlyYXRlIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoNjM4LjQzODExLCA3MS43Njk5ODksIDkxOC4yODI4OTgsIDAuMTM5MjAzOTA2LCAwLCAwLjk5MDI2Mzc2LCAwLCAxLCAwLCAtMC45OTAyNjM3NiwgMCwgMC4xMzkyMDM5MDYpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMTA2OC42NjQzMDY2NDA2MjUsIDEzNy42MTQyODgzMzAwNzgxMiwgMTMyMi4xMDYwNzkxMDE1NjI1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDgwMCBvciBNeUxldmVsIDw9IDg3NCB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJGYWN0b3J5IFN0YWZmIgogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQXJlYTJRdWVzdCIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDIKICAgICAgICAgICAgTmFtZU1vbiA9ICJGYWN0b3J5IFN0YWZmIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoNjMyLjY5ODYwOCwgNzMuMTA1NTkwOCwgOTE4LjY2NjMyMSwgLTAuMDMxOTcyMjM2OSwgOC45NjA3NDg4MWUtMTAsIC0wLjk5OTQ4ODc3MSwgMS4zNjMyNjUzM2UtMTAsIDEsIDguOTIxNzIzMzZlLTEwLCAwLjk5OTQ4ODc3MSwgLTEuMDc3MzIwODdlLTEwLCAtMC4wMzE5NzIyMzY5KQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDczLjA3ODY3NDMxNjQwNjI1LCA4MS44NjM0NDE0NjcyODUxNiwgLTI3LjQ3MDY3MjYwNzQyMTg3NSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSA4NzUgb3IgTXlMZXZlbCA8PSA4OTkgdGhlbgogICAgICAgICAgICBNb24gPSAiTWFyaW5lIExpZXV0ZW5hbnQiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAxCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJNYXJpbmVRdWVzdDMiCiAgICAgICAgICAgIE5hbWVNb24gPSAiTWFyaW5lIExpZXV0ZW5hbnQiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldygtMjQ0MC43OTYzOSwgNzEuNzE0MDczMiwgLTMyMTYuMDY4MTIsIDAuODY2MDA3MjY4LCAwLCAwLjUwMDAzMTQxMiwgMCwgMSwgMCwgLTAuNTAwMDMxNDEyLCAwLCAwLjg2NjAwNzI2OCkKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtMjgyMS4zNzIzMTQ0NTMxMjUsIDc1Ljg5NzI3NzgzMjAzMTI1LCAtMzA3MC4wODkxMTEzMjgxMjUpCiAgICAgICAgZWxzZWlmIE15TGV2ZWwgPT0gOTAwIG9yIE15TGV2ZWwgPD0gOTQ5IHRoZW4KICAgICAgICAgICAgTW9uID0gIk1hcmluZSBDYXB0YWluIgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMgogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTWFyaW5lUXVlc3QzIgogICAgICAgICAgICBOYW1lTW9uID0gIk1hcmluZSBDYXB0YWluIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoLTI0NDAuNzk2MzksIDcxLjcxNDA3MzIsIC0zMjE2LjA2ODEyLCAwLjg2NjAwNzI2OCwgMCwgMC41MDAwMzE0MTIsIDAsIDEsIDAsIC0wLjUwMDAzMTQxMiwgMCwgMC44NjYwMDcyNjgpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTE4NjEuMjMxMDc5MTAxNTYyNSwgODAuMTc2NTgyMzM2NDI1NzgsIC0zMjU0LjY5NzUwOTc2NTYyNSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSA5NTAgb3IgTXlMZXZlbCA8PSA5NzQgdGhlbgogICAgICAgICAgICBNb24gPSAiWm9tYmllIgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMQogICAgICAgICAgICBOYW1lUXVlc3QgPSAiWm9tYmllUXVlc3QiCiAgICAgICAgICAgIE5hbWVNb24gPSAiWm9tYmllIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoLTU0OTcuMDYxNTIsIDQ3LjU5MjMwMDQsIC03OTUuMjM3MDYxLCAtMC4yOTI0MjE0NiwgMCwgLTAuOTU2Mjg5NTMsIDAsIDEsIDAsIDAuOTU2Mjg5NTMsIDAsIC0wLjI5MjQyMTQ2KQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC01NjU3Ljc3Njg1NTQ2ODc1LCA3OC45Njk3MzQxOTE4OTQ1MywgLTkyOC42ODcwMTE3MTg3NSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSA5NzUgb3IgTXlMZXZlbCA8PSA5OTkgdGhlbgogICAgICAgICAgICBNb24gPSAiVmFtcGlyZSIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDIKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlpvbWJpZVF1ZXN0IgogICAgICAgICAgICBOYW1lTW9uID0gIlZhbXBpcmUiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldygtNTQ5Ny4wNjE1MiwgNDcuNTkyMzAwNCwgLTc5NS4yMzcwNjEsIC0wLjI5MjQyMTQ2LCAwLCAtMC45NTYyODk1MywgMCwgMSwgMCwgMC45NTYyODk1MywgMCwgLTAuMjkyNDIxNDYpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTYwMzcuNjY3OTY4NzUsIDMyLjE4NDYzODk3NzA1MDc4LCAtMTM0MC42NTk3OTAwMzkwNjI1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDEwMDAgb3IgTXlMZXZlbCA8PSAxMDQ5IHRoZW4KICAgICAgICAgICAgTW9uID0gIlNub3cgVHJvb3BlciIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDEKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNub3dNb3VudGFpblF1ZXN0IgogICAgICAgICAgICBOYW1lTW9uID0gIlNub3cgVHJvb3BlciIKICAgICAgICAgICAgQ0ZyYW1lUXVlc3QgPSBDRnJhbWUubmV3KDYwOS44NTg4MjYsIDQwMC4xMTk5MDQsIC01MzcyLjI1OTI4LCAtMC4zNzQ2MDQxMDYsIDAsIDAuOTI3MTg0ODgsIDAsIDEsIDAsIC0wLjkyNzE4NDg4LCAwLCAtMC4zNzQ2MDQxMDYpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNTQ5LjE0NzMzODg2NzE4NzUsIDQyNy4zODcwNTQ0NDMzNTk0LCAtNTU2My42OTg3MzA0Njg3NSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAxMDUwIG9yIE15TGV2ZWwgPD0gMTA5OSB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJXaW50ZXIgV2FycmlvciIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDIKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNub3dNb3VudGFpblF1ZXN0IgogICAgICAgICAgICBOYW1lTW9uID0gIldpbnRlciBXYXJyaW9yIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoNjA5Ljg1ODgyNiwgNDAwLjExOTkwNCwgLTUzNzIuMjU5MjgsIC0wLjM3NDYwNDEwNiwgMCwgMC45MjcxODQ4OCwgMCwgMSwgMCwgLTAuOTI3MTg0ODgsIDAsIC0wLjM3NDYwNDEwNikKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygxMTQyLjc0NTExNzE4NzUsIDQ3NS42Mzk4MDEwMjUzOTA2LCAtNTE5OS40MTY1MDM5MDYyNSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAxMTAwIG9yIE15TGV2ZWwgPD0gMTEyNCB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJMYWIgU3Vib3JkaW5hdGUiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAxCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJJY2VTaWRlUXVlc3QiCiAgICAgICAgICAgIE5hbWVNb24gPSAiTGFiIFN1Ym9yZGluYXRlIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoLTYwNjQuMDY4ODUsIDE1LjI0MjI4NTcsIC00OTAyLjk3ODUyLCAwLjQ1Mzk3MjU3OCwgLTAsIC0wLjg5MTAxNTY0OSwgMCwgMSwgLTAsIDAuODkxMDE1NjQ5LCAwLCAwLjQ1Mzk3MjU3OCkKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtNTcwNy40NzE2Nzk2ODc1LCAxNS45NTE3MDk3NDczMTQ0NTMsIC00NTEzLjM5MjA4OTg0Mzc1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDExMjUgb3IgTXlMZXZlbCA8PSAxMTc0IHRoZW4KICAgICAgICAgICAgTW9uID0gIkhvcm5lZCBXYXJyaW9yIgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMgogICAgICAgICAgICBOYW1lUXVlc3QgPSAiSWNlU2lkZVF1ZXN0IgogICAgICAgICAgICBOYW1lTW9uID0gIkhvcm5lZCBXYXJyaW9yIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoLTYwNjQuMDY4ODUsIDE1LjI0MjI4NTcsIC00OTAyLjk3ODUyLCAwLjQ1Mzk3MjU3OCwgLTAsIC0wLjg5MTAxNTY0OSwgMCwgMSwgLTAsIDAuODkxMDE1NjQ5LCAwLCAwLjQ1Mzk3MjU3OCkKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtNjM0MS4zNjY2OTkyMTg3NSwgMTUuOTUxNzcwNzgyNDcwNzAzLCAtNTcyMy4xNjIxMDkzNzUpCiAgICAgICAgZWxzZWlmIE15TGV2ZWwgPT0gMTE3NSBvciBNeUxldmVsIDw9IDExOTkgdGhlbgogICAgICAgICAgICBNb24gPSAiTWFnbWEgTmluamEiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAxCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGaXJlU2lkZVF1ZXN0IgogICAgICAgICAgICBOYW1lTW9uID0gIk1hZ21hIE5pbmphIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoLTU0MjguMDMxNzQsIDE1LjA2MjI5MjEsIC01Mjk5LjQzNDU3LCAtMC44ODI5NTIyMTMsIDAsIDAuNDY5NDYzNTU3LCAwLCAxLCAwLCAtMC40Njk0NjM1NTcsIDAsIC0wLjg4Mjk1MjIxMykKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtNTQ0OS42NzI4NTE1NjI1LCA3Ni42NTg3NDQ4MTIwMTE3MiwgLTU4MDguMjAwNjgzNTkzNzUpCiAgICAgICAgZWxzZWlmIE15TGV2ZWwgPT0gMTIwMCBvciBNeUxldmVsIDw9IDEyNDkgdGhlbgogICAgICAgICAgICBNb24gPSAiTGF2YSBQaXJhdGUiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAyCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGaXJlU2lkZVF1ZXN0IgogICAgICAgICAgICBOYW1lTW9uID0gIkxhdmEgUGlyYXRlIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoLTU0MjguMDMxNzQsIDE1LjA2MjI5MjEsIC01Mjk5LjQzNDU3LCAtMC44ODI5NTIyMTMsIDAsIDAuNDY5NDYzNTU3LCAwLCAxLCAwLCAtMC40Njk0NjM1NTcsIDAsIC0wLjg4Mjk1MjIxMykKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtNTIxMy4zMzE1NDI5Njg3NSwgNDkuNzM3ODgwNzA2Nzg3MTEsIC00NzAxLjQ1MTE3MTg3NSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAxMjUwIG9yIE15TGV2ZWwgPD0gMTI3NCB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJTaGlwIERlY2toYW5kIgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMQogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2hpcFF1ZXN0MSIKICAgICAgICAgICAgTmFtZU1vbiA9ICJTaGlwIERlY2toYW5kIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoMTAzNy44MDEyNywgMTI1LjA5MjE3MSwgMzI5MTEuNjAxNikgICAgICAgICAKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygxMjEyLjAxMTEwODM5ODQzNzUsIDE1MC43OTIwNTMyMjI2NTYyNSwgMzMwNTkuMjQ2MDkzNzUpICAgIAogICAgICAgICAgICBpZiBfRy5BdXRvRmFybSBhbmQgKENGcmFtZVF1ZXN0LlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAxMDAwMCB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLFZlY3RvcjMubmV3KDkyMy4yMTI1MjQ0MTQwNiwgMTI2Ljk3NjAwNTU1NDIsIDMyODUyLjgzMjAzMTI1KSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZWlmIE15TGV2ZWwgPT0gMTI3NSBvciBNeUxldmVsIDw9IDEyOTkgdGhlbgogICAgICAgICAgICBNb24gPSAiU2hpcCBFbmdpbmVlciIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDIKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNoaXBRdWVzdDEiCiAgICAgICAgICAgIE5hbWVNb24gPSAiU2hpcCBFbmdpbmVlciIKICAgICAgICAgICAgQ0ZyYW1lUXVlc3QgPSBDRnJhbWUubmV3KDEwMzcuODAxMjcsIDEyNS4wOTIxNzEsIDMyOTExLjYwMTYpICAgCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoOTE5LjQ3ODYzNzY5NTMxMjUsIDQzLjU0NDAxMzk3NzA1MDc4LCAzMjc3OS45Njg3NSkgICAKICAgICAgICAgICAgaWYgX0cuQXV0b0Zhcm0gYW5kIChDRnJhbWVRdWVzdC5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMTAwMDAgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIixWZWN0b3IzLm5ldyg5MjMuMjEyNTI0NDE0MDYsIDEyNi45NzYwMDU1NTQyLCAzMjg1Mi44MzIwMzEyNSkpCiAgICAgICAgICAgIGVuZCAgICAgICAgICAgICAKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAxMzAwIG9yIE15TGV2ZWwgPD0gMTMyNCB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJTaGlwIFN0ZXdhcmQiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAxCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTaGlwUXVlc3QyIgogICAgICAgICAgICBOYW1lTW9uID0gIlNoaXAgU3Rld2FyZCIKICAgICAgICAgICAgQ0ZyYW1lUXVlc3QgPSBDRnJhbWUubmV3KDk2OC44MDk1NywgMTI1LjA5MjE3MSwgMzMyNDQuMTI1KSAgICAgICAgIAogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDkxOS40Mzg1Mzc1OTc2NTYyLCAxMjkuNTU1OTk5NzU1ODU5MzgsIDMzNDM2LjAzNTE1NjI1KSAgICAgIAogICAgICAgICAgICBpZiBfRy5BdXRvRmFybSBhbmQgKENGcmFtZVF1ZXN0LlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAxMDAwMCB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLFZlY3RvcjMubmV3KDkyMy4yMTI1MjQ0MTQwNiwgMTI2Ljk3NjAwNTU1NDIsIDMyODUyLjgzMjAzMTI1KSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZWlmIE15TGV2ZWwgPT0gMTMyNSBvciBNeUxldmVsIDw9IDEzNDkgdGhlbgogICAgICAgICAgICBNb24gPSAiU2hpcCBPZmZpY2VyIgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMgogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2hpcFF1ZXN0MiIKICAgICAgICAgICAgTmFtZU1vbiA9ICJTaGlwIE9mZmljZXIiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldyg5NjguODA5NTcsIDEyNS4wOTIxNzEsIDMzMjQ0LjEyNSkKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygxMDM2LjAxNzk0NDMzNTkzNzUsIDE4MS40MzkwNDExMzc2OTUzLCAzMzMxNS43MjY1NjI1KQogICAgICAgICAgICBpZiBfRy5BdXRvRmFybSBhbmQgKENGcmFtZVF1ZXN0LlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAxMDAwMCB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLFZlY3RvcjMubmV3KDkyMy4yMTI1MjQ0MTQwNiwgMTI2Ljk3NjAwNTU1NDIsIDMyODUyLjgzMjAzMTI1KSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZWlmIE15TGV2ZWwgPT0gMTM1MCBvciBNeUxldmVsIDw9IDEzNzQgdGhlbgogICAgICAgICAgICBNb24gPSAiQXJjdGljIFdhcnJpb3IiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAxCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGcm9zdFF1ZXN0IgogICAgICAgICAgICBOYW1lTW9uID0gIkFyY3RpYyBXYXJyaW9yIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoNTY2Ny42NTgyLCAyNi43OTk3ODE4LCAtNjQ4Ni4wODk4NCwgLTAuOTMzNTg3OTA5LCAwLCAtMC4zNTgzNDk1MDIsIDAsIDEsIDAsIDAuMzU4MzQ5NTAyLCAwLCAtMC45MzM1ODc5MDkpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNTk2Ni4yNDYwOTM3NSwgNjIuOTcwMDIwMjk0MTg5NDUsIC02MTc5LjM4MjgxMjUpCiAgICAgICAgICAgIGlmIF9HLkF1dG9GYXJtIGFuZCAoQ0ZyYW1lUXVlc3QuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDEwMDAwIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsVmVjdG9yMy5uZXcoLTY1MDguNTU4MTA1NDY4OCwgNTAwMC4wMzQ5OTYwMzI3MTUsIC0xMzIuODM5NTM4NTc0MjIpKQogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAxMzc1IG9yIE15TGV2ZWwgPD0gMTQyNCB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJTbm93IEx1cmtlciIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDIKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZyb3N0UXVlc3QiCiAgICAgICAgICAgIE5hbWVNb24gPSAiU25vdyBMdXJrZXIiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldyg1NjY3LjY1ODIsIDI2Ljc5OTc4MTgsIC02NDg2LjA4OTg0LCAtMC45MzM1ODc5MDksIDAsIC0wLjM1ODM0OTUwMiwgMCwgMSwgMCwgMC4zNTgzNDk1MDIsIDAsIC0wLjkzMzU4NzkwOSkKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg1NDA3LjA3MzczMDQ2ODc1LCA2OS4xOTQzNzQwODQ0NzI2NiwgLTY4ODAuODgwMzcxMDkzNzUpCiAgICAgICAgZWxzZWlmIE15TGV2ZWwgPT0gMTQyNSBvciBNeUxldmVsIDw9IDE0NDkgdGhlbgogICAgICAgICAgICBNb24gPSAiU2VhIFNvbGRpZXIiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAxCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGb3Jnb3R0ZW5RdWVzdCIKICAgICAgICAgICAgTmFtZU1vbiA9ICJTZWEgU29sZGllciIKICAgICAgICAgICAgQ0ZyYW1lUXVlc3QgPSBDRnJhbWUubmV3KC0zMDU0LjQ0NDU4LCAyMzUuNTQ0MjgxLCAtMTAxNDIuODE5MywgMC45OTAyNzAzNzYsIC0wLCAtMC4xMzkxNTY2NCwgMCwgMSwgLTAsIDAuMTM5MTU2NjQsIDAsIDAuOTkwMjcwMzc2KQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0zMDI4LjIyMzYzMjgxMjUsIDY0LjY3NDUxNDc3MDUwNzgxLCAtOTc3NS40MjY3NTc4MTI1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID49IDE0NTAgdGhlbgogICAgICAgICAgICBNb24gPSAiV2F0ZXIgRmlnaHRlciIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDIKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZvcmdvdHRlblF1ZXN0IgogICAgICAgICAgICBOYW1lTW9uID0gIldhdGVyIEZpZ2h0ZXIiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldygtMzA1NC40NDQ1OCwgMjM1LjU0NDI4MSwgLTEwMTQyLjgxOTMsIDAuOTkwMjcwMzc2LCAtMCwgLTAuMTM5MTU2NjQsIDAsIDEsIC0wLCAwLjEzOTE1NjY0LCAwLCAwLjk5MDI3MDM3NikKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtMzM1Mi45MDEzNjcxODc1LCAyODUuMDE1NTYzOTY0ODQzNzUsIC0xMDUzNC44NDE3OTY4NzUpCiAgICAgICAgZW5kCiAgICBlbHNlaWYgV29ybGQzIHRoZW4KICAgICAgICBpZiBNeUxldmVsID09IDE1MDAgb3IgTXlMZXZlbCA8PSAxNTI0IHRoZW4KICAgICAgICAgICAgTW9uID0gIlBpcmF0ZSBNaWxsaW9uYWlyZSIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDEKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlBpcmF0ZVBvcnRRdWVzdCIKICAgICAgICAgICAgTmFtZU1vbiA9ICJQaXJhdGUgTWlsbGlvbmFpcmUiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldygtMjkwLjA3NDY3NywgNDIuOTAzNDY1MywgNTU4MS41ODk4NCwgMC45NjU5Mjk2MjcsIC0wLCAtMC4yNTg4MDQ3OTgsIDAsIDEsIC0wLCAwLjI1ODgwNDc5OCwgMCwgMC45NjU5Mjk2MjcpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTI0NS45OTYzODM2NjY5OTIyLCA0Ny4zMDYxNTIzNDM3NSwgNTU4NC4xMDA1ODU5Mzc1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDE1MjUgb3IgTXlMZXZlbCA8PSAxNTc0IHRoZW4KICAgICAgICAgICAgTW9uID0gIlBpc3RvbCBCaWxsaW9uYWlyZSIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDIKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlBpcmF0ZVBvcnRRdWVzdCIKICAgICAgICAgICAgTmFtZU1vbiA9ICJQaXN0b2wgQmlsbGlvbmFpcmUiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldygtMjkwLjA3NDY3NywgNDIuOTAzNDY1MywgNTU4MS41ODk4NCwgMC45NjU5Mjk2MjcsIC0wLCAtMC4yNTg4MDQ3OTgsIDAsIDEsIC0wLCAwLjI1ODgwNDc5OCwgMCwgMC45NjU5Mjk2MjcpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTE4Ny4zMzAxNTQ0MTg5NDUzLCA4Ni4yMzk4NzU3OTM0NTcwMywgNjAxMy41MTM2NzE4NzUpCiAgICAgICAgZWxzZWlmIE15TGV2ZWwgPT0gMTU3NSBvciBNeUxldmVsIDw9IDE1OTkgdGhlbgogICAgICAgICAgICBNb24gPSAiRHJhZ29uIENyZXcgV2FycmlvciIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDEKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkFtYXpvblF1ZXN0IgogICAgICAgICAgICBOYW1lTW9uID0gIkRyYWdvbiBDcmV3IFdhcnJpb3IiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldyg1ODMyLjgzNTk0LCA1MS42ODA2MTA3LCAtMTEwMS41MTU2MywgMC44OTg3OTAzNTksIC0wLCAtMC40MzgzNzg3NTEsIDAsIDEsIC0wLCAwLjQzODM3ODc1MSwgMCwgMC44OTg3OTAzNTkpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNjE0MS4xNDA2MjUsIDUxLjM1MTM2NDEzNTc0MjE5LCAtMTM0MC43Mzg1MjUzOTA2MjUpCiAgICAgICAgZWxzZWlmIE15TGV2ZWwgPT0gMTYwMCBvciBNeUxldmVsIDw9IDE2MjQgdGhlbiAKICAgICAgICAgICAgTW9uID0gIkRyYWdvbiBDcmV3IEFyY2hlciIKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkFtYXpvblF1ZXN0IgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMgogICAgICAgICAgICBOYW1lTW9uID0gIkRyYWdvbiBDcmV3IEFyY2hlciIKICAgICAgICAgICAgQ0ZyYW1lUXVlc3QgPSBDRnJhbWUubmV3KDU4MzMuMTE0NzQ2MDkzOCwgNTEuNjA0OTgwNDY4NzUsIC0xMTAzLjA2OTMzNTkzNzUpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNjYxNi40MTc0ODA0Njg3NSwgNDQxLjc2NzA1OTMyNjE3MTksIDQ0Ni4wNDY5OTcwNzAzMTI1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDE2MjUgb3IgTXlMZXZlbCA8PSAxNjQ5IHRoZW4KICAgICAgICAgICAgTW9uID0gIkZlbWFsZSBJc2xhbmRlciIKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkFtYXpvblF1ZXN0MiIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDEKICAgICAgICAgICAgTmFtZU1vbiA9ICJGZW1hbGUgSXNsYW5kZXIiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldyg1NDQ2Ljg3OTM5NDUzMTMsIDYwMS42Mjk0NTU1NjY0MSwgNzQ5LjQ1NjcyNjA3NDIyKQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDQ2ODUuMjU4MzAwNzgxMjUsIDczNS44MDc4MDAyOTI5Njg4LCA4MTUuMzQyNTkwMzMyMDMxMikKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAxNjUwIG9yIE15TGV2ZWwgPD0gMTY5OSB0aGVuIAogICAgICAgICAgICBNb24gPSAiR2lhbnQgSXNsYW5kZXIiCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJBbWF6b25RdWVzdDIiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAyCiAgICAgICAgICAgIE5hbWVNb24gPSAiR2lhbnQgSXNsYW5kZXIiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldyg1NDQ2Ljg3OTM5NDUzMTMsIDYwMS42Mjk0NTU1NjY0MSwgNzQ5LjQ1NjcyNjA3NDIyKQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDQ3MjkuMDk0MjM4MjgxMjUsIDU5MC40MzY3Njc1NzgxMjUsIC0zNi45NzYyNzYzOTc3MDUwOCkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAxNzAwIG9yIE15TGV2ZWwgPD0gMTcyNCB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJNYXJpbmUgQ29tbW9kb3JlIgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMQogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTWFyaW5lVHJlZUlzbGFuZCIKICAgICAgICAgICAgTmFtZU1vbiA9ICJNYXJpbmUgQ29tbW9kb3JlIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoMjE4MC41NDEyNiwgMjcuODE1NjgxNSwgLTY3NDEuNTQ5OCwgLTAuOTY1OTI5NzQ3LCAwLCAwLjI1ODgwNDc5OCwgMCwgMSwgMCwgLTAuMjU4ODA0Nzk4LCAwLCAtMC45NjU5Mjk3NDcpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMjI4Ni4wMDc4MTI1LCA3My4xMzM5MTg3NjIyMDcwMywgLTcxNTkuODA5MDgyMDMxMjUpCiAgICAgICAgZWxzZWlmIE15TGV2ZWwgPT0gMTcyNSBvciBNeUxldmVsIDw9IDE3NzQgdGhlbgogICAgICAgICAgICBNb24gPSAiTWFyaW5lIFJlYXIgQWRtaXJhbCIKICAgICAgICAgICAgTmFtZU1vbiA9ICJNYXJpbmUgUmVhciBBZG1pcmFsIgogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTWFyaW5lVHJlZUlzbGFuZCIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDIKICAgICAgICAgICAgQ0ZyYW1lUXVlc3QgPSBDRnJhbWUubmV3KDIxNzkuOTg4MjgxMjUsIDI4LjczMTIzOTMxODg0OCwgLTY3NDAuMDU1MTc1NzgxMykKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygzNjU2Ljc3MzY4MTY0MDYyNSwgMTYwLjUyNDA2MzExMDM1MTU2LCAtNzAwMS41OTg2MzI4MTI1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDE3NzUgb3IgTXlMZXZlbCA8PSAxNzk5IHRoZW4KICAgICAgICAgICAgTW9uID0gIkZpc2htYW4gUmFpZGVyIgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMQogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRGVlcEZvcmVzdElzbGFuZDMiCiAgICAgICAgICAgIE5hbWVNb24gPSAiRmlzaG1hbiBSYWlkZXIiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldygtMTA1ODEuNjU2MywgMzMwLjg3Mjk1NSwgLTg3NjEuMTg2NTIsIC0wLjg4Mjk1MjIxMywgMCwgMC40Njk0NjM1NTcsIDAsIDEsIDAsIC0wLjQ2OTQ2MzU1NywgMCwgLTAuODgyOTUyMjEzKSAgIAogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0xMDQwNy41MjYzNjcxODc1LCAzMzEuNzYyNjM0Mjc3MzQzNzUsIC04MzY4LjUxNjYwMTU2MjUpCiAgICAgICAgZWxzZWlmIE15TGV2ZWwgPT0gMTgwMCBvciBNeUxldmVsIDw9IDE4MjQgdGhlbgogICAgICAgICAgICBNb24gPSAiRmlzaG1hbiBDYXB0YWluIgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMgogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRGVlcEZvcmVzdElzbGFuZDMiCiAgICAgICAgICAgIE5hbWVNb24gPSAiRmlzaG1hbiBDYXB0YWluIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoLTEwNTgxLjY1NjMsIDMzMC44NzI5NTUsIC04NzYxLjE4NjUyLCAtMC44ODI5NTIyMTMsIDAsIDAuNDY5NDYzNTU3LCAwLCAxLCAwLCAtMC40Njk0NjM1NTcsIDAsIC0wLjg4Mjk1MjIxMykgICAKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtMTA5OTQuNzAxMTcxODc1LCAzNTIuMzgxNDA4NjkxNDA2MjUsIC05MDAyLjExMDM1MTU2MjUpIAogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDE4MjUgb3IgTXlMZXZlbCA8PSAxODQ5IHRoZW4KICAgICAgICAgICAgTW9uID0gIkZvcmVzdCBQaXJhdGUiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAxCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEZWVwRm9yZXN0SXNsYW5kIgogICAgICAgICAgICBOYW1lTW9uID0gIkZvcmVzdCBQaXJhdGUiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldygtMTMyMzQuMDQsIDMzMS40ODg0OTUsIC03NjI1LjQwMTM3LCAwLjcwNzEzNDI0NywgLTAsIC0wLjcwNzA3OTI5MSwgMCwgMSwgLTAsIDAuNzA3MDc5MjkxLCAwLCAwLjcwNzEzNDI0NykKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtMTMyNzQuNDc4NTE1NjI1LCAzMzIuMzc4MTQzMzEwNTQ2OSwgLTc3NjkuNTgwNTY2NDA2MjUpCiAgICAgICAgZWxzZWlmIE15TGV2ZWwgPT0gMTg1MCBvciBNeUxldmVsIDw9IDE4OTkgdGhlbgogICAgICAgICAgICBNb24gPSAiTXl0aG9sb2dpY2FsIFBpcmF0ZSIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDIKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkRlZXBGb3Jlc3RJc2xhbmQiCiAgICAgICAgICAgIE5hbWVNb24gPSAiTXl0aG9sb2dpY2FsIFBpcmF0ZSIKICAgICAgICAgICAgQ0ZyYW1lUXVlc3QgPSBDRnJhbWUubmV3KC0xMzIzNC4wNCwgMzMxLjQ4ODQ5NSwgLTc2MjUuNDAxMzcsIDAuNzA3MTM0MjQ3LCAtMCwgLTAuNzA3MDc5MjkxLCAwLCAxLCAtMCwgMC43MDcwNzkyOTEsIDAsIDAuNzA3MTM0MjQ3KSAgIAogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0xMzY4MC42MDc0MjE4NzUsIDUwMS4wODE1NDI5Njg3NSwgLTY5OTEuMTg5NDUzMTI1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDE5MDAgb3IgTXlMZXZlbCA8PSAxOTI0IHRoZW4KICAgICAgICAgICAgTW9uID0gIkp1bmdsZSBQaXJhdGUiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAxCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEZWVwRm9yZXN0SXNsYW5kMiIKICAgICAgICAgICAgTmFtZU1vbiA9ICJKdW5nbGUgUGlyYXRlIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoLTEyNjgwLjM4MTgsIDM4OS45NzEwMzksIC05OTAyLjAxOTUzLCAtMC4wODcxMzE1MDAyLCAwLCAwLjk5NjE5Njg2NiwgMCwgMSwgMCwgLTAuOTk2MTk2ODY2LCAwLCAtMC4wODcxMzE1MDAyKQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0xMjI1Ni4xNjAxNTYyNSwgMzMxLjczODI4MTI1LCAtMTA0ODUuODM2OTE0MDYyNSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAxOTI1IG9yIE15TGV2ZWwgPD0gMTk3NCB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJNdXNrZXRlZXIgUGlyYXRlIgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMgogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRGVlcEZvcmVzdElzbGFuZDIiCiAgICAgICAgICAgIE5hbWVNb24gPSAiTXVza2V0ZWVyIFBpcmF0ZSIKICAgICAgICAgICAgQ0ZyYW1lUXVlc3QgPSBDRnJhbWUubmV3KC0xMjY4MC4zODE4LCAzODkuOTcxMDM5LCAtOTkwMi4wMTk1MywgLTAuMDg3MTMxNTAwMiwgMCwgMC45OTYxOTY4NjYsIDAsIDEsIDAsIC0wLjk5NjE5Njg2NiwgMCwgLTAuMDg3MTMxNTAwMikKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtMTM0NTcuOTA0Mjk2ODc1LCAzOTEuNTQ1NjU0Mjk2ODc1LCAtOTg1OS4xNzc3MzQzNzUpCiAgICAgICAgZWxzZWlmIE15TGV2ZWwgPT0gMTk3NSBvciBNeUxldmVsIDw9IDE5OTkgdGhlbgogICAgICAgICAgICBNb24gPSAiUmVib3JuIFNrZWxldG9uIgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMQogICAgICAgICAgICBOYW1lUXVlc3QgPSAiSGF1bnRlZFF1ZXN0MSIKICAgICAgICAgICAgTmFtZU1vbiA9ICJSZWJvcm4gU2tlbGV0b24iCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldygtOTQ3OS4yMTY4LCAxNDEuMjE1MDg4LCA1NTY2LjA5Mjc3LCAwLCAwLCAxLCAwLCAxLCAtMCwgLTEsIDAsIDApCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTg3NjMuNzIzNjMyODEyNSwgMTY1LjcyMjk5MTk0MzM1OTM4LCA2MTU5Ljg2MTgxNjQwNjI1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDIwMDAgb3IgTXlMZXZlbCA8PSAyMDI0IHRoZW4KICAgICAgICAgICAgTW9uID0gIkxpdmluZyBab21iaWUiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAyCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJIYXVudGVkUXVlc3QxIgogICAgICAgICAgICBOYW1lTW9uID0gIkxpdmluZyBab21iaWUiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldygtOTQ3OS4yMTY4LCAxNDEuMjE1MDg4LCA1NTY2LjA5Mjc3LCAwLCAwLCAxLCAwLCAxLCAtMCwgLTEsIDAsIDApCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTEwMTQ0LjEzMTgzNTkzNzUsIDEzOC42MjY2Nzg0NjY3OTY4OCwgNTgzOC4wODg4NjcxODc1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDIwMjUgb3IgTXlMZXZlbCA8PSAyMDQ5IHRoZW4KICAgICAgICAgICAgTW9uID0gIkRlbW9uaWMgU291bCIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDEKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkhhdW50ZWRRdWVzdDIiCiAgICAgICAgICAgIE5hbWVNb24gPSAiRGVtb25pYyBTb3VsIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoLTk1MTYuOTkzMTYsIDE3Mi4wMTcxODEsIDYwNzguNDY1MzMsIDAsIDAsIC0xLCAwLCAxLCAwLCAxLCAwLCAwKSAKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtOTUwNS44NzIwNzAzMTI1LCAxNzIuMTA0ODI3ODgwODU5MzgsIDYxNTguOTkzMTY0MDYyNSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAyMDUwIG9yIE15TGV2ZWwgPD0gMjA3NCB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJQb3Nlc3NlZCBNdW1teSIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDIKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkhhdW50ZWRRdWVzdDIiCiAgICAgICAgICAgIE5hbWVNb24gPSAiUG9zZXNzZWQgTXVtbXkiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldygtOTUxNi45OTMxNiwgMTcyLjAxNzE4MSwgNjA3OC40NjUzMywgMCwgMCwgLTEsIDAsIDEsIDAsIDEsIDAsIDApCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTk1ODIuMDIyNDYwOTM3NSwgNi4yNTE1MjczMDk0MTc3MjUsIDYyMDUuNDc4NTE1NjI1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDIwNzUgb3IgTXlMZXZlbCA8PSAyMDk5IHRoZW4KICAgICAgICAgICAgTW9uID0gIlBlYW51dCBTY291dCIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDEKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIk51dHNJc2xhbmRRdWVzdCIKICAgICAgICAgICAgTmFtZU1vbiA9ICJQZWFudXQgU2NvdXQiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldygtMjEwNC4zOTA4NjkxNDA2LCAzOC4xMDQxNjc5MzgyMzIsIC0xMDE5NC4yMTg3NSwgMCwgMCwgLTEsIDAsIDEsIDAsIDEsIDAsIDApCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTIxNDMuMjQxOTQzMzU5Mzc1LCA0Ny43MjE5ODQ4NjMyODEyNSwgLTEwMDI5Ljk5NTExNzE4NzUpCiAgICAgICAgZWxzZWlmIE15TGV2ZWwgPT0gMjEwMCBvciBNeUxldmVsIDw9IDIxMjQgdGhlbgogICAgICAgICAgICBNb24gPSAiUGVhbnV0IFByZXNpZGVudCIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDIKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIk51dHNJc2xhbmRRdWVzdCIKICAgICAgICAgICAgTmFtZU1vbiA9ICJQZWFudXQgUHJlc2lkZW50IgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoLTIxMDQuMzkwODY5MTQwNiwgMzguMTA0MTY3OTM4MjMyLCAtMTAxOTQuMjE4NzUsIDAsIDAsIC0xLCAwLCAxLCAwLCAxLCAwLCAwKQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0xODU5LjM1NDAwMzkwNjI1LCAzOC4xMDMxNjg0ODc1NDg4MywgLTEwNDIyLjQyOTY4NzUpCiAgICAgICAgZWxzZWlmIE15TGV2ZWwgPT0gMjEyNSBvciBNeUxldmVsIDw9IDIxNDkgdGhlbgogICAgICAgICAgICBNb24gPSAiSWNlIENyZWFtIENoZWYiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAxCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJJY2VDcmVhbUlzbGFuZFF1ZXN0IgogICAgICAgICAgICBOYW1lTW9uID0gIkljZSBDcmVhbSBDaGVmIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoLTgyMC42NDgyNTQzOTQ1MywgNjUuODE5NTI2NjcyMzYzLCAtMTA5NjUuNzk1ODk4NDM4LCAwLCAwLCAtMSwgMCwgMSwgMCwgMSwgMCwgMCkKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtODcyLjI0NjU4MjAzMTI1LCA2NS44MTk1NzI0NDg3MzA0NywgLTEwOTE5Ljk1NzAzMTI1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDIxNTAgb3IgTXlMZXZlbCA8PSAyMTk5IHRoZW4KICAgICAgICAgICAgTW9uID0gIkljZSBDcmVhbSBDb21tYW5kZXIiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAyCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJJY2VDcmVhbUlzbGFuZFF1ZXN0IgogICAgICAgICAgICBOYW1lTW9uID0gIkljZSBDcmVhbSBDb21tYW5kZXIiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldygtODIwLjY0ODI1NDM5NDUzLCA2NS44MTk1MjY2NzIzNjMsIC0xMDk2NS43OTU4OTg0MzgsIDAsIDAsIC0xLCAwLCAxLCAwLCAxLCAwLCAwKQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC01NTguMDYxMDM1MTU2MjUsIDExMi4wNDg5NTc4MjQ3MDcwMywgLTExMjkwLjc3NDQxNDA2MjUpCiAgICAgICAgZWxzZWlmIE15TGV2ZWwgPT0gMjIwMCBvciBNeUxldmVsIDw9IDIyMjQgdGhlbgogICAgICAgICAgICBNb24gPSAiQ29va2llIENyYWZ0ZXIiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAxCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDYWtlUXVlc3QxIgogICAgICAgICAgICBOYW1lTW9uID0gIkNvb2tpZSBDcmFmdGVyIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoLTIwMjEuMzIwMDcsIDM3Ljc5ODIyNTQsIC0xMjAyOC43Mjk1LCAwLjk1NzU3NjkzMSwgLTguODAzMDIwNTNlLTA4LCAwLjI4ODE3NzgxOCwgNi45MzAxMTg3ZS0wOCwgMSwgNy41MTkzMTIxMWUtMDgsIC0wLjI4ODE3NzgxOCwgLTUuMjAzMjEzNWUtMDgsIDAuOTU3NTc2OTMxKQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0yMzc0LjEzNjcxODc1LCAzNy43OTgyNjM1NDk4MDQ2OSwgLTEyMTI1LjMwODU5Mzc1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDIyMjUgb3IgTXlMZXZlbCA8PSAyMjQ5IHRoZW4KICAgICAgICAgICAgTW9uID0gIkNha2UgR3VhcmQiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAyCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDYWtlUXVlc3QxIgogICAgICAgICAgICBOYW1lTW9uID0gIkNha2UgR3VhcmQiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldygtMjAyMS4zMjAwNywgMzcuNzk4MjI1NCwgLTEyMDI4LjcyOTUsIDAuOTU3NTc2OTMxLCAtOC44MDMwMjA1M2UtMDgsIDAuMjg4MTc3ODE4LCA2LjkzMDExODdlLTA4LCAxLCA3LjUxOTMxMjExZS0wOCwgLTAuMjg4MTc3ODE4LCAtNS4yMDMyMTM1ZS0wOCwgMC45NTc1NzY5MzEpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTE1OTguMzA3MDA2ODM1OTM3NSwgNDMuNzczMTk3MTc0MDcyMjY2LCAtMTIyNDQuNTgxMDU0Njg3NSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAyMjUwIG9yIE15TGV2ZWwgPD0gMjI3NCB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJCYWtpbmcgU3RhZmYiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAxCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDYWtlUXVlc3QyIgogICAgICAgICAgICBOYW1lTW9uID0gIkJha2luZyBTdGFmZiIKICAgICAgICAgICAgQ0ZyYW1lUXVlc3QgPSBDRnJhbWUubmV3KC0xOTI3LjkxNjAyLCAzNy43OTgxMzM5LCAtMTI4NDIuNTM5MSwgLTAuOTY4MDQ0NDYsIDQuMjIxNDIxNDNlLTA4LCAwLjI1MDc3ODU4NiwgNC43NDkxMTA2MmUtMDgsIDEsIDEuNDk5MDQ3MTFlLTA4LCAtMC4yNTA3Nzg1ODYsIDIuNjQyMTE5NDFlLTA4LCAtMC45NjgwNDQ0NikKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtMTg4Ny44MDk5MzY1MjM0Mzc1LCA3Ny42MTg1MDczODUyNTM5LCAtMTI5OTguMzUwNTg1OTM3NSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAyMjc1IG9yIE15TGV2ZWwgPD0gMjI5OSB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJIZWFkIEJha2VyIgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMgogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2FrZVF1ZXN0MiIKICAgICAgICAgICAgTmFtZU1vbiA9ICJIZWFkIEJha2VyIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoLTE5MjcuOTE2MDIsIDM3Ljc5ODEzMzksIC0xMjg0Mi41MzkxLCAtMC45NjgwNDQ0NiwgNC4yMjE0MjE0M2UtMDgsIDAuMjUwNzc4NTg2LCA0Ljc0OTExMDYyZS0wOCwgMSwgMS40OTkwNDcxMWUtMDgsIC0wLjI1MDc3ODU4NiwgMi42NDIxMTk0MWUtMDgsIC0wLjk2ODA0NDQ2KQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0yMjE2LjE4ODIzMjQyMTg3NSwgODIuODg0NTIxNDg0Mzc1LCAtMTI4NjkuMjkzOTQ1MzEyNSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAyMzAwIG9yIE15TGV2ZWwgPD0gMjMyNCB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJDb2NvYSBXYXJyaW9yIgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMQogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2hvY1F1ZXN0MSIKICAgICAgICAgICAgTmFtZU1vbiA9ICJDb2NvYSBXYXJyaW9yIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoMjMzLjIyODM2MzAzNzEwOTM4LCAyOS44NzYwMDEzNTgwMzIyMjcsIC0xMjIwMS4yMzMzOTg0Mzc1KQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0yMS41NTMyODM2OTE0MDYyNSwgODAuNTc0OTk2OTQ4MjQyMTksIC0xMjM1Mi4zODc2OTUzMTI1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDIzMjUgb3IgTXlMZXZlbCA8PSAyMzQ5IHRoZW4KICAgICAgICAgICAgTW9uID0gIkNob2NvbGF0ZSBCYXIgQmF0dGxlciIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDIKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNob2NRdWVzdDEiCiAgICAgICAgICAgIE5hbWVNb24gPSAiQ2hvY29sYXRlIEJhciBCYXR0bGVyIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoMjMzLjIyODM2MzAzNzEwOTM4LCAyOS44NzYwMDEzNTgwMzIyMjcsIC0xMjIwMS4yMzMzOTg0Mzc1KQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDU4Mi41OTA1NzYxNzE4NzUsIDc3LjE4ODA5NTA5Mjc3MzQ0LCAtMTI0NjMuMTYyMTA5Mzc1KQogICAgICAgIGVsc2VpZiBNeUxldmVsID09IDIzNTAgb3IgTXlMZXZlbCA8PSAyMzc0IHRoZW4KICAgICAgICAgICAgTW9uID0gIlN3ZWV0IFRoaWVmIgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMQogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2hvY1F1ZXN0MiIKICAgICAgICAgICAgTmFtZU1vbiA9ICJTd2VldCBUaGllZiIKICAgICAgICAgICAgQ0ZyYW1lUXVlc3QgPSBDRnJhbWUubmV3KDE1MC41MDY2Mzc1NzMyNDIyLCAzMC42OTM2OTMxNjEwMTA3NDIsIC0xMjc3NC41MDI5Mjk2ODc1KQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDE2NS4xODg0NzY1NjI1LCA3Ni4wNTg4NTMxNDk0MTQwNiwgLTEyNjAwLjgzNjkxNDA2MjUpCiAgICAgICAgZWxzZWlmIE15TGV2ZWwgPT0gMjM3NSBvciBNeUxldmVsIDw9IDIzOTkgdGhlbgogICAgICAgICAgICBNb24gPSAiQ2FuZHkgUmViZWwiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAyCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDaG9jUXVlc3QyIgogICAgICAgICAgICBOYW1lTW9uID0gIkNhbmR5IFJlYmVsIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoMTUwLjUwNjYzNzU3MzI0MjIsIDMwLjY5MzY5MzE2MTAxMDc0MiwgLTEyNzc0LjUwMjkyOTY4NzUpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMTM0Ljg2NTYzMTEwMzUxNTYyLCA3Ny4yNDc2ODA2NjQwNjI1LCAtMTI4NzYuNTQ3ODUxNTYyNSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAyNDAwIG9yIE15TGV2ZWwgPD0gMjQyNCB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJDYW5keSBQaXJhdGUiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAxCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDYW5keVF1ZXN0MSIKICAgICAgICAgICAgTmFtZU1vbiA9ICJDYW5keSBQaXJhdGUiCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldygtMTE1MC4wNDAwMzkwNjI1LCAyMC4zNzg5MzQ4NjAyMjk0OTIsIC0xNDQ0Ni4zMzQ5NjA5Mzc1KQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0xMzEwLjUwMDM2NjIxMDkzNzUsIDI2LjAxNjUyMzM2MTIwNjA1NSwgLTE0NTYyLjQwNDI5Njg3NSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAyNDI1IG9yIE15TGV2ZWwgPD0gMjQ0OSB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJTbm93IERlbW9uIgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMgogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2FuZHlRdWVzdDEiCiAgICAgICAgICAgIE5hbWVNb24gPSAiU25vdyBEZW1vbiIKICAgICAgICAgICAgQ0ZyYW1lUXVlc3QgPSBDRnJhbWUubmV3KC0xMTUwLjA0MDAzOTA2MjUsIDIwLjM3ODkzNDg2MDIyOTQ5MiwgLTE0NDQ2LjMzNDk2MDkzNzUpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTg4MC4yMDA2MjI1NTg1OTM4LCA3MS4yNDc3NjQ1ODc0MDIzNCwgLTE0NTM4LjYwOTM3NSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAyNDUwIG9yIE15TGV2ZWwgPD0gMjQ3NCB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJJc2xlIE91dGxhdyIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDEKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlRpa2lRdWVzdDEiCiAgICAgICAgICAgIE5hbWVNb24gPSAiSXNsZSBPdXRsYXciCiAgICAgICAgICAgIENGcmFtZVF1ZXN0ID0gQ0ZyYW1lLm5ldygtMTY1NDcuNzQ4MDQ2ODc1LCA2MS4xMzUzMzQwMTQ4OTI1OCwgLTE3My40MTM2MDQ3MzYzMjgxMikKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtMTY0NDIuODE0NDUzMTI1LCAxMTYuMTM4OTk5OTM4OTY0ODQsIC0yNjQuNDYzNzc1NjM0NzY1NikKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAyNDc1IG9yIE15TGV2ZWwgPD0gMjQ5OSB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJJc2xhbmQgQm95IgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMgogICAgICAgICAgICBOYW1lUXVlc3QgPSAiVGlraVF1ZXN0MSIKICAgICAgICAgICAgTmFtZU1vbiA9ICJJc2xhbmQgQm95IgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoLTE2NTQ3Ljc0ODA0Njg3NSwgNjEuMTM1MzM0MDE0ODkyNTgsIC0xNzMuNDEzNjA0NzM2MzI4MTIpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTE2OTAxLjI2MTcxODc1LCA4NC4wNjc1NjU5MTc5Njg3NSwgLTE5Mi44ODkwNjg2MDM1MTU2MikKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAyNTAwIG9yIE15TGV2ZWwgPD0gMjUyNCB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJTdW4ta2lzc2VkIFdhcnJpb3IiCiAgICAgICAgICAgIExldmVsUXVlc3QgPSAxCiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJUaWtpUXVlc3QyIgogICAgICAgICAgICBOYW1lTW9uID0gImtpc3NlZCIKICAgICAgICAgICAgQ0ZyYW1lUXVlc3QgPSBDRnJhbWUubmV3KC0xNjUzOS4wNzgxMjUsIDU1LjY4NjMyODg4NzkzOTQ1LCAxMDUxLjU3Mzg1MjUzOTA2MjUpCiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLTE2MzQ5Ljg3NzkyOTY4NzUsIDkyLjA4MDgzMzQzNTA1ODYsIDExMjMuNDE2OTkyMTg3NSkKICAgICAgICBlbHNlaWYgTXlMZXZlbCA9PSAyNTI1IG9yIE15TGV2ZWwgPD0gMjU1MCB0aGVuCiAgICAgICAgICAgIE1vbiA9ICJJc2xlIENoYW1waW9uIgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMgogICAgICAgICAgICBOYW1lUXVlc3QgPSAiVGlraVF1ZXN0MiIKICAgICAgICAgICAgTmFtZU1vbiA9ICJJc2xlIENoYW1waW9uIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoLTE2NTM5LjA3ODEyNSwgNTUuNjg2MzI4ODg3OTM5NDUsIDEwNTEuNTczODUyNTM5MDYyNSkKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtMTYzNDcuNDE1MDM5MDYyNSwgOTIuMDk1MDM5MzY3Njc1NzgsIDExMjIuMzM1MjA1MDc4MTI1KQogICAgICAgICAgIGVsc2VpZiBNeUxldmVsID09IDI1NTAgb3IgTXlMZXZlbCA8PSAyNTc0IHRoZW4KICAgICAgICAgICAgTW9uID0gIlNlcnBlbnQgSHVudGVyIgogICAgICAgICAgICBMZXZlbFF1ZXN0ID0gMQogICAgICAgICAgICBOYW1lUXVlc3QgPSAiVGlraVF1ZXN0MyIKICAgICAgICAgICAgTmFtZU1vbiA9ICJTZXJwZW50IEh1bnRlciIKICAgICAgICAgICAgQ0ZyYW1lUXVlc3QgPSBDRnJhbWUubmV3KC0xNjY2NS4xOTE0LCAxMDQuNTk2NDA1LCAxNTc5LjY5NDM0LCAwLjk1MTA2ODQwMSwgLTAsIC0wLjMwODk4MDQ2NSwgMCwgMSwgLTAsIDAuMzA4OTgwNDY1LCAwLCAwLjk1MTA2ODQwMSkKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtMTY2NTQuNzc1NCwgMTA1LjI4NjIzMiwgMTU3OS42NzQ0NCwgMC45OTkwOTY3NTEsIDQuNDU5MzQ0ODllLTA4LCAwLjA0MjQ5Mjg4MTQsIC00LjM4ODIyNjY3ZS0wOCwgMSwgLTEuNzY2OTI4NDdlLTA4LCAtMC4wNDI0OTI4ODE0LCAxLjU3ODg2NDE1ZS0wOCwgMC45OTkwOTY3NTEpCiAgICAgICAgICAgIGVsc2VpZiBNeUxldmVsID09IDI1NzUgb3IgTXlMZXZlbCA8PSAyNjAwIHRoZW4KICAgICAgICAgICAgTW9uID0gIlNrdWxsIFNsYXllciIKICAgICAgICAgICAgTGV2ZWxRdWVzdCA9IDIKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlRpa2lRdWVzdDMiCiAgICAgICAgICAgIE5hbWVNb24gPSAiU2t1bGwgU2xheWVyIgogICAgICAgICAgICBDRnJhbWVRdWVzdCA9IENGcmFtZS5uZXcoLTE2NjY1LjE5MTQsIDEwNC41OTY0MDUsIDE1NzkuNjk0MzQsIDAuOTUxMDY4NDAxLCAtMCwgLTAuMzA4OTgwNDY1LCAwLCAxLCAtMCwgMC4zMDg5ODA0NjUsIDAsIDAuOTUxMDY4NDAxKQogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0xNjY1NC43NzU0LCAxMDUuMjg2MjMyLCAxNTc5LjY3NDQ0LCAwLjk5OTA5Njc1MSwgNC40NTkzNDQ4OWUtMDgsIDAuMDQyNDkyODgxNCwgLTQuMzg4MjI2NjdlLTA4LCAxLCAtMS43NjY5Mjg0N2UtMDgsIC0wLjA0MjQ5Mjg4MTQsIDEuNTc4ODY0MTVlLTA4LCAwLjk5OTA5Njc1MSkKICAgICAgICBlbmQKICAgIGVuZAplbmQKCmZ1bmN0aW9uIEhvcCgpCiAgICBsb2NhbCBQbGFjZUlEID0gZ2FtZS5QbGFjZUlkCiAgICBsb2NhbCBBbGxJRHMgPSB7fQogICAgbG9jYWwgZm91bmRBbnl0aGluZyA9ICIiCiAgICBsb2NhbCBhY3R1YWxIb3VyID0gb3MuZGF0ZSgiISp0IikuaG91cgogICAgbG9jYWwgRGVsZXRlZCA9IGZhbHNlCiAgICBmdW5jdGlvbiBUUFJldHVybmVyKCkKICAgICAgICBsb2NhbCBTaXRlOwogICAgICAgIGlmIGZvdW5kQW55dGhpbmcgPT0gIiIgdGhlbgogICAgICAgICAgICBTaXRlID0gZ2FtZS5IdHRwU2VydmljZTpKU09ORGVjb2RlKGdhbWU6SHR0cEdldCgnaHR0cHM6Ly9nYW1lcy5yb2Jsb3guY29tL3YxL2dhbWVzLycgLi4gUGxhY2VJRCAuLiAnL3NlcnZlcnMvUHVibGljP3NvcnRPcmRlcj1Bc2MmbGltaXQ9MTAwJykpCiAgICAgICAgZWxzZQogICAgICAgICAgICBTaXRlID0gZ2FtZS5IdHRwU2VydmljZTpKU09ORGVjb2RlKGdhbWU6SHR0cEdldCgnaHR0cHM6Ly9nYW1lcy5yb2Jsb3guY29tL3YxL2dhbWVzLycgLi4gUGxhY2VJRCAuLiAnL3NlcnZlcnMvUHVibGljP3NvcnRPcmRlcj1Bc2MmbGltaXQ9MTAwJmN1cnNvcj0nIC4uIGZvdW5kQW55dGhpbmcpKQogICAgICAgIGVuZAogICAgICAgIGxvY2FsIElEID0gIiIKICAgICAgICBpZiBTaXRlLm5leHRQYWdlQ3Vyc29yIGFuZCBTaXRlLm5leHRQYWdlQ3Vyc29yIH49ICJudWxsIiBhbmQgU2l0ZS5uZXh0UGFnZUN1cnNvciB+PSBuaWwgdGhlbgogICAgICAgICAgICBmb3VuZEFueXRoaW5nID0gU2l0ZS5uZXh0UGFnZUN1cnNvcgogICAgICAgIGVuZAogICAgICAgIGxvY2FsIG51bSA9IDA7CiAgICAgICAgZm9yIGksdiBpbiBwYWlycyhTaXRlLmRhdGEpIGRvCiAgICAgICAgICAgIGxvY2FsIFBvc3NpYmxlID0gdHJ1ZQogICAgICAgICAgICBJRCA9IHRvc3RyaW5nKHYuaWQpCiAgICAgICAgICAgIGlmIHRvbnVtYmVyKHYubWF4UGxheWVycykgPiB0b251bWJlcih2LnBsYXlpbmcpIHRoZW4KICAgICAgICAgICAgICAgIGZvciBfLEV4aXN0aW5nIGluIHBhaXJzKEFsbElEcykgZG8KICAgICAgICAgICAgICAgICAgICBpZiBudW0gfj0gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIElEID09IHRvc3RyaW5nKEV4aXN0aW5nKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3NzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgaWYgdG9udW1iZXIoYWN0dWFsSG91cikgfj0gdG9udW1iZXIoRXhpc3RpbmcpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGRlbEZpbGUgPSBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsSURzID0ge30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoQWxsSURzLCBhY3R1YWxIb3VyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBudW0gPSBudW0gKyAxCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGlmIFBvc3NpYmxlID09IHRydWUgdGhlbgogICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChBbGxJRHMsIElEKQogICAgICAgICAgICAgICAgICAgIHdhaXQoKQogICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVGVsZXBvcnRTZXJ2aWNlIik6VGVsZXBvcnRUb1BsYWNlSW5zdGFuY2UoUGxhY2VJRCwgSUQsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcikKICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAgICAgd2FpdCg0KQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBmdW5jdGlvbiBUZWxlcG9ydCgpIAogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBUUFJldHVybmVyKCkKICAgICAgICAgICAgICAgIGlmIGZvdW5kQW55dGhpbmcgfj0gIiIgdGhlbgogICAgICAgICAgICAgICAgICAgIFRQUmV0dXJuZXIoKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgIGVuZAogICAgVGVsZXBvcnQoKQplbmQgICAgICAgCgpmdW5jdGlvbiBVcGRhdGVJc2xhbmRFU1AoKSAKICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsiX1dvcmxkT3JpZ2luIl0uTG9jYXRpb25zOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBJc2xhbmRFU1AgdGhlbiAKICAgICAgICAgICAgICAgIGlmIHYuTmFtZSB+PSAiU2VhIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY6RmluZEZpcnN0Q2hpbGQoJ05hbWVFc3AnKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGJpbGwgPSBJbnN0YW5jZS5uZXcoJ0JpbGxib2FyZEd1aScsdikKICAgICAgICAgICAgICAgICAgICAgICAgYmlsbC5OYW1lID0gJ05hbWVFc3AnCiAgICAgICAgICAgICAgICAgICAgICAgIGJpbGwuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIGJpbGwuU2l6ZSA9IFVEaW0yLm5ldygxLDIwMCwxLDMwKQogICAgICAgICAgICAgICAgICAgICAgICBiaWxsLkFkb3JuZWUgPSB2CiAgICAgICAgICAgICAgICAgICAgICAgIGJpbGwuQWx3YXlzT25Ub3AgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIG5hbWUgPSBJbnN0YW5jZS5uZXcoJ1RleHRMYWJlbCcsYmlsbCkKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZS5Gb250ID0gIkdvdGhhbUJvbGQiCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuRm9udFNpemUgPSAiU2l6ZTE0IgogICAgICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRXcmFwcGVkID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lLlNpemUgPSBVRGltMi5uZXcoMSwwLDEsMCkKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZS5UZXh0WUFsaWdubWVudCA9ICdUb3AnCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDcsIDIzNiwgMjQwKQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdlsnTmFtZUVzcCddLlRleHRMYWJlbC5UZXh0ID0gKHYuTmFtZSAuLicgICBcbicuLiByb3VuZCgoZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2LlBvc2l0aW9uKS5NYWduaXR1ZGUvMykgLi4nIERpc3RhbmNlJykKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJykgdGhlbgogICAgICAgICAgICAgICAgICAgIHY6RmluZEZpcnN0Q2hpbGQoJ05hbWVFc3AnKTpEZXN0cm95KCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbmQKZW5kCgpmdW5jdGlvbiBpc25pbCh0aGluZykKcmV0dXJuICh0aGluZyA9PSBuaWwpCmVuZApsb2NhbCBmdW5jdGlvbiByb3VuZChuKQpyZXR1cm4gbWF0aC5mbG9vcih0b251bWJlcihuKSArIDAuNSkKZW5kCk51bWJlciA9IG1hdGgucmFuZG9tKDEsIDEwMDAwMDApCmZ1bmN0aW9uIFVwZGF0ZVBsYXllckNoYW1zKCkKZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UnUGxheWVycyc6R2V0Q2hpbGRyZW4oKSkgZG8KICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICBpZiBub3QgaXNuaWwodi5DaGFyYWN0ZXIpIHRoZW4KICAgICAgICAgICAgaWYgRVNQUGxheWVyIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCBpc25pbCh2LkNoYXJhY3Rlci5IZWFkKSBhbmQgbm90IHYuQ2hhcmFjdGVyLkhlYWQ6RmluZEZpcnN0Q2hpbGQoJ05hbWVFc3AnLi5OdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCBiaWxsID0gSW5zdGFuY2UubmV3KCdCaWxsYm9hcmRHdWknLHYuQ2hhcmFjdGVyLkhlYWQpCiAgICAgICAgICAgICAgICAgICAgYmlsbC5OYW1lID0gJ05hbWVFc3AnLi5OdW1iZXIKICAgICAgICAgICAgICAgICAgICBiaWxsLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKQogICAgICAgICAgICAgICAgICAgIGJpbGwuU2l6ZSA9IFVEaW0yLm5ldygxLDIwMCwxLDMwKQogICAgICAgICAgICAgICAgICAgIGJpbGwuQWRvcm5lZSA9IHYuQ2hhcmFjdGVyLkhlYWQKICAgICAgICAgICAgICAgICAgICBiaWxsLkFsd2F5c09uVG9wID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIGxvY2FsIG5hbWUgPSBJbnN0YW5jZS5uZXcoJ1RleHRMYWJlbCcsYmlsbCkKICAgICAgICAgICAgICAgICAgICBuYW1lLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQKICAgICAgICAgICAgICAgICAgICBuYW1lLkZvbnRTaXplID0gIlNpemUxNCIKICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRXcmFwcGVkID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dCA9ICh2Lk5hbWUgLi4nIFxuJy4uIHJvdW5kKChnYW1lOkdldFNlcnZpY2UoJ1BsYXllcnMnKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHYuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24pLk1hZ25pdHVkZS8zKSAuLicgRGlzdGFuY2UnKQogICAgICAgICAgICAgICAgICAgIG5hbWUuU2l6ZSA9IFVEaW0yLm5ldygxLDAsMSwwKQogICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dFlBbGlnbm1lbnQgPSAnVG9wJwogICAgICAgICAgICAgICAgICAgIG5hbWUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjUKICAgICAgICAgICAgICAgICAgICBpZiB2LlRlYW0gPT0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlRlYW0gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDAsMjU1LDApCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDI1NSwwLDApCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdi5DaGFyYWN0ZXIuSGVhZFsnTmFtZUVzcCcuLk51bWJlcl0uVGV4dExhYmVsLlRleHQgPSAodi5OYW1lIC4uJyB8ICcuLiByb3VuZCgoZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2LkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uKS5NYWduaXR1ZGUvMykgLi4nIERpc3RhbmNlXG5IZWFsdGggOiAnIC4uIHJvdW5kKHYuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCoxMDAvdi5DaGFyYWN0ZXIuSHVtYW5vaWQuTWF4SGVhbHRoKSAuLiAnJScpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgaWYgdi5DaGFyYWN0ZXIuSGVhZDpGaW5kRmlyc3RDaGlsZCgnTmFtZUVzcCcuLk51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIHYuQ2hhcmFjdGVyLkhlYWQ6RmluZEZpcnN0Q2hpbGQoJ05hbWVFc3AnLi5OdW1iZXIpOkRlc3Ryb3koKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKQplbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZUNoZXN0Q2hhbXMoKSAKZm9yIGksdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZTpHZXRDaGlsZHJlbigpKSBkbwogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIGlmIHN0cmluZy5maW5kKHYuTmFtZSwiQ2hlc3QiKSB0aGVuCiAgICAgICAgICAgIGlmIENoZXN0RVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHYuTmFtZSwiQ2hlc3QiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY6RmluZEZpcnN0Q2hpbGQoJ05hbWVFc3AnLi5OdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgYmlsbCA9IEluc3RhbmNlLm5ldygnQmlsbGJvYXJkR3VpJyx2KQogICAgICAgICAgICAgICAgICAgICAgICBiaWxsLk5hbWUgPSAnTmFtZUVzcCcuLk51bWJlcgogICAgICAgICAgICAgICAgICAgICAgICBiaWxsLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKQogICAgICAgICAgICAgICAgICAgICAgICBiaWxsLlNpemUgPSBVRGltMi5uZXcoMSwyMDAsMSwzMCkKICAgICAgICAgICAgICAgICAgICAgICAgYmlsbC5BZG9ybmVlID0gdgogICAgICAgICAgICAgICAgICAgICAgICBiaWxsLkFsd2F5c09uVG9wID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBuYW1lID0gSW5zdGFuY2UubmV3KCdUZXh0TGFiZWwnLGJpbGwpCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lLkZvbnRTaXplID0gIlNpemUxNCIKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZS5UZXh0V3JhcHBlZCA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZS5TaXplID0gVURpbTIubmV3KDEsMCwxLDApCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dFlBbGlnbm1lbnQgPSAnVG9wJwogICAgICAgICAgICAgICAgICAgICAgICBuYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIkNoZXN0MSIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTA5LCAxMDksIDEwOSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dCA9ICgiQ2hlc3QgMSIgLi4nIFxuJy4uIHJvdW5kKChnYW1lOkdldFNlcnZpY2UoJ1BsYXllcnMnKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHYuUG9zaXRpb24pLk1hZ25pdHVkZS8zKSAuLicgRGlzdGFuY2UnKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJDaGVzdDIiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE3MywgMTU4LCAyMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dCA9ICgiQ2hlc3QgMiIgLi4nIFxuJy4uIHJvdW5kKChnYW1lOkdldFNlcnZpY2UoJ1BsYXllcnMnKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHYuUG9zaXRpb24pLk1hZ25pdHVkZS8zKSAuLicgRGlzdGFuY2UnKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJDaGVzdDMiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDg1LCAyNTUsIDI1NSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dCA9ICgiQ2hlc3QgMyIgLi4nIFxuJy4uIHJvdW5kKChnYW1lOkdldFNlcnZpY2UoJ1BsYXllcnMnKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHYuUG9zaXRpb24pLk1hZ25pdHVkZS8zKSAuLicgRGlzdGFuY2UnKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHZbJ05hbWVFc3AnLi5OdW1iZXJdLlRleHRMYWJlbC5UZXh0ID0gKHYuTmFtZSAuLicgICBcbicuLiByb3VuZCgoZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2LlBvc2l0aW9uKS5NYWduaXR1ZGUvMykgLi4nIERpc3RhbmNlJykKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJy4uTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjpGaW5kRmlyc3RDaGlsZCgnTmFtZUVzcCcuLk51bWJlcik6RGVzdHJveSgpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZAplbmQKZnVuY3Rpb24gVXBkYXRlRGV2aWxDaGFtcygpIApmb3IgaSx2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgaWYgRGV2aWxGcnVpdEVTUCB0aGVuCiAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHYuTmFtZSwgIkZydWl0IikgdGhlbiAgIAogICAgICAgICAgICAgICAgaWYgbm90IHYuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJy4uTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgYmlsbCA9IEluc3RhbmNlLm5ldygnQmlsbGJvYXJkR3VpJyx2LkhhbmRsZSkKICAgICAgICAgICAgICAgICAgICBiaWxsLk5hbWUgPSAnTmFtZUVzcCcuLk51bWJlcgogICAgICAgICAgICAgICAgICAgIGJpbGwuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApCiAgICAgICAgICAgICAgICAgICAgYmlsbC5TaXplID0gVURpbTIubmV3KDEsMjAwLDEsMzApCiAgICAgICAgICAgICAgICAgICAgYmlsbC5BZG9ybmVlID0gdi5IYW5kbGUKICAgICAgICAgICAgICAgICAgICBiaWxsLkFsd2F5c09uVG9wID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIGxvY2FsIG5hbWUgPSBJbnN0YW5jZS5uZXcoJ1RleHRMYWJlbCcsYmlsbCkKICAgICAgICAgICAgICAgICAgICBuYW1lLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQKICAgICAgICAgICAgICAgICAgICBuYW1lLkZvbnRTaXplID0gIlNpemUxNCIKICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRXcmFwcGVkID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIG5hbWUuU2l6ZSA9IFVEaW0yLm5ldygxLDAsMSwwKQogICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dFlBbGlnbm1lbnQgPSAnVG9wJwogICAgICAgICAgICAgICAgICAgIG5hbWUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjUKICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dCA9ICh2Lk5hbWUgLi4nIFxuJy4uIHJvdW5kKChnYW1lOkdldFNlcnZpY2UoJ1BsYXllcnMnKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHYuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUvMykgLi4nIERpc3RhbmNlJykKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2LkhhbmRsZVsnTmFtZUVzcCcuLk51bWJlcl0uVGV4dExhYmVsLlRleHQgPSAodi5OYW1lIC4uJyAgIFxuJy4uIHJvdW5kKChnYW1lOkdldFNlcnZpY2UoJ1BsYXllcnMnKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHYuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUvMykgLi4nIERpc3RhbmNlJykKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlCiAgICAgICAgICAgIGlmIHYuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJy4uTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgnTmFtZUVzcCcuLk51bWJlcik6RGVzdHJveSgpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKQplbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZUZsb3dlckNoYW1zKCkgCmZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8KICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICBpZiB2Lk5hbWUgPT0gIkZsb3dlcjIiIG9yIHYuTmFtZSA9PSAiRmxvd2VyMSIgdGhlbgogICAgICAgICAgICBpZiBGbG93ZXJFU1AgdGhlbiAKICAgICAgICAgICAgICAgIGlmIG5vdCB2OkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJy4uTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgYmlsbCA9IEluc3RhbmNlLm5ldygnQmlsbGJvYXJkR3VpJyx2KQogICAgICAgICAgICAgICAgICAgIGJpbGwuTmFtZSA9ICdOYW1lRXNwJy4uTnVtYmVyCiAgICAgICAgICAgICAgICAgICAgYmlsbC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCkKICAgICAgICAgICAgICAgICAgICBiaWxsLlNpemUgPSBVRGltMi5uZXcoMSwyMDAsMSwzMCkKICAgICAgICAgICAgICAgICAgICBiaWxsLkFkb3JuZWUgPSB2CiAgICAgICAgICAgICAgICAgICAgYmlsbC5BbHdheXNPblRvcCA9IHRydWUKICAgICAgICAgICAgICAgICAgICBsb2NhbCBuYW1lID0gSW5zdGFuY2UubmV3KCdUZXh0TGFiZWwnLGJpbGwpCiAgICAgICAgICAgICAgICAgICAgbmFtZS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkCiAgICAgICAgICAgICAgICAgICAgbmFtZS5Gb250U2l6ZSA9ICJTaXplMTQiCiAgICAgICAgICAgICAgICAgICAgbmFtZS5UZXh0V3JhcHBlZCA9IHRydWUKICAgICAgICAgICAgICAgICAgICBuYW1lLlNpemUgPSBVRGltMi5uZXcoMSwwLDEsMCkKICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRZQWxpZ25tZW50ID0gJ1RvcCcKICAgICAgICAgICAgICAgICAgICBuYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgICAgICAgbmFtZS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41CiAgICAgICAgICAgICAgICAgICAgbmFtZS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKQogICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiRmxvd2VyMSIgdGhlbiAKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZS5UZXh0ID0gKCJCbHVlIEZsb3dlciIgLi4nIFxuJy4uIHJvdW5kKChnYW1lOkdldFNlcnZpY2UoJ1BsYXllcnMnKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHYuUG9zaXRpb24pLk1hZ25pdHVkZS8zKSAuLicgRGlzdGFuY2UnKQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAyNTUpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJGbG93ZXIyIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dCA9ICgiUmVkIEZsb3dlciIgLi4nIFxuJy4uIHJvdW5kKChnYW1lOkdldFNlcnZpY2UoJ1BsYXllcnMnKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHYuUG9zaXRpb24pLk1hZ25pdHVkZS8zKSAuLicgRGlzdGFuY2UnKQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdlsnTmFtZUVzcCcuLk51bWJlcl0uVGV4dExhYmVsLlRleHQgPSAodi5OYW1lIC4uJyAgIFxuJy4uIHJvdW5kKChnYW1lOkdldFNlcnZpY2UoJ1BsYXllcnMnKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHYuUG9zaXRpb24pLk1hZ25pdHVkZS8zKSAuLicgRGlzdGFuY2UnKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoJ05hbWVFc3AnLi5OdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIHY6RmluZEZpcnN0Q2hpbGQoJ05hbWVFc3AnLi5OdW1iZXIpOkRlc3Ryb3koKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCAgIAogICAgZW5kKQplbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZVJlYWxGcnVpdENoYW1zKCkgCmZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuQXBwbGVTcGF3bmVyOkdldENoaWxkcmVuKCkpIGRvCiAgICBpZiB2OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICBpZiBSZWFsRnJ1aXRFU1AgdGhlbiAKICAgICAgICAgICAgaWYgbm90IHYuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJy4uTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCBiaWxsID0gSW5zdGFuY2UubmV3KCdCaWxsYm9hcmRHdWknLHYuSGFuZGxlKQogICAgICAgICAgICAgICAgYmlsbC5OYW1lID0gJ05hbWVFc3AnLi5OdW1iZXIKICAgICAgICAgICAgICAgIGJpbGwuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApCiAgICAgICAgICAgICAgICBiaWxsLlNpemUgPSBVRGltMi5uZXcoMSwyMDAsMSwzMCkKICAgICAgICAgICAgICAgIGJpbGwuQWRvcm5lZSA9IHYuSGFuZGxlCiAgICAgICAgICAgICAgICBiaWxsLkFsd2F5c09uVG9wID0gdHJ1ZQogICAgICAgICAgICAgICAgbG9jYWwgbmFtZSA9IEluc3RhbmNlLm5ldygnVGV4dExhYmVsJyxiaWxsKQogICAgICAgICAgICAgICAgbmFtZS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkCiAgICAgICAgICAgICAgICBuYW1lLkZvbnRTaXplID0gIlNpemUxNCIKICAgICAgICAgICAgICAgIG5hbWUuVGV4dFdyYXBwZWQgPSB0cnVlCiAgICAgICAgICAgICAgICBuYW1lLlNpemUgPSBVRGltMi5uZXcoMSwwLDEsMCkKICAgICAgICAgICAgICAgIG5hbWUuVGV4dFlBbGlnbm1lbnQgPSAnVG9wJwogICAgICAgICAgICAgICAgbmFtZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICAgICAgbmFtZS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41CiAgICAgICAgICAgICAgICBuYW1lLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApCiAgICAgICAgICAgICAgICBuYW1lLlRleHQgPSAodi5OYW1lIC4uJyBcbicuLiByb3VuZCgoZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlLzMpIC4uJyBEaXN0YW5jZScpCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHYuSGFuZGxlWydOYW1lRXNwJy4uTnVtYmVyXS5UZXh0TGFiZWwuVGV4dCA9ICh2Lk5hbWUgLi4nICcuLiByb3VuZCgoZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlLzMpIC4uJyBEaXN0YW5jZScpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2UKICAgICAgICAgICAgaWYgdi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoJ05hbWVFc3AnLi5OdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIHYuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJy4uTnVtYmVyKTpEZXN0cm95KCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kIAogICAgZW5kCmVuZApmb3IgaSx2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLlBpbmVhcHBsZVNwYXduZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgIGlmIHY6SXNBKCJUb29sIikgdGhlbgogICAgICAgIGlmIFJlYWxGcnVpdEVTUCB0aGVuIAogICAgICAgICAgICBpZiBub3Qgdi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoJ05hbWVFc3AnLi5OdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIGJpbGwgPSBJbnN0YW5jZS5uZXcoJ0JpbGxib2FyZEd1aScsdi5IYW5kbGUpCiAgICAgICAgICAgICAgICBiaWxsLk5hbWUgPSAnTmFtZUVzcCcuLk51bWJlcgogICAgICAgICAgICAgICAgYmlsbC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCkKICAgICAgICAgICAgICAgIGJpbGwuU2l6ZSA9IFVEaW0yLm5ldygxLDIwMCwxLDMwKQogICAgICAgICAgICAgICAgYmlsbC5BZG9ybmVlID0gdi5IYW5kbGUKICAgICAgICAgICAgICAgIGJpbGwuQWx3YXlzT25Ub3AgPSB0cnVlCiAgICAgICAgICAgICAgICBsb2NhbCBuYW1lID0gSW5zdGFuY2UubmV3KCdUZXh0TGFiZWwnLGJpbGwpCiAgICAgICAgICAgICAgICBuYW1lLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQKICAgICAgICAgICAgICAgIG5hbWUuRm9udFNpemUgPSAiU2l6ZTE0IgogICAgICAgICAgICAgICAgbmFtZS5UZXh0V3JhcHBlZCA9IHRydWUKICAgICAgICAgICAgICAgIG5hbWUuU2l6ZSA9IFVEaW0yLm5ldygxLDAsMSwwKQogICAgICAgICAgICAgICAgbmFtZS5UZXh0WUFsaWdubWVudCA9ICdUb3AnCiAgICAgICAgICAgICAgICBuYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgICBuYW1lLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjUKICAgICAgICAgICAgICAgIG5hbWUuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMTc0LCAwKQogICAgICAgICAgICAgICAgbmFtZS5UZXh0ID0gKHYuTmFtZSAuLicgXG4nLi4gcm91bmQoKGdhbWU6R2V0U2VydmljZSgnUGxheWVycycpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdi5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZS8zKSAuLicgRGlzdGFuY2UnKQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB2LkhhbmRsZVsnTmFtZUVzcCcuLk51bWJlcl0uVGV4dExhYmVsLlRleHQgPSAodi5OYW1lIC4uJyAnLi4gcm91bmQoKGdhbWU6R2V0U2VydmljZSgnUGxheWVycycpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdi5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZS8zKSAuLicgRGlzdGFuY2UnKQogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlCiAgICAgICAgICAgIGlmIHYuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJy4uTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgnTmFtZUVzcCcuLk51bWJlcik6RGVzdHJveSgpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCAKICAgIGVuZAplbmQKZm9yIGksdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5CYW5hbmFTcGF3bmVyOkdldENoaWxkcmVuKCkpIGRvCiAgICBpZiB2OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICBpZiBSZWFsRnJ1aXRFU1AgdGhlbiAKICAgICAgICAgICAgaWYgbm90IHYuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJy4uTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCBiaWxsID0gSW5zdGFuY2UubmV3KCdCaWxsYm9hcmRHdWknLHYuSGFuZGxlKQogICAgICAgICAgICAgICAgYmlsbC5OYW1lID0gJ05hbWVFc3AnLi5OdW1iZXIKICAgICAgICAgICAgICAgIGJpbGwuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApCiAgICAgICAgICAgICAgICBiaWxsLlNpemUgPSBVRGltMi5uZXcoMSwyMDAsMSwzMCkKICAgICAgICAgICAgICAgIGJpbGwuQWRvcm5lZSA9IHYuSGFuZGxlCiAgICAgICAgICAgICAgICBiaWxsLkFsd2F5c09uVG9wID0gdHJ1ZQogICAgICAgICAgICAgICAgbG9jYWwgbmFtZSA9IEluc3RhbmNlLm5ldygnVGV4dExhYmVsJyxiaWxsKQogICAgICAgICAgICAgICAgbmFtZS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkCiAgICAgICAgICAgICAgICBuYW1lLkZvbnRTaXplID0gIlNpemUxNCIKICAgICAgICAgICAgICAgIG5hbWUuVGV4dFdyYXBwZWQgPSB0cnVlCiAgICAgICAgICAgICAgICBuYW1lLlNpemUgPSBVRGltMi5uZXcoMSwwLDEsMCkKICAgICAgICAgICAgICAgIG5hbWUuVGV4dFlBbGlnbm1lbnQgPSAnVG9wJwogICAgICAgICAgICAgICAgbmFtZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICAgICAgbmFtZS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41CiAgICAgICAgICAgICAgICBuYW1lLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTEsIDI1NSwgMCkKICAgICAgICAgICAgICAgIG5hbWUuVGV4dCA9ICh2Lk5hbWUgLi4nIFxuJy4uIHJvdW5kKChnYW1lOkdldFNlcnZpY2UoJ1BsYXllcnMnKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHYuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUvMykgLi4nIERpc3RhbmNlJykKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgdi5IYW5kbGVbJ05hbWVFc3AnLi5OdW1iZXJdLlRleHRMYWJlbC5UZXh0ID0gKHYuTmFtZSAuLicgJy4uIHJvdW5kKChnYW1lOkdldFNlcnZpY2UoJ1BsYXllcnMnKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHYuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUvMykgLi4nIERpc3RhbmNlJykKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZQogICAgICAgICAgICBpZiB2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgnTmFtZUVzcCcuLk51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoJ05hbWVFc3AnLi5OdW1iZXIpOkRlc3Ryb3koKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQgCiAgICBlbmQKZW5kCmVuZAoKZnVuY3Rpb24gVXBkYXRlSXNsYW5kRVNQKCkgCiAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbIl9Xb3JsZE9yaWdpbiJdLkxvY2F0aW9uczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgSXNsYW5kRVNQIHRoZW4gCiAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgfj0gIlNlYSIgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2OkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJykgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBiaWxsID0gSW5zdGFuY2UubmV3KCdCaWxsYm9hcmRHdWknLHYpCiAgICAgICAgICAgICAgICAgICAgICAgIGJpbGwuTmFtZSA9ICdOYW1lRXNwJwogICAgICAgICAgICAgICAgICAgICAgICBiaWxsLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKQogICAgICAgICAgICAgICAgICAgICAgICBiaWxsLlNpemUgPSBVRGltMi5uZXcoMSwyMDAsMSwzMCkKICAgICAgICAgICAgICAgICAgICAgICAgYmlsbC5BZG9ybmVlID0gdgogICAgICAgICAgICAgICAgICAgICAgICBiaWxsLkFsd2F5c09uVG9wID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBuYW1lID0gSW5zdGFuY2UubmV3KCdUZXh0TGFiZWwnLGJpbGwpCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuRm9udCA9ICJHb3RoYW1Cb2xkIgogICAgICAgICAgICAgICAgICAgICAgICBuYW1lLkZvbnRTaXplID0gIlNpemUxNCIKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZS5UZXh0V3JhcHBlZCA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZS5TaXplID0gVURpbTIubmV3KDEsMCwxLDApCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dFlBbGlnbm1lbnQgPSAnVG9wJwogICAgICAgICAgICAgICAgICAgICAgICBuYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig3LCAyMzYsIDI0MCkKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHZbJ05hbWVFc3AnXS5UZXh0TGFiZWwuVGV4dCA9ICh2Lk5hbWUgLi4nICAgXG4nLi4gcm91bmQoKGdhbWU6R2V0U2VydmljZSgnUGxheWVycycpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdi5Qb3NpdGlvbikuTWFnbml0dWRlLzMpIC4uJyBEaXN0YW5jZScpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgnTmFtZUVzcCcpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2OkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJyk6RGVzdHJveSgpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kCmVuZAoKZnVuY3Rpb24gaXNuaWwodGhpbmcpCnJldHVybiAodGhpbmcgPT0gbmlsKQplbmQKbG9jYWwgZnVuY3Rpb24gcm91bmQobikKcmV0dXJuIG1hdGguZmxvb3IodG9udW1iZXIobikgKyAwLjUpCmVuZApOdW1iZXIgPSBtYXRoLnJhbmRvbSgxLCAxMDAwMDAwKQpmdW5jdGlvbiBVcGRhdGVQbGF5ZXJDaGFtcygpCmZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlJ1BsYXllcnMnOkdldENoaWxkcmVuKCkpIGRvCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgaWYgbm90IGlzbmlsKHYuQ2hhcmFjdGVyKSB0aGVuCiAgICAgICAgICAgIGlmIEVTUFBsYXllciB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgaXNuaWwodi5DaGFyYWN0ZXIuSGVhZCkgYW5kIG5vdCB2LkNoYXJhY3Rlci5IZWFkOkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJy4uTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgYmlsbCA9IEluc3RhbmNlLm5ldygnQmlsbGJvYXJkR3VpJyx2LkNoYXJhY3Rlci5IZWFkKQogICAgICAgICAgICAgICAgICAgIGJpbGwuTmFtZSA9ICdOYW1lRXNwJy4uTnVtYmVyCiAgICAgICAgICAgICAgICAgICAgYmlsbC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCkKICAgICAgICAgICAgICAgICAgICBiaWxsLlNpemUgPSBVRGltMi5uZXcoMSwyMDAsMSwzMCkKICAgICAgICAgICAgICAgICAgICBiaWxsLkFkb3JuZWUgPSB2LkNoYXJhY3Rlci5IZWFkCiAgICAgICAgICAgICAgICAgICAgYmlsbC5BbHdheXNPblRvcCA9IHRydWUKICAgICAgICAgICAgICAgICAgICBsb2NhbCBuYW1lID0gSW5zdGFuY2UubmV3KCdUZXh0TGFiZWwnLGJpbGwpCiAgICAgICAgICAgICAgICAgICAgbmFtZS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkCiAgICAgICAgICAgICAgICAgICAgbmFtZS5Gb250U2l6ZSA9ICJTaXplMTQiCiAgICAgICAgICAgICAgICAgICAgbmFtZS5UZXh0V3JhcHBlZCA9IHRydWUKICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHQgPSAodi5OYW1lIC4uJyBcbicuLiByb3VuZCgoZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2LkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uKS5NYWduaXR1ZGUvMykgLi4nIERpc3RhbmNlJykKICAgICAgICAgICAgICAgICAgICBuYW1lLlNpemUgPSBVRGltMi5uZXcoMSwwLDEsMCkKICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRZQWxpZ25tZW50ID0gJ1RvcCcKICAgICAgICAgICAgICAgICAgICBuYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgICAgICAgbmFtZS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41CiAgICAgICAgICAgICAgICAgICAgaWYgdi5UZWFtID09IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5UZWFtIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbmFtZS5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygwLDI1NSwwKQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZS5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygyNTUsMCwwKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHYuQ2hhcmFjdGVyLkhlYWRbJ05hbWVFc3AnLi5OdW1iZXJdLlRleHRMYWJlbC5UZXh0ID0gKHYuTmFtZSAuLicgfCAnLi4gcm91bmQoKGdhbWU6R2V0U2VydmljZSgnUGxheWVycycpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdi5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbikuTWFnbml0dWRlLzMpIC4uJyBEaXN0YW5jZVxuSGVhbHRoIDogJyAuLiByb3VuZCh2LkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGgqMTAwL3YuQ2hhcmFjdGVyLkh1bWFub2lkLk1heEhlYWx0aCkgLi4gJyUnKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGlmIHYuQ2hhcmFjdGVyLkhlYWQ6RmluZEZpcnN0Q2hpbGQoJ05hbWVFc3AnLi5OdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2LkNoYXJhY3Rlci5IZWFkOkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJy4uTnVtYmVyKTpEZXN0cm95KCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCkKZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVDaGVzdENoYW1zKCkgCmZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8KICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICBpZiBzdHJpbmcuZmluZCh2Lk5hbWUsIkNoZXN0IikgdGhlbgogICAgICAgICAgICBpZiBDaGVzdEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2Lk5hbWUsIkNoZXN0IikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2OkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJy4uTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGJpbGwgPSBJbnN0YW5jZS5uZXcoJ0JpbGxib2FyZEd1aScsdikKICAgICAgICAgICAgICAgICAgICAgICAgYmlsbC5OYW1lID0gJ05hbWVFc3AnLi5OdW1iZXIKICAgICAgICAgICAgICAgICAgICAgICAgYmlsbC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgYmlsbC5TaXplID0gVURpbTIubmV3KDEsMjAwLDEsMzApCiAgICAgICAgICAgICAgICAgICAgICAgIGJpbGwuQWRvcm5lZSA9IHYKICAgICAgICAgICAgICAgICAgICAgICAgYmlsbC5BbHdheXNPblRvcCA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbmFtZSA9IEluc3RhbmNlLm5ldygnVGV4dExhYmVsJyxiaWxsKQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZS5Gb250U2l6ZSA9ICJTaXplMTQiCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dFdyYXBwZWQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuU2l6ZSA9IFVEaW0yLm5ldygxLDAsMSwwKQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRZQWxpZ25tZW50ID0gJ1RvcCcKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjUKICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJDaGVzdDEiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEwOSwgMTA5LCAxMDkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHQgPSAoIkNoZXN0IDEiIC4uJyBcbicuLiByb3VuZCgoZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2LlBvc2l0aW9uKS5NYWduaXR1ZGUvMykgLi4nIERpc3RhbmNlJykKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiQ2hlc3QyIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxNzMsIDE1OCwgMjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHQgPSAoIkNoZXN0IDIiIC4uJyBcbicuLiByb3VuZCgoZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2LlBvc2l0aW9uKS5NYWduaXR1ZGUvMykgLi4nIERpc3RhbmNlJykKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiQ2hlc3QzIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4NSwgMjU1LCAyNTUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHQgPSAoIkNoZXN0IDMiIC4uJyBcbicuLiByb3VuZCgoZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2LlBvc2l0aW9uKS5NYWduaXR1ZGUvMykgLi4nIERpc3RhbmNlJykKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2WydOYW1lRXNwJy4uTnVtYmVyXS5UZXh0TGFiZWwuVGV4dCA9ICh2Lk5hbWUgLi4nICAgXG4nLi4gcm91bmQoKGdhbWU6R2V0U2VydmljZSgnUGxheWVycycpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdi5Qb3NpdGlvbikuTWFnbml0dWRlLzMpIC4uJyBEaXN0YW5jZScpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgnTmFtZUVzcCcuLk51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIHY6RmluZEZpcnN0Q2hpbGQoJ05hbWVFc3AnLi5OdW1iZXIpOkRlc3Ryb3koKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKQplbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZURldmlsQ2hhbXMoKSAKZm9yIGksdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZTpHZXRDaGlsZHJlbigpKSBkbwogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIGlmIERldmlsRnJ1aXRFU1AgdGhlbgogICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2Lk5hbWUsICJGcnVpdCIpIHRoZW4gICAKICAgICAgICAgICAgICAgIGlmIG5vdCB2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgnTmFtZUVzcCcuLk51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGJpbGwgPSBJbnN0YW5jZS5uZXcoJ0JpbGxib2FyZEd1aScsdi5IYW5kbGUpCiAgICAgICAgICAgICAgICAgICAgYmlsbC5OYW1lID0gJ05hbWVFc3AnLi5OdW1iZXIKICAgICAgICAgICAgICAgICAgICBiaWxsLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKQogICAgICAgICAgICAgICAgICAgIGJpbGwuU2l6ZSA9IFVEaW0yLm5ldygxLDIwMCwxLDMwKQogICAgICAgICAgICAgICAgICAgIGJpbGwuQWRvcm5lZSA9IHYuSGFuZGxlCiAgICAgICAgICAgICAgICAgICAgYmlsbC5BbHdheXNPblRvcCA9IHRydWUKICAgICAgICAgICAgICAgICAgICBsb2NhbCBuYW1lID0gSW5zdGFuY2UubmV3KCdUZXh0TGFiZWwnLGJpbGwpCiAgICAgICAgICAgICAgICAgICAgbmFtZS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkCiAgICAgICAgICAgICAgICAgICAgbmFtZS5Gb250U2l6ZSA9ICJTaXplMTQiCiAgICAgICAgICAgICAgICAgICAgbmFtZS5UZXh0V3JhcHBlZCA9IHRydWUKICAgICAgICAgICAgICAgICAgICBuYW1lLlNpemUgPSBVRGltMi5uZXcoMSwwLDEsMCkKICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRZQWxpZ25tZW50ID0gJ1RvcCcKICAgICAgICAgICAgICAgICAgICBuYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgICAgICAgbmFtZS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41CiAgICAgICAgICAgICAgICAgICAgbmFtZS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHQgPSAodi5OYW1lIC4uJyBcbicuLiByb3VuZCgoZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlLzMpIC4uJyBEaXN0YW5jZScpCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdi5IYW5kbGVbJ05hbWVFc3AnLi5OdW1iZXJdLlRleHRMYWJlbC5UZXh0ID0gKHYuTmFtZSAuLicgICBcbicuLiByb3VuZCgoZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlLzMpIC4uJyBEaXN0YW5jZScpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZQogICAgICAgICAgICBpZiB2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgnTmFtZUVzcCcuLk51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoJ05hbWVFc3AnLi5OdW1iZXIpOkRlc3Ryb3koKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCkKZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVGbG93ZXJDaGFtcygpIApmb3IgaSx2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgaWYgdi5OYW1lID09ICJGbG93ZXIyIiBvciB2Lk5hbWUgPT0gIkZsb3dlcjEiIHRoZW4KICAgICAgICAgICAgaWYgRmxvd2VyRVNQIHRoZW4gCiAgICAgICAgICAgICAgICBpZiBub3QgdjpGaW5kRmlyc3RDaGlsZCgnTmFtZUVzcCcuLk51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGJpbGwgPSBJbnN0YW5jZS5uZXcoJ0JpbGxib2FyZEd1aScsdikKICAgICAgICAgICAgICAgICAgICBiaWxsLk5hbWUgPSAnTmFtZUVzcCcuLk51bWJlcgogICAgICAgICAgICAgICAgICAgIGJpbGwuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApCiAgICAgICAgICAgICAgICAgICAgYmlsbC5TaXplID0gVURpbTIubmV3KDEsMjAwLDEsMzApCiAgICAgICAgICAgICAgICAgICAgYmlsbC5BZG9ybmVlID0gdgogICAgICAgICAgICAgICAgICAgIGJpbGwuQWx3YXlzT25Ub3AgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgbmFtZSA9IEluc3RhbmNlLm5ldygnVGV4dExhYmVsJyxiaWxsKQogICAgICAgICAgICAgICAgICAgIG5hbWUuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZAogICAgICAgICAgICAgICAgICAgIG5hbWUuRm9udFNpemUgPSAiU2l6ZTE0IgogICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dFdyYXBwZWQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgbmFtZS5TaXplID0gVURpbTIubmV3KDEsMCwxLDApCiAgICAgICAgICAgICAgICAgICAgbmFtZS5UZXh0WUFsaWdubWVudCA9ICdUb3AnCiAgICAgICAgICAgICAgICAgICAgbmFtZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNQogICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCkKICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIkZsb3dlcjEiIHRoZW4gCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dCA9ICgiQmx1ZSBGbG93ZXIiIC4uJyBcbicuLiByb3VuZCgoZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2LlBvc2l0aW9uKS5NYWduaXR1ZGUvMykgLi4nIERpc3RhbmNlJykKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMjU1KQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiRmxvd2VyMiIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHQgPSAoIlJlZCBGbG93ZXIiIC4uJyBcbicuLiByb3VuZCgoZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2LlBvc2l0aW9uKS5NYWduaXR1ZGUvMykgLi4nIERpc3RhbmNlJykKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHZbJ05hbWVFc3AnLi5OdW1iZXJdLlRleHRMYWJlbC5UZXh0ID0gKHYuTmFtZSAuLicgICBcbicuLiByb3VuZCgoZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2LlBvc2l0aW9uKS5NYWduaXR1ZGUvMykgLi4nIERpc3RhbmNlJykKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJy4uTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2OkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJy4uTnVtYmVyKTpEZXN0cm95KCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQgICAKICAgIGVuZCkKZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVSZWFsRnJ1aXRDaGFtcygpIApmb3IgaSx2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkFwcGxlU3Bhd25lcjpHZXRDaGlsZHJlbigpKSBkbwogICAgaWYgdjpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgaWYgUmVhbEZydWl0RVNQIHRoZW4gCiAgICAgICAgICAgIGlmIG5vdCB2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgnTmFtZUVzcCcuLk51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgYmlsbCA9IEluc3RhbmNlLm5ldygnQmlsbGJvYXJkR3VpJyx2LkhhbmRsZSkKICAgICAgICAgICAgICAgIGJpbGwuTmFtZSA9ICdOYW1lRXNwJy4uTnVtYmVyCiAgICAgICAgICAgICAgICBiaWxsLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKQogICAgICAgICAgICAgICAgYmlsbC5TaXplID0gVURpbTIubmV3KDEsMjAwLDEsMzApCiAgICAgICAgICAgICAgICBiaWxsLkFkb3JuZWUgPSB2LkhhbmRsZQogICAgICAgICAgICAgICAgYmlsbC5BbHdheXNPblRvcCA9IHRydWUKICAgICAgICAgICAgICAgIGxvY2FsIG5hbWUgPSBJbnN0YW5jZS5uZXcoJ1RleHRMYWJlbCcsYmlsbCkKICAgICAgICAgICAgICAgIG5hbWUuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZAogICAgICAgICAgICAgICAgbmFtZS5Gb250U2l6ZSA9ICJTaXplMTQiCiAgICAgICAgICAgICAgICBuYW1lLlRleHRXcmFwcGVkID0gdHJ1ZQogICAgICAgICAgICAgICAgbmFtZS5TaXplID0gVURpbTIubmV3KDEsMCwxLDApCiAgICAgICAgICAgICAgICBuYW1lLlRleHRZQWxpZ25tZW50ID0gJ1RvcCcKICAgICAgICAgICAgICAgIG5hbWUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgIG5hbWUuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNQogICAgICAgICAgICAgICAgbmFtZS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKQogICAgICAgICAgICAgICAgbmFtZS5UZXh0ID0gKHYuTmFtZSAuLicgXG4nLi4gcm91bmQoKGdhbWU6R2V0U2VydmljZSgnUGxheWVycycpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdi5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZS8zKSAuLicgRGlzdGFuY2UnKQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB2LkhhbmRsZVsnTmFtZUVzcCcuLk51bWJlcl0uVGV4dExhYmVsLlRleHQgPSAodi5OYW1lIC4uJyAnLi4gcm91bmQoKGdhbWU6R2V0U2VydmljZSgnUGxheWVycycpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdi5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZS8zKSAuLicgRGlzdGFuY2UnKQogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlCiAgICAgICAgICAgIGlmIHYuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJy4uTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgnTmFtZUVzcCcuLk51bWJlcik6RGVzdHJveSgpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCAKICAgIGVuZAplbmQKZm9yIGksdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5QaW5lYXBwbGVTcGF3bmVyOkdldENoaWxkcmVuKCkpIGRvCiAgICBpZiB2OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICBpZiBSZWFsRnJ1aXRFU1AgdGhlbiAKICAgICAgICAgICAgaWYgbm90IHYuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJy4uTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCBiaWxsID0gSW5zdGFuY2UubmV3KCdCaWxsYm9hcmRHdWknLHYuSGFuZGxlKQogICAgICAgICAgICAgICAgYmlsbC5OYW1lID0gJ05hbWVFc3AnLi5OdW1iZXIKICAgICAgICAgICAgICAgIGJpbGwuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApCiAgICAgICAgICAgICAgICBiaWxsLlNpemUgPSBVRGltMi5uZXcoMSwyMDAsMSwzMCkKICAgICAgICAgICAgICAgIGJpbGwuQWRvcm5lZSA9IHYuSGFuZGxlCiAgICAgICAgICAgICAgICBiaWxsLkFsd2F5c09uVG9wID0gdHJ1ZQogICAgICAgICAgICAgICAgbG9jYWwgbmFtZSA9IEluc3RhbmNlLm5ldygnVGV4dExhYmVsJyxiaWxsKQogICAgICAgICAgICAgICAgbmFtZS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkCiAgICAgICAgICAgICAgICBuYW1lLkZvbnRTaXplID0gIlNpemUxNCIKICAgICAgICAgICAgICAgIG5hbWUuVGV4dFdyYXBwZWQgPSB0cnVlCiAgICAgICAgICAgICAgICBuYW1lLlNpemUgPSBVRGltMi5uZXcoMSwwLDEsMCkKICAgICAgICAgICAgICAgIG5hbWUuVGV4dFlBbGlnbm1lbnQgPSAnVG9wJwogICAgICAgICAgICAgICAgbmFtZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICAgICAgbmFtZS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41CiAgICAgICAgICAgICAgICBuYW1lLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDE3NCwgMCkKICAgICAgICAgICAgICAgIG5hbWUuVGV4dCA9ICh2Lk5hbWUgLi4nIFxuJy4uIHJvdW5kKChnYW1lOkdldFNlcnZpY2UoJ1BsYXllcnMnKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHYuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUvMykgLi4nIERpc3RhbmNlJykKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgdi5IYW5kbGVbJ05hbWVFc3AnLi5OdW1iZXJdLlRleHRMYWJlbC5UZXh0ID0gKHYuTmFtZSAuLicgJy4uIHJvdW5kKChnYW1lOkdldFNlcnZpY2UoJ1BsYXllcnMnKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHYuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUvMykgLi4nIERpc3RhbmNlJykKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZQogICAgICAgICAgICBpZiB2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgnTmFtZUVzcCcuLk51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoJ05hbWVFc3AnLi5OdW1iZXIpOkRlc3Ryb3koKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQgCiAgICBlbmQKZW5kCmZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuQmFuYW5hU3Bhd25lcjpHZXRDaGlsZHJlbigpKSBkbwogICAgaWYgdjpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgaWYgUmVhbEZydWl0RVNQIHRoZW4gCiAgICAgICAgICAgIGlmIG5vdCB2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgnTmFtZUVzcCcuLk51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgYmlsbCA9IEluc3RhbmNlLm5ldygnQmlsbGJvYXJkR3VpJyx2LkhhbmRsZSkKICAgICAgICAgICAgICAgIGJpbGwuTmFtZSA9ICdOYW1lRXNwJy4uTnVtYmVyCiAgICAgICAgICAgICAgICBiaWxsLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKQogICAgICAgICAgICAgICAgYmlsbC5TaXplID0gVURpbTIubmV3KDEsMjAwLDEsMzApCiAgICAgICAgICAgICAgICBiaWxsLkFkb3JuZWUgPSB2LkhhbmRsZQogICAgICAgICAgICAgICAgYmlsbC5BbHdheXNPblRvcCA9IHRydWUKICAgICAgICAgICAgICAgIGxvY2FsIG5hbWUgPSBJbnN0YW5jZS5uZXcoJ1RleHRMYWJlbCcsYmlsbCkKICAgICAgICAgICAgICAgIG5hbWUuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZAogICAgICAgICAgICAgICAgbmFtZS5Gb250U2l6ZSA9ICJTaXplMTQiCiAgICAgICAgICAgICAgICBuYW1lLlRleHRXcmFwcGVkID0gdHJ1ZQogICAgICAgICAgICAgICAgbmFtZS5TaXplID0gVURpbTIubmV3KDEsMCwxLDApCiAgICAgICAgICAgICAgICBuYW1lLlRleHRZQWxpZ25tZW50ID0gJ1RvcCcKICAgICAgICAgICAgICAgIG5hbWUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgIG5hbWUuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNQogICAgICAgICAgICAgICAgbmFtZS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUxLCAyNTUsIDApCiAgICAgICAgICAgICAgICBuYW1lLlRleHQgPSAodi5OYW1lIC4uJyBcbicuLiByb3VuZCgoZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlLzMpIC4uJyBEaXN0YW5jZScpCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHYuSGFuZGxlWydOYW1lRXNwJy4uTnVtYmVyXS5UZXh0TGFiZWwuVGV4dCA9ICh2Lk5hbWUgLi4nICcuLiByb3VuZCgoZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlLzMpIC4uJyBEaXN0YW5jZScpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2UKICAgICAgICAgICAgaWYgdi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoJ05hbWVFc3AnLi5OdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIHYuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJy4uTnVtYmVyKTpEZXN0cm95KCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kIAogICAgZW5kCmVuZAplbmQKCmZ1bmN0aW9uIGlzbmlsKHRoaW5nKQpyZXR1cm4gKHRoaW5nID09IG5pbCkKZW5kCmxvY2FsIGZ1bmN0aW9uIHJvdW5kKG4pCnJldHVybiBtYXRoLmZsb29yKHRvbnVtYmVyKG4pICsgMC41KQplbmQKTnVtYmVyID0gbWF0aC5yYW5kb20oMSwgMTAwMDAwMCkKCmZ1bmN0aW9uIFVwZGF0ZUlzbGFuZE1pcmFnZUVTUCgpIApmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbIl9Xb3JsZE9yaWdpbiJdLkxvY2F0aW9uczpHZXRDaGlsZHJlbigpKSBkbwogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIGlmIE1pcmFnZUlzbGFuZEVTUCB0aGVuIAogICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIk1pcmFnZSBJc2xhbmQiIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2OkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJykgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGJpbGwgPSBJbnN0YW5jZS5uZXcoJ0JpbGxib2FyZEd1aScsdikKICAgICAgICAgICAgICAgICAgICBiaWxsLk5hbWUgPSAnTmFtZUVzcCcKICAgICAgICAgICAgICAgICAgICBiaWxsLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKQogICAgICAgICAgICAgICAgICAgIGJpbGwuU2l6ZSA9IFVEaW0yLm5ldygxLDIwMCwxLDMwKQogICAgICAgICAgICAgICAgICAgIGJpbGwuQWRvcm5lZSA9IHYKICAgICAgICAgICAgICAgICAgICBiaWxsLkFsd2F5c09uVG9wID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIGxvY2FsIG5hbWUgPSBJbnN0YW5jZS5uZXcoJ1RleHRMYWJlbCcsYmlsbCkKICAgICAgICAgICAgICAgICAgICBuYW1lLkZvbnQgPSAiQ29kZSIKICAgICAgICAgICAgICAgICAgICBuYW1lLkZvbnRTaXplID0gIlNpemUxNCIKICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRXcmFwcGVkID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIG5hbWUuU2l6ZSA9IFVEaW0yLm5ldygxLDAsMSwwKQogICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dFlBbGlnbm1lbnQgPSAnVG9wJwogICAgICAgICAgICAgICAgICAgIG5hbWUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjUKICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgMjQ1LCAyNDUpCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdlsnTmFtZUVzcCddLlRleHRMYWJlbC5UZXh0ID0gKHYuTmFtZSAuLicgICBcbicuLiByb3VuZCgoZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2LlBvc2l0aW9uKS5NYWduaXR1ZGUvMykgLi4nIE0nKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2UKICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgnTmFtZUVzcCcpIHRoZW4KICAgICAgICAgICAgICAgIHY6RmluZEZpcnN0Q2hpbGQoJ05hbWVFc3AnKTpEZXN0cm95KCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZAplbmQKCmZ1bmN0aW9uIGlzbmlsKHRoaW5nKQpyZXR1cm4gKHRoaW5nID09IG5pbCkKZW5kCmxvY2FsIGZ1bmN0aW9uIHJvdW5kKG4pCnJldHVybiBtYXRoLmZsb29yKHRvbnVtYmVyKG4pICsgMC41KQplbmQKTnVtYmVyID0gbWF0aC5yYW5kb20oMSwgMTAwMDAwMCkKCmZ1bmN0aW9uIFVwZGF0ZUFmZEVTUCgpIApmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTlBDczpHZXRDaGlsZHJlbigpKSBkbwogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIGlmIEFmZEVTUCB0aGVuIAogICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIkFkdmFuY2VkIEZydWl0IERlYWxlciIgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IHY6RmluZEZpcnN0Q2hpbGQoJ05hbWVFc3AnKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgYmlsbCA9IEluc3RhbmNlLm5ldygnQmlsbGJvYXJkR3VpJyx2KQogICAgICAgICAgICAgICAgICAgIGJpbGwuTmFtZSA9ICdOYW1lRXNwJwogICAgICAgICAgICAgICAgICAgIGJpbGwuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApCiAgICAgICAgICAgICAgICAgICAgYmlsbC5TaXplID0gVURpbTIubmV3KDEsMjAwLDEsMzApCiAgICAgICAgICAgICAgICAgICAgYmlsbC5BZG9ybmVlID0gdgogICAgICAgICAgICAgICAgICAgIGJpbGwuQWx3YXlzT25Ub3AgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgbmFtZSA9IEluc3RhbmNlLm5ldygnVGV4dExhYmVsJyxiaWxsKQogICAgICAgICAgICAgICAgICAgIG5hbWUuRm9udCA9ICJDb2RlIgogICAgICAgICAgICAgICAgICAgIG5hbWUuRm9udFNpemUgPSAiU2l6ZTE0IgogICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dFdyYXBwZWQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgbmFtZS5TaXplID0gVURpbTIubmV3KDEsMCwxLDApCiAgICAgICAgICAgICAgICAgICAgbmFtZS5UZXh0WUFsaWdubWVudCA9ICdUb3AnCiAgICAgICAgICAgICAgICAgICAgbmFtZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNQogICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDgwLCAyNDUsIDI0NSkKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2WydOYW1lRXNwJ10uVGV4dExhYmVsLlRleHQgPSAodi5OYW1lIC4uJyAgIFxuJy4uIHJvdW5kKChnYW1lOkdldFNlcnZpY2UoJ1BsYXllcnMnKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHYuUG9zaXRpb24pLk1hZ25pdHVkZS8zKSAuLicgTScpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZQogICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJykgdGhlbgogICAgICAgICAgICAgICAgdjpGaW5kRmlyc3RDaGlsZCgnTmFtZUVzcCcpOkRlc3Ryb3koKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCkKZW5kCmVuZAoKZnVuY3Rpb24gVXBkYXRlQXVyYUVTUCgpIApmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTlBDczpHZXRDaGlsZHJlbigpKSBkbwogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIGlmIEF1cmFFU1AgdGhlbiAKICAgICAgICAgICAgaWYgdi5OYW1lID09ICJNYXN0ZXIgb2YgRW5oYW5jZW1lbnQiIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2OkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJykgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGJpbGwgPSBJbnN0YW5jZS5uZXcoJ0JpbGxib2FyZEd1aScsdikKICAgICAgICAgICAgICAgICAgICBiaWxsLk5hbWUgPSAnTmFtZUVzcCcKICAgICAgICAgICAgICAgICAgICBiaWxsLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKQogICAgICAgICAgICAgICAgICAgIGJpbGwuU2l6ZSA9IFVEaW0yLm5ldygxLDIwMCwxLDMwKQogICAgICAgICAgICAgICAgICAgIGJpbGwuQWRvcm5lZSA9IHYKICAgICAgICAgICAgICAgICAgICBiaWxsLkFsd2F5c09uVG9wID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIGxvY2FsIG5hbWUgPSBJbnN0YW5jZS5uZXcoJ1RleHRMYWJlbCcsYmlsbCkKICAgICAgICAgICAgICAgICAgICBuYW1lLkZvbnQgPSAiQ29kZSIKICAgICAgICAgICAgICAgICAgICBuYW1lLkZvbnRTaXplID0gIlNpemUxNCIKICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRXcmFwcGVkID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIG5hbWUuU2l6ZSA9IFVEaW0yLm5ldygxLDAsMSwwKQogICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dFlBbGlnbm1lbnQgPSAnVG9wJwogICAgICAgICAgICAgICAgICAgIG5hbWUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjUKICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgMjQ1LCAyNDUpCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdlsnTmFtZUVzcCddLlRleHRMYWJlbC5UZXh0ID0gKHYuTmFtZSAuLicgICBcbicuLiByb3VuZCgoZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2LlBvc2l0aW9uKS5NYWduaXR1ZGUvMykgLi4nIE0nKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2UKICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgnTmFtZUVzcCcpIHRoZW4KICAgICAgICAgICAgICAgIHY6RmluZEZpcnN0Q2hpbGQoJ05hbWVFc3AnKTpEZXN0cm95KCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZAplbmQKCmZ1bmN0aW9uIFVwZGF0ZUxTREVTUCgpIApmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTlBDczpHZXRDaGlsZHJlbigpKSBkbwogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIGlmIExBREVTUCB0aGVuIAogICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIkxlZ2VuZGFyeSBTd29yZCBEZWFsZXIiIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2OkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJykgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGJpbGwgPSBJbnN0YW5jZS5uZXcoJ0JpbGxib2FyZEd1aScsdikKICAgICAgICAgICAgICAgICAgICBiaWxsLk5hbWUgPSAnTmFtZUVzcCcKICAgICAgICAgICAgICAgICAgICBiaWxsLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKQogICAgICAgICAgICAgICAgICAgIGJpbGwuU2l6ZSA9IFVEaW0yLm5ldygxLDIwMCwxLDMwKQogICAgICAgICAgICAgICAgICAgIGJpbGwuQWRvcm5lZSA9IHYKICAgICAgICAgICAgICAgICAgICBiaWxsLkFsd2F5c09uVG9wID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIGxvY2FsIG5hbWUgPSBJbnN0YW5jZS5uZXcoJ1RleHRMYWJlbCcsYmlsbCkKICAgICAgICAgICAgICAgICAgICBuYW1lLkZvbnQgPSAiQ29kZSIKICAgICAgICAgICAgICAgICAgICBuYW1lLkZvbnRTaXplID0gIlNpemUxNCIKICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRXcmFwcGVkID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIG5hbWUuU2l6ZSA9IFVEaW0yLm5ldygxLDAsMSwwKQogICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dFlBbGlnbm1lbnQgPSAnVG9wJwogICAgICAgICAgICAgICAgICAgIG5hbWUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjUKICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgMjQ1LCAyNDUpCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdlsnTmFtZUVzcCddLlRleHRMYWJlbC5UZXh0ID0gKHYuTmFtZSAuLicgICBcbicuLiByb3VuZCgoZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2LlBvc2l0aW9uKS5NYWduaXR1ZGUvMykgLi4nIE0nKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2UKICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgnTmFtZUVzcCcpIHRoZW4KICAgICAgICAgICAgICAgIHY6RmluZEZpcnN0Q2hpbGQoJ05hbWVFc3AnKTpEZXN0cm95KCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZAplbmQKCmZ1bmN0aW9uIFVwZGF0ZUdlYUVTUCgpIApmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLk15c3RpY0lzbGFuZDpHZXRDaGlsZHJlbigpKSBkbyAKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICBpZiBHZWFyRVNQIHRoZW4gCiAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiTWVzaFBhcnQiIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2OkZpbmRGaXJzdENoaWxkKCdOYW1lRXNwJykgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGJpbGwgPSBJbnN0YW5jZS5uZXcoJ0JpbGxib2FyZEd1aScsdikKICAgICAgICAgICAgICAgICAgICBiaWxsLk5hbWUgPSAnTmFtZUVzcCcKICAgICAgICAgICAgICAgICAgICBiaWxsLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKQogICAgICAgICAgICAgICAgICAgIGJpbGwuU2l6ZSA9IFVEaW0yLm5ldygxLDIwMCwxLDMwKQogICAgICAgICAgICAgICAgICAgIGJpbGwuQWRvcm5lZSA9IHYKICAgICAgICAgICAgICAgICAgICBiaWxsLkFsd2F5c09uVG9wID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIGxvY2FsIG5hbWUgPSBJbnN0YW5jZS5uZXcoJ1RleHRMYWJlbCcsYmlsbCkKICAgICAgICAgICAgICAgICAgICBuYW1lLkZvbnQgPSAiQ29kZSIKICAgICAgICAgICAgICAgICAgICBuYW1lLkZvbnRTaXplID0gIlNpemUxNCIKICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRXcmFwcGVkID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIG5hbWUuU2l6ZSA9IFVEaW0yLm5ldygxLDAsMSwwKQogICAgICAgICAgICAgICAgICAgIG5hbWUuVGV4dFlBbGlnbm1lbnQgPSAnVG9wJwogICAgICAgICAgICAgICAgICAgIG5hbWUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjUKICAgICAgICAgICAgICAgICAgICBuYW1lLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgMjQ1LCAyNDUpCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdlsnTmFtZUVzcCddLlRleHRMYWJlbC5UZXh0ID0gKHYuTmFtZSAuLicgICBcbicuLiByb3VuZCgoZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2LlBvc2l0aW9uKS5NYWduaXR1ZGUvMykgLi4nIE0nKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2UKICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgnTmFtZUVzcCcpIHRoZW4KICAgICAgICAgICAgICAgIHY6RmluZEZpcnN0Q2hpbGQoJ05hbWVFc3AnKTpEZXN0cm95KCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZAplbmQKCgoKZnVuY3Rpb24gSW5mQWIoKQogICAgaWYgSW5mQWJpbGl0eSB0aGVuCiAgICAgICAgaWYgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0OkZpbmRGaXJzdENoaWxkKCJBZ2lsaXR5IikgdGhlbgogICAgICAgICAgICBsb2NhbCBpbmYgPSBJbnN0YW5jZS5uZXcoIlBhcnRpY2xlRW1pdHRlciIpCiAgICAgICAgICAgIGluZi5BY2NlbGVyYXRpb24gPSBWZWN0b3IzLm5ldygwLDAsMCkKICAgICAgICAgICAgaW5mLkFyY2hpdmFibGUgPSB0cnVlCiAgICAgICAgICAgIGluZi5EcmFnID0gMjAKICAgICAgICAgICAgaW5mLkVtaXNzaW9uRGlyZWN0aW9uID0gRW51bS5Ob3JtYWxJZC5Ub3AKICAgICAgICAgICAgaW5mLkVuYWJsZWQgPSB0cnVlCiAgICAgICAgICAgIGluZi5MaWZldGltZSA9IE51bWJlclJhbmdlLm5ldygwLDApCiAgICAgICAgICAgIGluZi5MaWdodEluZmx1ZW5jZSA9IDAKICAgICAgICAgICAgaW5mLkxvY2tlZFRvUGFydCA9IHRydWUKICAgICAgICAgICAgaW5mLk5hbWUgPSAiQWdpbGl0eSIKICAgICAgICAgICAgaW5mLlJhdGUgPSA1MDAKICAgICAgICAgICAgbG9jYWwgbnVtYmVyS2V5cG9pbnRzMiA9IHsKICAgICAgICAgICAgICAgIE51bWJlclNlcXVlbmNlS2V5cG9pbnQubmV3KDAsIDApOwogICAgICAgICAgICAgICAgTnVtYmVyU2VxdWVuY2VLZXlwb2ludC5uZXcoMSwgNCk7IAogICAgICAgICAgICB9CiAgICAgICAgICAgIGluZi5TaXplID0gTnVtYmVyU2VxdWVuY2UubmV3KG51bWJlcktleXBvaW50czIpCiAgICAgICAgICAgIGluZi5Sb3RTcGVlZCA9IE51bWJlclJhbmdlLm5ldyg5OTk5LCA5OTk5OSkKICAgICAgICAgICAgaW5mLlJvdGF0aW9uID0gTnVtYmVyUmFuZ2UubmV3KDAsIDApCiAgICAgICAgICAgIGluZi5TcGVlZCA9IE51bWJlclJhbmdlLm5ldygzMCwgMzApCiAgICAgICAgICAgIGluZi5TcHJlYWRBbmdsZSA9IFZlY3RvcjIubmV3KDAsMCwwLDApCiAgICAgICAgICAgIGluZi5UZXh0dXJlID0gIiIKICAgICAgICAgICAgaW5mLlZlbG9jaXR5SW5oZXJpdGFuY2UgPSAwCiAgICAgICAgICAgIGluZi5aT2Zmc2V0ID0gMgogICAgICAgICAgICBpbmYuVHJhbnNwYXJlbmN5ID0gTnVtYmVyU2VxdWVuY2UubmV3KDApCiAgICAgICAgICAgIGluZi5Db2xvciA9IENvbG9yU2VxdWVuY2UubmV3KENvbG9yMy5mcm9tUkdCKDAsMCwwKSxDb2xvcjMuZnJvbVJHQigwLDAsMCkpCiAgICAgICAgICAgIGluZi5QYXJlbnQgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydAogICAgICAgIGVuZAogICAgZWxzZQogICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0OkZpbmRGaXJzdENoaWxkKCJBZ2lsaXR5IikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydDpGaW5kRmlyc3RDaGlsZCgiQWdpbGl0eSIpOkRlc3Ryb3koKQogICAgICAgIGVuZAogICAgZW5kCmVuZAoKbG9jYWwgTG9jYWxQbGF5ZXIgPSBnYW1lOkdldFNlcnZpY2UnUGxheWVycycuTG9jYWxQbGF5ZXIKbG9jYWwgb3JpZ2luYWxzdGFtID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkVuZXJneS5WYWx1ZQpmdW5jdGlvbiBpbmZpbml0ZXN0YW0oKQogICAgTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkVuZXJneS5DaGFuZ2VkOmNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGlmIEluZmluaXRlRW5lcmd5IHRoZW4KICAgICAgICAgICAgTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkVuZXJneS5WYWx1ZSA9IG9yaWdpbmFsc3RhbQogICAgICAgIGVuZCAKICAgIGVuZCkKZW5kCgpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCguMSkgZG8KICAgICAgICAgICAgaWYgSW5maW5pdGVFbmVyZ3kgdGhlbgogICAgICAgICAgICAgICAgd2FpdCgwLjEpCiAgICAgICAgICAgICAgICBvcmlnaW5hbHN0YW0gPSBMb2NhbFBsYXllci5DaGFyYWN0ZXIuRW5lcmd5LlZhbHVlCiAgICAgICAgICAgICAgICBpbmZpbml0ZXN0YW0oKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCkKZW5kKQoKZnVuY3Rpb24gQ2xpY2soKQogICAgZ2FtZTpHZXRTZXJ2aWNlJ1ZpcnR1YWxVc2VyJzpDYXB0dXJlQ29udHJvbGxlcigpCiAgICBnYW1lOkdldFNlcnZpY2UnVmlydHVhbFVzZXInOkJ1dHRvbjFEb3duKFZlY3RvcjIubmV3KDEyODAsIDY3MikpCmVuZAoKZnVuY3Rpb24gQXV0b0hha2koKQogICAgaWYgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGFzQnVzbyIpIHRoZW4KICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXNvIikKICAgIGVuZAplbmQKCmZ1bmN0aW9uIFVuRXF1aXBXZWFwb24oV2VhcG9uKQogICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZChXZWFwb24pIHRoZW4KICAgICAgICBfRy5Ob3RBdXRvRXF1aXAgPSB0cnVlCiAgICAgICAgd2FpdCguNSkKICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKFdlYXBvbikuUGFyZW50ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrCiAgICAgICAgd2FpdCguMSkKICAgICAgICBfRy5Ob3RBdXRvRXF1aXAgPSBmYWxzZQogICAgZW5kCmVuZAoKZnVuY3Rpb24gRXF1aXBXZWFwb24oVG9vbFNlKQogICAgaWYgbm90IF9HLk5vdEF1dG9FcXVpcCB0aGVuCiAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKFRvb2xTZSkgdGhlbgogICAgICAgICAgICBUb29sID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKFRvb2xTZSkKICAgICAgICAgICAgd2FpdCguMSkKICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2woVG9vbCkKICAgICAgICBlbmQKICAgIGVuZAplbmQKCmZ1bmN0aW9uIEJUUChwKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIGlmIChwLlBvc2l0aW9uLWdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID49IDE1MDAgYW5kIG5vdCBBdXRvX1JhaWQgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuCiAgICAgICAgICAgIHJlcGVhdCB3YWl0KCkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBwCiAgICAgICAgICAgICAgICB3YWl0KC4wNSkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZDpEZXN0cm95KCkKICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBwCiAgICAgICAgICAgIHVudGlsIChwLlBvc2l0aW9uLWdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMTUwMCBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPiAwCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZAoKZnVuY3Rpb24gVGVsZVBQbGF5ZXIoUCkKZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IFAKZW5kCgpmdW5jdGlvbiBBVHdlZW4oUG9zKQogICAgRGlzdGFuY2UgPSAoUG9zLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUKICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuU2l0ID09IHRydWUgdGhlbiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLlNpdCA9IGZhbHNlIGVuZAogICAgcGNhbGwoZnVuY3Rpb24oKSB0d2VlbiA9IGdhbWU6R2V0U2VydmljZSgiVHdlZW5TZXJ2aWNlIik6Q3JlYXRlKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCxUd2VlbkluZm8ubmV3KERpc3RhbmNlLzIxMCwgRW51bS5FYXNpbmdTdHlsZS5MaW5lYXIpLHtDRnJhbWUgPSBQb3N9KSBlbmQpCiAgICB0d2VlbjpQbGF5KCkKICAgIGlmIERpc3RhbmNlIDw9IDI1MCB0aGVuCiAgICAgICAgdHdlZW46Q2FuY2VsKCkKICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gUG9zCiAgICBlbmQKICAgIGlmIF9HLlN0b3BUd2VlbiA9PSB0cnVlIHRoZW4KICAgICAgICB0d2VlbjpDYW5jZWwoKQogICAgICAgIF9HLkNsaXAgPSBmYWxzZQogICAgZW5kCmVuZApmdW5jdGlvbiBUUEIoQ0ZnbykKbG9jYWwgdHdlZW5fcyA9IGdhbWU6c2VydmljZSJUd2VlblNlcnZpY2UiCmxvY2FsIGluZm8gPSBUd2VlbkluZm8ubmV3KChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkJvYXRzLlBpcmF0ZUJyaWdhZGUuVmVoaWNsZVNlYXQuQ0ZyYW1lLlBvc2l0aW9uIC0gQ0Znby5Qb3NpdGlvbikuTWFnbml0dWRlLzMwMCwgRW51bS5FYXNpbmdTdHlsZS5MaW5lYXIpCnR3ZWVuID0gdHdlZW5fczpDcmVhdGUoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5Cb2F0cy5QaXJhdGVCcmlnYWRlLlZlaGljbGVTZWF0LCBpbmZvLCB7Q0ZyYW1lID0gQ0Znb30pCnR3ZWVuOlBsYXkoKQoKbG9jYWwgdHdlZW5mdW5jID0ge30KCmZ1bmN0aW9uIHR3ZWVuZnVuYzpTdG9wKCkKICAgIHR3ZWVuOkNhbmNlbCgpCmVuZAoKcmV0dXJuIHR3ZWVuZnVuYwplbmQKCmZ1bmN0aW9uIFRQUChDRmdvKQppZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWQiKS5IZWFsdGggPD0gMCBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWQiKSB0aGVuIHR3ZWVuOkNhbmNlbCgpIHJlcGVhdCB3YWl0KCkgdW50aWwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWQiKSBhbmQgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWQiKS5IZWFsdGggPiAwIHdhaXQoNykgcmV0dXJuIGVuZApsb2NhbCB0d2Vlbl9zID0gZ2FtZTpzZXJ2aWNlIlR3ZWVuU2VydmljZSIKbG9jYWwgaW5mbyA9IFR3ZWVuSW5mby5uZXcoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpWyJMb2NhbFBsYXllciJdLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gQ0Znby5Qb3NpdGlvbikuTWFnbml0dWRlLzMyNSwgRW51bS5FYXNpbmdTdHlsZS5MaW5lYXIpCnR3ZWVuID0gdHdlZW5fczpDcmVhdGUoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlclsiSHVtYW5vaWRSb290UGFydCJdLCBpbmZvLCB7Q0ZyYW1lID0gQ0Znb30pCnR3ZWVuOlBsYXkoKQoKbG9jYWwgdHdlZW5mdW5jID0ge30KCmZ1bmN0aW9uIHR3ZWVuZnVuYzpTdG9wKCkKICAgIHR3ZWVuOkNhbmNlbCgpCmVuZAoKcmV0dXJuIHR3ZWVuZnVuYwplbmQKClR5cGUgPSAxCnNwYXduKGZ1bmN0aW9uKCkKd2hpbGUgd2FpdCguMCkgZG8KICAgIGlmIFR5cGUgPT0gMSB0aGVuCiAgICAgICAgUG9zID0gQ0ZyYW1lLm5ldygwLFBvc1ksLTMwKQogICAgZWxzZWlmIFR5cGUgPT0gMiB0aGVuCiAgICAgICAgUG9zID0gQ0ZyYW1lLm5ldygzMCxQb3NZLDApCiAgICBlbHNlaWYgVHlwZSA9PSAzIHRoZW4KICAgICAgICBQb3MgPSBDRnJhbWUubmV3KDAsUG9zWSwzMCkJCiAgICBlbHNlaWYgVHlwZSA9PSA0IHRoZW4KICAgICAgICBQb3MgPSBDRnJhbWUubmV3KC0zMCxQb3NZLDApCiAgICBlbmQKICAgIGVuZAplbmQpCgpzcGF3bihmdW5jdGlvbigpCndoaWxlIHdhaXQoLjApIGRvCiAgICBUeXBlID0gMQogICAgd2FpdCgwKQogICAgVHlwZSA9IDIKICAgIHdhaXQoMCkKICAgIFR5cGUgPSAzCiAgICB3YWl0KDApCiAgICBUeXBlID0gNAogICAgd2FpdCgwKQogICAgVHlwZSA9IDUKICAgIHdhaXQoMCkKZW5kCmVuZCkKCnNwYXduKGZ1bmN0aW9uKCkKZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OkNvbm5lY3QoZnVuY3Rpb24oKQogICAgaWYgX0cuQXV0b0FkdmFuY2VEdW5nZW9uIG9yIF9HLkF1dG9Eb3VnaHRCb3NzIG9yIF9HLkF1dG9fRHVuZ2Vvbk1vYkF1cmEgb3IgX0cuQXV0b0Zhcm1DaGVzdCBvciBfRy5BdXRvRmFjdG9yeSBvciBfRy5BdXRvRmFybUJvc3NIYWxsb3cgb3IgX0cuQXV0b0Zhcm1Td2FuR2xhc3NlcyBvciBfRy5BdXRvTG9uZ1N3b3JkIG9yIF9HLkF1dG9CbGFja1NwaWtleWNvYXQgb3IgX0cuQXV0b0VsZWN0cmljQ2xhdyBvciBfRy5BdXRvRmFybUd1bk1hc3Rlcnkgb3IgX0cuQXV0b0hvbHlUb3JjaCBvciBfRy5BdXRvTGF3UmFpZCBvciBfRy5BdXRvRmFybUJvc3Mgb3IgX0cuQXV0b1R3aW5Ib29rcyBvciBfRy5BdXRvT3BlblN3YW5Eb29yIG9yIF9HLkF1dG9EcmFnb25fVHJpZGVudCBvciBfRy5BdXRvU2FiZXIgb3IgX0cuTk9DTElQIG9yIF9HLkF1dG9GYXJtRnJ1aXRNYXN0ZXJ5IG9yIF9HLkF1dG9GYXJtR3VuTWFzdGVyeSBvciBfRy5UZWxlcG9ydElzbGFuZCBvciBfRy5BdXRvX0V2b1JhY2Ugb3IgX0cuQXV0b0Zhcm1BbGxNc0J5cGFzc1R5cGUgb3IgX0cuQXV0b09ic2VydmF0aW9udjIgb3IgX0cuQXV0b011c2tldGVlckhhdCBvciBfRy5BdXRvRWN0b3BsYXNtIG9yIF9HLkF1dG9SZW5nb2t1IG9yIF9HLkF1dG9fUmFpbmJvd19IYWtpIG9yIF9HLkF1dG9PYnNlcnZhdGlvbiBvciBfRy5BdXRvRGFya0RhZ2dlciBvciBfRy5TYWZlX01vZGUgb3IgX0cuTWFzdGVyeUZydWl0IG9yIF9HLkF1dG9CdWR5U3dvcmQgb3IgX0cuQXV0b09kZXJTd29yZCBvciBfRy5BdXRvQm91bnR5IG9yIF9HLkF1dG9BbGxCb3NzIG9yIF9HLkF1dG9fQm91bnR5IG9yIF9HLkF1dG9TaGFya21hbiBvciBfRy5BdXRvX01hc3RlcnlfRnJ1aXQgb3IgX0cuQXV0b19NYXN0ZXJ5X0d1biBvciBfRy5BdXRvX0R1bmdlb24gb3IgX0cuQXV0b19DYXZlbmRlciBvciBfRy5BdXRvX1BvbGUgb3IgX0cuQXV0b19LaWxsX1BseSBvciBfRy5BdXRvX0ZhY3Rvcnkgb3IgX0cuQXV0b1NlY29uZFNlYSBvciBfRy5UZWxlcG9ydFBseSBvciBfRy5BdXRvQmFydGlsbyBvciBfRy5BdXRvX0RhcmtCb3NzIG9yIF9HLkdyYWJDaGVzdCBvciBfRy5BdXRvRmFybUJvdW50eSBvciBfRy5Ib2x5X1RvcmNoIG9yIF9HLkF1dG9GYXJtIG9yIF9HLkNsaXAgb3IgX0cuQXV0b0VsaXRlaHVudGVyIG9yIF9HLkF1dG9UaGlyZFNlYSBvciBfRy5BdXRvX0JvbmUgb3IgX0cuQXV0b2hlYXJ0IG9yIF9HLkF1dG9kb3VnaGtpbmcgb3IgX0cuQXV0b0Zhcm1NYXRlcmlhbCBvciBfRy5BdXRvTmV2YVNvdWxHdWl0YXIgb3IgX0cuQXV0b19EcmFnb25fVHJpZGVudCBvciBfRy5BdXRvdHVzaGl0YSBvciBfRy5kIG9yIF9HLkF1dG93YWRlbiBvciBfRy5BdXRvZ2F5IG9yIF9HLkF1dG9wb2xlIG9yIF9HLkF1dG9zYXcgb3IgX0cuQXV0b09ic2VydmF0aW9uSGFraVYyIG9yIF9HLkF1dG9GYXJtTmVhcmVzdCBvciBBdXRvRmFybUNoZXN0IG9yIF9HLkF1dG9DYXJ2ZW5kZXIgb3IgX0cuQXV0b1R3aW5Ib29rIG9yIEF1dG9Nb2JBdXJhIG9yIF9HLlR3ZWVuZnJ1aXQgb3IgX0cuQXV0b0thaSBvciBfRy5UZWxlcG9ydE5QQyBvciBfRy5MZWF0aGVyIG9yIF9HLkF1dG9fV2luZyBvciBfRy5VbW0gb3IgX0cuTWFrb3JpX2dheSBvciBSYWRpb2FjdGl2ZSBvciBGaXNoIG9yIEd1bnBvd2RlciBvciBEcmFnb25fU2NhbGUgb3IgQ29jb2FmYXJtIG9yIFNjcmFwIG9yIE1pbmlIZWUgb3IgX0cuQXV0b0Zhcm1TZWFiYWVzdCBvciBfRy5BdXRvX0N1cnNlZF9EdWFsX0thdGFuYSBvciBfRy5BdXRvRmFybU1vYiBvciBfRy5BdXRvTXlzdGljSXNsYW5kIG9yIF9HLkF1dG9GYXJtRHVuZ2VvbiBvciBfRy5BdXRvUmFpZFBpcmF0ZSBvciBfRy5BdXRvUXVlc3RSYWNlIG9yIF9HLlR3ZWVuTUdlYXIgb3IgZ2V0Z2VudigpLkF1dG9GYXJtIG9yIF9HLkF1dG9QbGF5ZXJIdW50ZXIgb3IgX0cuQXV0b0ZhY3Rvcnkgb3IgR3JhYl9DaGVzdCBvciBfRy5OYW1mb24gb3IgX0cuQXV0b1N3b3JkTWFzdGVyeSBvciBfRy5BdXRvU2VhQmVzdCBvciBfRy5BdXRvS2lsbFRpYWwgb3IgX0cuQXV0b19TYWJlciBvciBfRy5Qb3NpdGlvbl9TcGF3biBvciBfRy5GYXN0RmFybU1vZGUgb3IgX0cuQXV0b1JhY2Ugb3IgX0cuUmFpZFBpcmF0ZSBvciBPcGVuX0NvbG9yX0hha2kgdGhlbgogICAgICAgIGlmIG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJMT0wiKSB0aGVuCiAgICAgICAgICAgIGxvY2FsIExPTCA9IEluc3RhbmNlLm5ldygiUGFydCIpCiAgICAgICAgICAgIExPTC5OYW1lID0gIkxPTCIKICAgICAgICAgICAgTE9MLlBhcmVudCA9IGdhbWUuV29ya3NwYWNlCiAgICAgICAgICAgIExPTC5BbmNob3JlZCA9IHRydWUKICAgICAgICAgICAgTE9MLlRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgTE9MLlNpemUgPSBWZWN0b3IzLm5ldygzMCwtMC41LDMwKQogICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkZpbmRGaXJzdENoaWxkKCJMT0wiKSB0aGVuCiAgICAgICAgICAgIGdhbWUuV29ya3NwYWNlWyJMT0wiXS5DRnJhbWUgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAtMy42LCAwKQogICAgICAgIGVuZAogICAgZWxzZQogICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6RmluZEZpcnN0Q2hpbGQoIkxPTCIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiTE9MIik6RGVzdHJveSgpCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKQplbmQpCgpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9BZHZhbmNlRHVuZ2VvbiBvciBfRy5BdXRvRG91Z2h0Qm9zcyBvciBfRy5BdXRvX0R1bmdlb25Nb2JBdXJhIG9yIF9HLkF1dG9GYXJtQ2hlc3Qgb3IgX0cuQXV0b0ZhY3Rvcnkgb3IgX0cuQXV0b0Zhcm1Cb3NzSGFsbG93IG9yIF9HLkF1dG9GYXJtU3dhbkdsYXNzZXMgb3IgX0cuQXV0b0xvbmdTd29yZCBvciBfRy5BdXRvQmxhY2tTcGlrZXljb2F0IG9yIF9HLkF1dG9FbGVjdHJpY0NsYXcgb3IgX0cuQXV0b0Zhcm1HdW5NYXN0ZXJ5IG9yIF9HLkF1dG9Ib2x5VG9yY2ggb3IgX0cuQXV0b0xhd1JhaWQgb3IgX0cuQXV0b0Zhcm1Cb3NzIG9yIF9HLkF1dG9Ud2luSG9va3Mgb3IgX0cuQXV0b09wZW5Td2FuRG9vciBvciBfRy5BdXRvRHJhZ29uX1RyaWRlbnQgb3IgX0cuQXV0b1NhYmVyIG9yIF9HLkF1dG9GYXJtRnJ1aXRNYXN0ZXJ5IG9yIF9HLkF1dG9GYXJtR3VuTWFzdGVyeSBvciBfRy5UZWxlcG9ydElzbGFuZCBvciBfRy5BdXRvX0V2b1JhY2Ugb3IgX0cuQXV0b0Zhcm1BbGxNc0J5cGFzc1R5cGUgb3IgX0cuQXV0b09ic2VydmF0aW9udjIgb3IgX0cuQXV0b011c2tldGVlckhhdCBvciBfRy5BdXRvRWN0b3BsYXNtIG9yIF9HLkF1dG9SZW5nb2t1IG9yIF9HLkF1dG9fUmFpbmJvd19IYWtpIG9yIF9HLkF1dG9PYnNlcnZhdGlvbiBvciBfRy5BdXRvRGFya0RhZ2dlciBvciBfRy5TYWZlX01vZGUgb3IgX0cuTWFzdGVyeUZydWl0IG9yIF9HLkF1dG9CdWR5U3dvcmQgb3IgX0cuQXV0b09kZXJTd29yZCBvciBfRy5BdXRvQm91bnR5IG9yIF9HLkF1dG9BbGxCb3NzIG9yIF9HLkF1dG9fQm91bnR5IG9yIF9HLkF1dG9TaGFya21hbiBvciBfRy5BdXRvX01hc3RlcnlfRnJ1aXQgb3IgX0cuQXV0b19NYXN0ZXJ5X0d1biBvciBfRy5BdXRvX0R1bmdlb24gb3IgX0cuQXV0b19DYXZlbmRlciBvciBfRy5BdXRvX1BvbGUgb3IgX0cuQXV0b19LaWxsX1BseSBvciBfRy5BdXRvX0ZhY3Rvcnkgb3IgX0cuQXV0b1NlY29uZFNlYSBvciBfRy5UZWxlcG9ydFBseSBvciBfRy5BdXRvQmFydGlsbyBvciBfRy5BdXRvX0RhcmtCb3NzIG9yIF9HLkdyYWJDaGVzdCBvciBfRy5BdXRvRmFybUJvdW50eSBvciBfRy5Ib2x5X1RvcmNoIG9yIF9HLkF1dG9GYXJtIG9yIF9HLkNsaXAgb3IgRmFybUJvc3Mgb3IgX0cuQXV0b0VsaXRlaHVudGVyIG9yIF9HLkF1dG9UaGlyZFNlYSBvciBfRy5BdXRvX0JvbmUgb3IgX0cuQXV0b2hlYXJ0IG9yIF9HLkF1dG9kb3VnaGtpbmcgb3IgX0cuQXV0b0Zhcm1NYXRlcmlhbCBvciBfRy5BdXRvTmV2YVNvdWxHdWl0YXIgb3IgX0cuQXV0b19EcmFnb25fVHJpZGVudCBvciBfRy5BdXRvdHVzaGl0YSBvciBfRy5kIG9yIF9HLkF1dG93YWRlbiBvciBfRy5BdXRvZ2F5IG9yIF9HLkF1dG9wb2xlIG9yIF9HLkF1dG9zYXcgb3IgX0cuQXV0b09ic2VydmF0aW9uSGFraVYyIG9yIF9HLkF1dG9GYXJtTmVhcmVzdCBvciBBdXRvRmFybUNoZXN0IG9yIF9HLkF1dG9DYXJ2ZW5kZXIgb3IgX0cuQXV0b1R3aW5Ib29rIG9yIEF1dG9Nb2JBdXJhIG9yIF9HLlR3ZWVuZnJ1aXQgb3IgX0cuVGVsZXBvcnROUEMgb3IgX0cuTGVhdGhlciBvciBfRy5BdXRvX1dpbmcgb3IgX0cuVW1tIG9yIF9HLk1ha29yaV9nYXkgb3IgUmFkaW9hY3RpdmUgb3IgRmlzaCBvciBHdW5wb3dkZXIgb3IgRHJhZ29uX1NjYWxlIG9yIENvY29hZmFybSBvciBTY3JhcCBvciBNaW5pSGVlIG9yIF9HLkF1dG9GYXJtU2VhYmFlc3Qgb3IgX0cuQXV0b19DdXJzZWRfRHVhbF9LYXRhbmEgb3IgX0cuQXV0b0Zhcm1Nb2Igb3IgX0cuQXV0b015c3RpY0lzbGFuZCBvciBfRy5BdXRvRmFybUR1bmdlb24gb3IgX0cuQXV0b1JhaWRQaXJhdGUgb3IgX0cuQXV0b1F1ZXN0UmFjZSBvciBfRy5Ud2Vlbk1HZWFyIG9yIGdldGdlbnYoKS5BdXRvRmFybSBvciBfRy5BdXRvUGxheWVySHVudGVyIG9yIF9HLkF1dG9GYWN0b3J5IG9yIEdyYWJfQ2hlc3Qgb3IgX0cuTmFtZm9uIG9yIF9HLkF1dG9Td29yZE1hc3Rlcnkgb3IgX0cuQXV0b19TZWFiZXN0IG9yIF9HLkF1dG9TZWFCZXN0IG9yIF9HLkF1dG9LaWxsVGlhbCBvciBfRy5BdXRvX1NhYmVyIG9yIF9HLlBvc2l0aW9uX1NwYXduIG9yIF9HLkZhc3RGYXJtTW9kZSBvciBfRy5BdXRvUmFjZSBvciBfRy5SYWlkUGlyYXRlIG9yIE9wZW5fQ29sb3JfSGFraSBvciBfRy5BdXRvVGVycm9yc2hhcmsgb3IgRmFybVNoYXJrIG9yIF9HLmZhcm1waXJhbnlhIG9yIF9HLkZpc2hfQ3Jld19NZW1iZXIgb3IgX0cuRG9tYWRpY0F1dG9Ecml2ZUJvYXQgb3IgX0cuYmppckZpc2hCb2F0IG9yIF9HLktpbGxHaG9zdFNoaXAgb3IgX0cuQXV0b0Zyb3plbkRpbWVuc2lvbiBvciBfRy5BdXRvRktpdHN1bmUgPT0gdHJ1ZSB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQ6RmluZEZpcnN0Q2hpbGQoIkJvZHlDbGlwIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIE5vY2xpcCA9IEluc3RhbmNlLm5ldygiQm9keVZlbG9jaXR5IikKICAgICAgICAgICAgICAgICAgICBOb2NsaXAuTmFtZSA9ICJCb2R5Q2xpcCIKICAgICAgICAgICAgICAgICAgICBOb2NsaXAuUGFyZW50ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQKICAgICAgICAgICAgICAgICAgICBOb2NsaXAuTWF4Rm9yY2UgPSBWZWN0b3IzLm5ldygxMDAwMDAsMTAwMDAwLDEwMDAwMCkKICAgICAgICAgICAgICAgICAgICBOb2NsaXAuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLDAsMCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCkKZW5kKQoKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLlN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9BZHZhbmNlRHVuZ2VvbiBvciBfRy5BdXRvRG91Z2h0Qm9zcyBvciBfRy5BdXRvX0R1bmdlb25Nb2JBdXJhIG9yIF9HLkF1dG9GYXJtQ2hlc3Qgb3IgX0cuQXV0b0ZhY3Rvcnkgb3IgX0cuQXV0b0Zhcm1Cb3NzSGFsbG93IG9yIF9HLkF1dG9GYXJtU3dhbkdsYXNzZXMgb3IgX0cuQXV0b0xvbmdTd29yZCBvciBfRy5BdXRvQmxhY2tTcGlrZXljb2F0IG9yIF9HLkF1dG9FbGVjdHJpY0NsYXcgb3IgX0cuQXV0b0Zhcm1HdW5NYXN0ZXJ5IG9yIF9HLkF1dG9Ib2x5VG9yY2ggb3IgX0cuQXV0b0xhd1JhaWQgb3IgX0cuQXV0b0Zhcm1Cb3NzIG9yIF9HLkF1dG9Ud2luSG9va3Mgb3IgX0cuQXV0b09wZW5Td2FuRG9vciBvciBfRy5BdXRvRHJhZ29uX1RyaWRlbnQgb3IgX0cuQXV0b1NhYmVyIG9yIF9HLk5PQ0xJUCBvciBfRy5BdXRvRmFybUZydWl0TWFzdGVyeSBvciBfRy5BdXRvRmFybUd1bk1hc3Rlcnkgb3IgX0cuVGVsZXBvcnRJc2xhbmQgb3IgX0cuQXV0b19Fdm9SYWNlIG9yIF9HLkF1dG9GYXJtQWxsTXNCeXBhc3NUeXBlIG9yIF9HLkF1dG9PYnNlcnZhdGlvbnYyIG9yIF9HLkF1dG9NdXNrZXRlZXJIYXQgb3IgX0cuQXV0b0VjdG9wbGFzbSBvciBfRy5BdXRvUmVuZ29rdSBvciBfRy5BdXRvX1JhaW5ib3dfSGFraSBvciBfRy5BdXRvT2JzZXJ2YXRpb24gb3IgX0cuQXV0b0RhcmtEYWdnZXIgb3IgX0cuU2FmZV9Nb2RlIG9yIF9HLk1hc3RlcnlGcnVpdCBvciBfRy5BdXRvQnVkeVN3b3JkIG9yIF9HLkF1dG9PZGVyU3dvcmQgb3IgX0cuQXV0b0JvdW50eSBvciBfRy5BdXRvQWxsQm9zcyBvciBfRy5BdXRvX0JvdW50eSBvciBfRy5BdXRvU2hhcmttYW4gb3IgX0cuQXV0b19NYXN0ZXJ5X0ZydWl0IG9yIF9HLkF1dG9fTWFzdGVyeV9HdW4gb3IgX0cuQXV0b19EdW5nZW9uIG9yIF9HLkF1dG9fQ2F2ZW5kZXIgb3IgX0cuQXV0b19Qb2xlIG9yIF9HLkF1dG9fS2lsbF9QbHkgb3IgX0cuQXV0b19GYWN0b3J5IG9yIF9HLkF1dG9TZWNvbmRTZWEgb3IgX0cuVGVsZXBvcnRQbHkgb3IgX0cuQXV0b0JhcnRpbG8gb3IgX0cuQXV0b19EYXJrQm9zcyBvciBfRy5HcmFiQ2hlc3Qgb3IgX0cuQXV0b0Zhcm1Cb3VudHkgb3IgX0cuSG9seV9Ub3JjaCBvciBfRy5BdXRvRmFybSBvciBfRy5DbGlwIG9yIF9HLkF1dG9FbGl0ZWh1bnRlciBvciBfRy5BdXRvVGhpcmRTZWEgb3IgX0cuQXV0b19Cb25lIG9yIF9HLkF1dG9oZWFydCBvciBfRy5BdXRvZG91Z2hraW5nIG9yIF9HLkF1dG9GYXJtTWF0ZXJpYWwgb3IgX0cuQXV0b05ldmFTb3VsR3VpdGFyIG9yIF9HLkF1dG9fRHJhZ29uX1RyaWRlbnQgb3IgX0cuQXV0b3R1c2hpdGEgb3IgX0cuQXV0b3dhZGVuIG9yIF9HLkF1dG9nYXkgb3IgX0cuQXV0b3BvbGUgb3IgX0cuQXV0b3NhdyBvciBfRy5BdXRvT2JzZXJ2YXRpb25IYWtpVjIgb3IgX0cuQXV0b0Zhcm1OZWFyZXN0IG9yIF9HLkF1dG9DYXJ2ZW5kZXIgb3IgX0cuQXV0b1R3aW5Ib29rIG9yIEF1dG9Nb2JBdXJhIG9yIF9HLlR3ZWVuZnJ1aXQgb3IgX0cuVGVsZXBvcnROUEMgb3IgX0cuQXV0b0thaSBvciBfRy5MZWF0aGVyIG9yIF9HLkF1dG9fV2luZyBvciBfRy5VbW0gb3IgX0cuTWFrb3JpX2dheSBvciBSYWRpb2FjdGl2ZSBvciBGaXNoIG9yIEd1bnBvd2RlciBvciBEcmFnb25fU2NhbGUgb3IgQ29jb2FmYXJtIG9yIFNjcmFwIG9yIE1pbmlIZWUgb3IgX0cuQXV0b0Zhcm1TZWFiYWVzdCBvciBfRy5BdXRvX0N1cnNlZF9EdWFsX0thdGFuYSBvciBfRy5BdXRvRmFybU1vYiBvciBfRy5BdXRvTXlzdGljSXNsYW5kIG9yIF9HLkF1dG9GYXJtRHVuZ2VvbiBvciBfRy5BdXRvUmFpZFBpcmF0ZSBvciBfRy5BdXRvUXVlc3RSYWNlIG9yIF9HLlR3ZWVuTUdlYXIgb3IgZ2V0Z2VudigpLkF1dG9GYXJtIG9yIF9HLkF1dG9QbGF5ZXJIdW50ZXIgb3IgX0cuQXV0b0ZhY3Rvcnkgb3IgX0cuTmFtZm9uIG9yIF9HLkF1dG9Td29yZE1hc3Rlcnkgb3IgX0cuQXV0b19TZWFiZXN0IG9yIF9HLkF1dG9TZWFCZXN0IG9yIF9HLkF1dG9LaWxsVGlhbCBvciBfRy5BdXRvX1NhYmVyIG9yIF9HLlBvc2l0aW9uX1NwYXduIG9yIF9HLlRQQiBvciBfRy5GYXN0RmFybU1vZGUgb3IgX0cuQXV0b1JhY2Ugb3IgX0cuUmFpZFBpcmF0ZSBvciBPcGVuX0NvbG9yX0hha2kgb3IgX0cuQXV0b1RlcnJvcnNoYXJrIG9yIEZhcm1TaGFyayBvciBfRy5mYXJtcGlyYW55YSBvciBfRy5GaXNoX0NyZXdfTWVtYmVyIG9yIF9HLkRvbWFkaWNBdXRvRHJpdmVCb2F0IG9yIF9HLkF1dG9Gcm96ZW5EaW1lbnNpb24gb3IgX0cuQXV0b0ZLaXRzdW5lID09IHRydWUgdGhlbgogICAgICAgICAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2LkNhbkNvbGxpZGUgPSBmYWxzZSAgICAKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbmQpCmVuZCkKCnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b0FkdmFuY2VEdW5nZW9uIG9yIF9HLkF1dG9Eb3VnaHRCb3NzIG9yIF9HLkF1dG9fRHVuZ2Vvbk1vYkF1cmEgb3IgX0cuQXV0b0Zhcm1DaGVzdCBvciBfRy5BdXRvRmFjdG9yeSBvciBfRy5BdXRvRmFybUJvc3NIYWxsb3cgb3IgX0cuQXV0b0Zhcm1Td2FuR2xhc3NlcyBvciBfRy5BdXRvTG9uZ1N3b3JkIG9yIF9HLkF1dG9CbGFja1NwaWtleWNvYXQgb3IgX0cuQXV0b0VsZWN0cmljQ2xhdyBvciBfRy5BdXRvRmFybUd1bk1hc3Rlcnkgb3IgX0cuQXV0b0hvbHlUb3JjaCBvciBfRy5BdXRvTGF3UmFpZCBvciBfRy5BdXRvRmFybUJvc3Mgb3IgX0cuQXV0b1R3aW5Ib29rcyBvciBfRy5BdXRvT3BlblN3YW5Eb29yIG9yIF9HLkF1dG9EcmFnb25fVHJpZGVudCBvciBfRy5BdXRvU2FiZXIgb3IgX0cuQXV0b0Zhcm1GcnVpdE1hc3Rlcnkgb3IgX0cuQXV0b0Zhcm1HdW5NYXN0ZXJ5IG9yIF9HLlRlbGVwb3J0SXNsYW5kIG9yIF9HLkF1dG9fRXZvUmFjZSBvciBfRy5BdXRvRmFybUFsbE1zQnlwYXNzVHlwZSBvciBfRy5BdXRvT2JzZXJ2YXRpb252MiBvciBfRy5BdXRvTXVza2V0ZWVySGF0IG9yIF9HLkF1dG9FY3RvcGxhc20gb3IgX0cuQXV0b1Jlbmdva3Ugb3IgX0cuQXV0b19SYWluYm93X0hha2kgb3IgX0cuQXV0b09ic2VydmF0aW9uIG9yIF9HLkF1dG9EYXJrRGFnZ2VyIG9yIF9HLlNhZmVfTW9kZSBvciBfRy5NYXN0ZXJ5RnJ1aXQgb3IgX0cuQXV0b0J1ZHlTd29yZCBvciBfRy5BdXRvT2RlclN3b3JkIG9yIF9HLkF1dG9Cb3VudHkgb3IgX0cuQXV0b0FsbEJvc3Mgb3IgX0cuQXV0b19Cb3VudHkgb3IgX0cuQXV0b1NoYXJrbWFuIG9yIF9HLkF1dG9fTWFzdGVyeV9GcnVpdCBvciBfRy5BdXRvX01hc3RlcnlfR3VuIG9yIF9HLkF1dG9fRHVuZ2VvbiBvciBfRy5BdXRvX0NhdmVuZGVyIG9yIF9HLkF1dG9fUG9sZSBvciBfRy5BdXRvX0tpbGxfUGx5IG9yIF9HLkF1dG9fRmFjdG9yeSBvciBfRy5BdXRvU2Vjb25kU2VhIG9yIF9HLlRlbGVwb3J0UGx5IG9yIF9HLkF1dG9CYXJ0aWxvIG9yIF9HLkF1dG9fRGFya0Jvc3Mgb3IgX0cuR3JhYkNoZXN0IG9yIF9HLkF1dG9GYXJtQm91bnR5IG9yIF9HLkhvbHlfVG9yY2ggb3IgX0cuQXV0b0Zhcm0gb3IgX0cuQ2xpcCBvciBGYXJtQm9zcyBvciBfRy5BdXRvRWxpdGVodW50ZXIgb3IgX0cuQXV0b1RoaXJkU2VhIG9yIF9HLkF1dG9fQm9uZSBvciBfRy5BdXRvaGVhcnQgb3IgX0cuQXV0b2RvdWdoa2luZyBvciBfRy5BdXRvRmFybU1hdGVyaWFsIG9yIF9HLkF1dG9OZXZhU291bEd1aXRhciBvciBfRy5BdXRvX0RyYWdvbl9UcmlkZW50IG9yIF9HLkF1dG90dXNoaXRhIG9yIF9HLmQgb3IgX0cuQXV0b3dhZGVuIG9yIF9HLkF1dG9nYXkgb3IgX0cuQXV0b3BvbGUgb3IgX0cuQXV0b3NhdyBvciBfRy5BdXRvT2JzZXJ2YXRpb25IYWtpVjIgb3IgX0cuQXV0b0Zhcm1OZWFyZXN0IG9yIEF1dG9GYXJtQ2hlc3Qgb3IgX0cuQXV0b0NhcnZlbmRlciBvciBfRy5BdXRvVHdpbkhvb2sgb3IgQXV0b01vYkF1cmEgb3IgX0cuVHdlZW5mcnVpdCBvciBfRy5UZWxlcG9ydE5QQyBvciBfRy5MZWF0aGVyIG9yIF9HLkF1dG9fV2luZyBvciBfRy5VbW0gb3IgX0cuTWFrb3JpX2dheSBvciBSYWRpb2FjdGl2ZSBvciBGaXNoIG9yIEd1bnBvd2RlciBvciBEcmFnb25fU2NhbGUgb3IgQ29jb2FmYXJtIG9yIFNjcmFwIG9yIE1pbmlIZWUgb3IgX0cuQXV0b0Zhcm1TZWFiYWVzdCBvciBfRy5BdXRvX0N1cnNlZF9EdWFsX0thdGFuYSBvciBfRy5BdXRvRmFybU1vYiBvciBfRy5BdXRvTXlzdGljSXNsYW5kIG9yIF9HLkF1dG9GYXJtRHVuZ2VvbiBvciBfRy5BdXRvUmFpZFBpcmF0ZSBvciBfRy5BdXRvUXVlc3RSYWNlIG9yIF9HLlR3ZWVuTUdlYXIgb3IgZ2V0Z2VudigpLkF1dG9GYXJtIG9yIF9HLkF1dG9QbGF5ZXJIdW50ZXIgb3IgX0cuQXV0b0ZhY3Rvcnkgb3IgR3JhYl9DaGVzdCBvciBfRy5OYW1mb24gb3IgX0cuQXV0b1N3b3JkTWFzdGVyeSBvciBfRy5BdXRvX1NlYWJlc3Qgb3IgX0cuLkF1dG9TZWFCZXN0IG9yIF9HLkF1dG9LaWxsVGlhbCBvciBfRy5BdXRvX1NhYmVyIG9yIF9HLlBvc2l0aW9uX1NwYXduIG9yIF9HLkZhc3RGYXJtTW9kZSBvciBfRy5BdXRvUmFjZSBvciBfRy5SYWlkUGlyYXRlIG9yIF9HLkF1dG9UdXNoaXRhU3dvcmQgb3IgT3Blbl9Db2xvcl9IYWtpIG9yIF9HLkF1dG9UZXJyb3JzaGFyayBvciBGYXJtU2hhcmsgb3IgX0cuZmFybXBpcmFueWEgb3IgX0cuRmlzaF9DcmV3X01lbWJlciBvciBfRy5Eb21hZGljQXV0b0RyaXZlQm9hdCBvciBfRy5iamlyRmlzaEJvYXQgb3IgX0cuS2lsbEdob3N0U2hpcCA9PSB0cnVlIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIaWdobGlnaHQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgSGlnaGxpZ2h0ID0gSW5zdGFuY2UubmV3KCJIaWdobGlnaHQiKQogICAgICAgICAgICAgICAgICAgIEhpZ2hsaWdodC5GaWxsQ29sb3IgPSBDb2xvcjMubmV3KDAsIDAsIDApCiAgICAgICAgICAgICAgICAgICAgSGlnaGxpZ2h0Lk91dGxpbmVDb2xvciA9IENvbG9yMy5uZXcoMCwwLDApCiAgICAgICAgICAgICAgICAgICAgSGlnaGxpZ2h0LlBhcmVudCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCkKZW5kKQoKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b0RvdWdodEJvc3Mgb3IgX0cuQXV0b19EdW5nZW9uTW9iQXVyYSBvciBfRy5BdXRvRmFybUNoZXN0IG9yIF9HLkF1dG9GYXJtQm9zc0hhbGxvdyBvciBfRy5BdXRvRmFjdG9yeSBvciBfRy5BdXRvRmFybVN3YW5HbGFzc2VzIG9yIF9HLkF1dG9Mb25nU3dvcmQgb3IgX0cuQXV0b0JsYWNrU3Bpa2V5Y29hdCBvciBfRy5BdXRvRWxlY3RyaWNDbGF3IG9yIF9HLkF1dG9GYXJtR3VuTWFzdGVyeSBvciBfRy5BdXRvSG9seVRvcmNoIG9yIF9HLkF1dG9MYXdSYWlkIG9yIF9HLkF1dG9GYXJtQm9zcyBvciBfRy5BdXRvVHdpbkhvb2tzIG9yIF9HLkF1dG9PcGVuU3dhbkRvb3Igb3IgX0cuQXV0b0RyYWdvbl9UcmlkZW50IG9yIF9HLkF1dG9TYWJlciBvciBfRy5OT0NMSVAgb3IgX0cuQXV0b0Zhcm1GcnVpdE1hc3Rlcnkgb3IgX0cuQXV0b0Zhcm1HdW5NYXN0ZXJ5IG9yIF9HLlRlbGVwb3J0SXNsYW5kIG9yIF9HLkF1dG9fRXZvUmFjZSBvciBfRy5BdXRvRmFybUFsbE1zQnlwYXNzVHlwZSBvciBfRy5BdXRvT2JzZXJ2YXRpb252MiBvciBfRy5BdXRvTXVza2V0ZWVySGF0IG9yIF9HLkF1dG9FY3RvcGxhc20gb3IgX0cuQXV0b1Jlbmdva3Ugb3IgX0cuQXV0b19SYWluYm93X0hha2kgb3IgX0cuQXV0b09ic2VydmF0aW9uIG9yIF9HLkF1dG9EYXJrRGFnZ2VyIG9yIF9HLlNhZmVfTW9kZSBvciBfRy5NYXN0ZXJ5RnJ1aXQgb3IgX0cuQXV0b0J1ZHlTd29yZCBvciBfRy5BdXRvT2RlclN3b3JkIG9yIF9HLkF1dG9BbGxCb3NzIG9yIF9HLkF1dG9fQm91bnR5IG9yIF9HLkF1dG9TaGFya21hbiBvciBfRy5BdXRvX01hc3RlcnlfRnJ1aXQgb3IgX0cuQXV0b19NYXN0ZXJ5X0d1biBvciBfRy5BdXRvX0R1bmdlb24gb3IgX0cuQXV0b19DYXZlbmRlciBvciBfRy5BdXRvX1BvbGUgb3IgX0cuQXV0b19LaWxsX1BseSBvciBfRy5BdXRvX0ZhY3Rvcnkgb3IgX0cuQXV0b1NlY29uZFNlYSBvciBfRy5UZWxlcG9ydFBseSBvciBfRy5BdXRvQmFydGlsbyBvciBfRy5BdXRvX0RhcmtCb3NzIG9yIF9HLkF1dG9GYXJtIG9yIF9HLkNsaXAgb3IgX0cuQXV0b0VsaXRlaHVudGVyIG9yIF9HLkF1dG9UaGlyZFNlYSBvciBfRy5BdXRvX0JvbmUgb3IgX0cuQXV0b2hlYXJ0IG9yIF9HLkF1dG9kb3VnaGtpbmcgb3IgX0cuZCBvciBfRy5BdXRvd2FkZW4gb3IgX0cuQXV0b2dheSBvciBfRy5BdXRvT2JzZXJ2YXRpb25IYWtpVjIgb3IgX0cuQXV0b0Zhcm1NYXRlcmlhbCBvciBfRy5BdXRvRmFybU5lYXJlc3Qgb3IgX0cuQXV0b0NhcnZlbmRlciBvciBfRy5BdXRvVHdpbkhvb2sgb3IgQXV0b01vYkF1cmEgb3IgX0cuTGVhdGhlciBvciBfRy5BdXRvX1dpbmcgb3IgX0cuVW1tIG9yIF9HLk1ha29yaV9nYXkgb3IgUmFkaW9hY3RpdmUgb3IgRmlzaCBvciBHdW5wb3dkZXIgb3IgRHJhZ29uX1NjYWxlIG9yIENvY29hZmFybSBvciBTY3JhcCBvciBNaW5pSGVlIG9yIF9HLkF1dG9GYXJtU2VhYmFlc3Qgb3IgX0cuQXV0b19DdXJzZWRfRHVhbF9LYXRhbmEgb3IgX0cuQXV0b0Zhcm1Nb2Igb3IgX0cuQXV0b1JhaWRQaXJhdGUgb3IgZ2V0Z2VudigpLkF1dG9GYXJtIG9yIF9HLkF1dG9QbGF5ZXJIdW50ZXIgb3IgX0cuQXV0b0ZhY3Rvcnkgb3IgX0cuQXR0YWNrRHVtbXkgb3IgX0cuQXV0b1N3b3JkTWFzdGVyeSBvciBfRy5BdXRvX1NlYWJlc3Qgb3IgX0cuQXV0b1NlYUJlc3Qgb3IgX0cuQXV0b0tpbGxUaWFsIG9yIF9HLkF1dG9fU2FiZXIgb3IgX0cuRmFzdEZhcm1Nb2RlIG9yIF9HLlJhaWRQaXJhdGUgb3IgX0cuQXV0b1RlcnJvcnNoYXJrIG9yIEZhcm1TaGFyayBvciBfRy5mYXJtcGlyYW55YSBvciBfRy5GaXNoX0NyZXdfTWVtYmVyIG9yIF9HLmJqaXJGaXNoQm9hdCBvciBfRy5LaWxsR2hvc3RTaGlwID09IHRydWUgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRTpGaXJlU2VydmVyKCJLZW4iLHRydWUpCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQgICAgCiAgICBlbmQKZW5kKQoKc3Bhd24oZnVuY3Rpb24oKQpnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgaWYgX0cuQXV0b0NsaWNrIG9yIEZhc3RhdHRhY2sgdGhlbgogICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSdWaXJ0dWFsVXNlcic6Q2FwdHVyZUNvbnRyb2xsZXIoKQogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UnVmlydHVhbFVzZXInOkJ1dHRvbjFEb3duKFZlY3RvcjIubmV3KDAsMSwwLDEpKQogICAgICAgIGVuZCkKICAgIGVuZAplbmQpCmVuZCkKCmZ1bmN0aW9uIFN0b3BUd2Vlbih0YXJnZXQpCiAgICBpZiBub3QgdGFyZ2V0IHRoZW4KICAgICAgICBfRy5TdG9wVHdlZW4gPSB0cnVlCiAgICAgICAgd2FpdCgpCiAgICAgICAgQVR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSkKICAgICAgICB3YWl0KCkKICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydDpGaW5kRmlyc3RDaGlsZCgiQm9keUNsaXAiKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0OkZpbmRGaXJzdENoaWxkKCJCb2R5Q2xpcCIpOkRlc3Ryb3koKQogICAgICAgIGVuZAogICAgICAgIF9HLlN0b3BUd2VlbiA9IGZhbHNlCiAgICAgICAgX0cuQ2xpcCA9IGZhbHNlCiAgICBlbmQKICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoJ0hpZ2hsaWdodCcpIHRoZW4KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCdIaWdobGlnaHQnKTpEZXN0cm95KCkKICAgIGVuZAplbmQKCnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbyAgCiAgICAgICAgICAgICAgICBpZiB2OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJSZW1vdGVGdW5jdGlvblNob290IikgdGhlbiAKICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0V2VhcG9uR3VuID0gdi5OYW1lCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZCkKCmdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLklkbGVkOmNvbm5lY3QoZnVuY3Rpb24oKQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsVXNlciIpOkJ1dHRvbjJEb3duKFZlY3RvcjIubmV3KDAsMCksd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ0ZyYW1lKQogICAgd2FpdCgxKQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsVXNlciIpOkJ1dHRvbjJVcChWZWN0b3IyLm5ldygwLDApLHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNGcmFtZSkKZW5kKQoKZnVuY3Rpb24gRXF1aXBXZWFwb25Td29yZCgpCglwY2FsbChmdW5jdGlvbigpCgkJZm9yIGksdiBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KCQkJaWYgdi5Ub29sVGlwID09ICJTd29yZCIgYW5kIHY6SXNBKCdUb29sJykgdGhlbgoJCQkJbG9jYWwgVG9vbEh1bWFub2lkID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkgCgkJCQlnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbChUb29sSHVtYW5vaWQpIAoJCQllbmQKCQllbmQKCWVuZCkKZW5kCgpmdW5jdGlvbiBDaGVja1BpcmF0ZUJvYXQoKQogICAgbG9jYWwgY2hlY2ttbXBiID0geyJQaXJhdGVHcmFuZEJyaWdhZGUiLCAiUGlyYXRlQnJpZ2FkZSJ9CiAgICBmb3IgciwgdiBpbiBuZXh0LCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSBkbwogICAgICAgIGlmIHRhYmxlLmZpbmQoY2hlY2ttbXBiLCB2Lk5hbWUpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIZWFsdGgiKSBhbmQgdi5IZWFsdGguVmFsdWUgPiAwIHRoZW4KICAgICAgICAgICAgcmV0dXJuIHYKICAgICAgICBlbmQKICAgIGVuZAplbmQKCmZ1bmN0aW9uIENoZWNrUGlyYXRlQm9hdCgpCiAgICBsb2NhbCBjaGVja21tcGIgPSB7IkZpc2hCb2F0In0KICAgIGZvciByLCB2IGluIG5leHQsIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpIGRvCiAgICAgICAgaWYgdGFibGUuZmluZChjaGVja21tcGIsIHYuTmFtZSkgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkhlYWx0aCIpIGFuZCB2LkhlYWx0aC5WYWx1ZSA+IDAgdGhlbgogICAgICAgICAgICByZXR1cm4gdgogICAgICAgIGVuZAogICAgZW5kCmVuZAoKZnVuY3Rpb24gRXF1aXBBbGxXZWFwb24oKQoJcGNhbGwoZnVuY3Rpb24oKQoJCWZvciBpLHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCgkJCWlmIHY6SXNBKCdUb29sJykgYW5kIG5vdCAodi5OYW1lID09ICJTdW1tb24gU2VhIEJlYXN0IiBvciB2Lk5hbWUgPT0gIldhdGVyIEJvZHkiIG9yIHYuTmFtZSA9PSAiQXdha2VuaW5nIikgdGhlbgoJCQkJbG9jYWwgVG9vbEh1bWFub2lkID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHYuTmFtZSkgCgkJCQlnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbChUb29sSHVtYW5vaWQpIAogICAgICAgICAgICAgICAgd2FpdCgxKQoJCQllbmQKCQllbmQKCWVuZCkKZW5kCgpmdW5jdGlvbiBJbk15TmV0V29yayhvYmplY3QpCglpZiBpc25ldHdvcmtvd25lciB0aGVuCgkJcmV0dXJuIGlzbmV0d29ya293bmVyKG9iamVjdCkKCWVsc2UKCQlpZiAob2JqZWN0LlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gX0cuQnJpbmdNb2RlIHRoZW4gCgkJCXJldHVybiB0cnVlCgkJZW5kCgkJcmV0dXJuIGZhbHNlCgllbmQKZW5kCgpsb2NhbCBlbnYgPSAoZ2V0Z2VudiBvciBnZXRyZW52IG9yIGdldGZlbnYpKCkKbG9jYWwgcnMgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikKbG9jYWwgcGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIGNsaWVudCA9IHBsYXllcnMuTG9jYWxQbGF5ZXIKbG9jYWwgbW9kdWxlcyA9IHJzOldhaXRGb3JDaGlsZCgiTW9kdWxlcyIpCmxvY2FsIG5ldCA9IG1vZHVsZXM6V2FpdEZvckNoaWxkKCJOZXQiKQpsb2NhbCBjaGFyRm9sZGVyID0gd29ya3NwYWNlOldhaXRGb3JDaGlsZCgiQ2hhcmFjdGVycyIpCmxvY2FsIGVuZW15Rm9sZGVyID0gd29ya3NwYWNlOldhaXRGb3JDaGlsZCgiRW5lbWllcyIpCgpsb2NhbCBNb2R1bGUgPSB7CiAgICBBdHRhY2tDb29sZG93biA9IHRpY2soKQp9CmxvY2FsIENhY2hlZENoYXJzID0ge30KCmZ1bmN0aW9uIE1vZHVsZS5Jc0FsaXZlKENoYXI6IE1vZGVsPyk6IGJvb2xlYW4KICAgIGlmIG5vdCBDaGFyIHRoZW4gcmV0dXJuIG5pbCBlbmQKICAgIGlmIENhY2hlZENoYXJzW0NoYXJdIHRoZW4gcmV0dXJuIENhY2hlZENoYXJzW0NoYXJdLkhlYWx0aCA+IDAgZW5kCgogICAgbG9jYWwgSHVtID0gQ2hhcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikKICAgIENhY2hlZENoYXJzW0NoYXJdID0gSHVtCiAgICByZXR1cm4gSHVtIGFuZCBIdW0uSGVhbHRoID4gMAplbmQKCmxvY2FsIFNldHRpbmdzID0gewogICAgQ2xpY2tEZWxheSA9IDAuMDEsICAtLSDguJvguKPguLHguJrguYPguKvguYnguYDguKPguYfguKfguJfguLXguYjguKrguLjguJQKICAgIEF1dG9DbGljayA9IHRydWUKfQoKTW9kdWxlLkZhc3RBdHRhY2sgPSAoZnVuY3Rpb24oKQogICAgaWYgZW52Ll90cmFzaF9hdHRhY2sgdGhlbiByZXR1cm4gZW52Ll90cmFzaF9hdHRhY2sgZW5kCgogICAgbG9jYWwgQXR0YWNrTW9kdWxlID0gewogICAgICAgIE5leHRBdHRhY2sgPSAwLAogICAgICAgIERpc3RhbmNlID0gNTAsCiAgICAgICAgYXR0YWNrTW9icyA9IHRydWUsCiAgICAgICAgYXR0YWNrUGxheWVycyA9IHRydWUKICAgIH0KCiAgICBsb2NhbCBSZWdpc3RlckF0dGFjayA9IG5ldDpXYWl0Rm9yQ2hpbGQoIlJFL1JlZ2lzdGVyQXR0YWNrIikKICAgIGxvY2FsIFJlZ2lzdGVySGl0ID0gbmV0OldhaXRGb3JDaGlsZCgiUkUvUmVnaXN0ZXJIaXQiKQoKICAgIGZ1bmN0aW9uIEF0dGFja01vZHVsZTpBdHRhY2tFbmVteShFbmVteUhlYWQsIFRhYmxlKQogICAgICAgIGlmIEVuZW15SGVhZCBhbmQgY2xpZW50OkRpc3RhbmNlRnJvbUNoYXJhY3RlcihFbmVteUhlYWQuUG9zaXRpb24pIDwgc2VsZi5EaXN0YW5jZSB0aGVuCiAgICAgICAgICAgIGlmIG5vdCBzZWxmLkZpcnN0QXR0YWNrIHRoZW4KICAgICAgICAgICAgICAgIFJlZ2lzdGVyQXR0YWNrOkZpcmVTZXJ2ZXIoU2V0dGluZ3MuQ2xpY2tEZWxheSBvciAwLjAwMDEpICAtLSDguKXguJQgQ2xpY2tEZWxheSDguYPguKvguYnguJnguYnguK3guKLguKrguLjguJQKICAgICAgICAgICAgICAgIHNlbGYuRmlyc3RBdHRhY2sgPSB0cnVlCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBSZWdpc3RlckhpdDpGaXJlU2VydmVyKEVuZW15SGVhZCwgVGFibGUgb3Ige30pCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBmdW5jdGlvbiBBdHRhY2tNb2R1bGU6QXR0YWNrTmVhcmVzdCgpCiAgICAgICAgbG9jYWwgYXJncyA9IHtuaWwsIHt9fQogICAgICAgIGZvciBfLCBFbmVteSBpbiBlbmVteUZvbGRlcjpHZXRDaGlsZHJlbigpIGRvCiAgICAgICAgICAgIGlmIG5vdCBhcmdzWzFdIGFuZCBFbmVteTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIsIHRydWUpIGFuZCBjbGllbnQ6RGlzdGFuY2VGcm9tQ2hhcmFjdGVyKEVuZW15Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pIDwgc2VsZi5EaXN0YW5jZSB0aGVuCiAgICAgICAgICAgICAgICBhcmdzWzFdID0gRW5lbXk6RmluZEZpcnN0Q2hpbGQoIlVwcGVyVG9yc28iKQogICAgICAgICAgICBlbHNlaWYgRW5lbXk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiLCB0cnVlKSBhbmQgY2xpZW50OkRpc3RhbmNlRnJvbUNoYXJhY3RlcihFbmVteS5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSA8IHNlbGYuRGlzdGFuY2UgdGhlbgogICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGFyZ3NbMl0sIHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSBFbmVteSwKICAgICAgICAgICAgICAgICAgICBbMl0gPSBFbmVteTpGaW5kRmlyc3RDaGlsZCgiVXBwZXJUb3JzbyIpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKCiAgICAgICAgc2VsZjpBdHRhY2tFbmVteSh1bnBhY2soYXJncykpCgogICAgICAgIGZvciBfLCBFbmVteSBpbiBjaGFyRm9sZGVyOkdldENoaWxkcmVuKCkgZG8KICAgICAgICAgICAgaWYgRW5lbXkgfj0gY2xpZW50LkNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgICAgICBzZWxmOkF0dGFja0VuZW15KEVuZW15OkZpbmRGaXJzdENoaWxkKCJVcHBlclRvcnNvIikpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAoKICAgICAgICBpZiBub3Qgc2VsZi5GaXJzdEF0dGFjayB0aGVuCiAgICAgICAgICAgIHRhc2sud2FpdCgwLjAxKSAgLS0g4Lil4LiU4LmA4Lin4Lil4Liy4Lij4Liw4Lir4Lin4LmI4Liy4LiH4LiB4Liy4Lij4LmC4LiI4Lih4LiV4Li14LmD4Lir4LmJ4LmA4Lij4LmH4Lin4LiX4Li14LmI4Liq4Li44LiUCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBmdW5jdGlvbiBBdHRhY2tNb2R1bGU6QmxhZGVIaXRzKCkKICAgICAgICBzZWxmOkF0dGFja05lYXJlc3QoKQogICAgICAgIHNlbGYuRmlyc3RBdHRhY2sgPSBmYWxzZQogICAgZW5kCgogICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgdGFzay53YWl0KFNldHRpbmdzLkNsaWNrRGVsYXkgb3IgMC4wMDAxKSBkbyAgLS0g4Lil4LiU4LmA4Lin4Lil4Liy4Lij4Liw4Lir4Lin4LmI4Liy4LiH4LiB4Liy4Lij4LiV4Lij4Lin4LiI4Liq4Lit4Lia4LmD4Lir4LmJ4LmA4Lij4LmH4Lin4Liq4Li44LiUCiAgICAgICAgICAgIGlmICh0aWNrKCkgLSBNb2R1bGUuQXR0YWNrQ29vbGRvd24pIDwgMC4wNSB0aGVuIGNvbnRpbnVlIGVuZCAgLS0g4Lil4LiU4LmA4Lin4Lil4Liy4LmD4LiZ4LiB4Liy4Lij4Lij4Lit4Lij4Liw4Lir4Lin4LmI4Liy4LiH4LiB4Liy4Lij4LmC4LiI4Lih4LiV4Li1CiAgICAgICAgICAgIGlmIG5vdCBTZXR0aW5ncy5BdXRvQ2xpY2sgdGhlbiBjb250aW51ZSBlbmQKICAgICAgICAgICAgaWYgbm90IE1vZHVsZS5Jc0FsaXZlKGNsaWVudC5DaGFyYWN0ZXIpIHRoZW4gY29udGludWUgZW5kCiAgICAgICAgICAgIGlmIG5vdCBjbGllbnQuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiVG9vbCIpIHRoZW4gY29udGludWUgZW5kCgogICAgICAgICAgICAtLSDguYDguKPguLXguKLguIHguJ/guLHguIfguIHguYzguIrguLHguJkgQmxhZGVIaXRzIOC4l+C4uOC4geC4hOC4o+C4seC5ieC4h+C4l+C4teC5iOC4quC4suC4oeC4suC4o+C4luC5guC4iOC4oeC4leC4teC5hOC4lOC5iQogICAgICAgICAgICBBdHRhY2tNb2R1bGU6QmxhZGVIaXRzKCkKICAgICAgICBlbmQKICAgIGVuZCkKCiAgICBlbnYuX3RyYXNoX2F0dGFjayA9IEF0dGFja01vZHVsZQogICAgcmV0dXJuIEF0dGFja01vZHVsZQplbmQpKCkKCmlmIFdvcmxkMSB0aGVuIApfRy5TZWxlY3RXZWFwb24gPSAiTWVsZWUiCl9HLkF1dG9GYXJtID0gdHJ1ZQpTdG9wVHdlZW4oX0cuQXV0b0Zhcm0pCgkJaWYgX0cuQXV0b0Zhcm0gPT0gdHJ1ZSB0aGVuCgkJCXNldGZwc2NhcCgyNDApCgkJZWxzZWlmIF9HLkF1dG9GYXJtID09IGZhbHNlIHRoZW4KCQlzZXRmcHNjYXAoMjQwKQoJCWVuZApzZXRmcHNjYXAoMjQwKQpfRy5YRVJVTktBSVRVTiA9IHZhbHVlCl9HLkZhc3RGYXJtTW9kZSA9IHZhbHVlCmxvY2FsIGRlY2Fsc3llZXRlZCA9IHRydWUKbG9jYWwgZyA9IGdhbWUKbG9jYWwgdyA9IGcuV29ya3NwYWNlCmxvY2FsIGwgPSBnLkxpZ2h0aW5nCmxvY2FsIHQgPSB3LlRlcnJhaW4KdC5XYXRlcldhdmVTaXplID0gMAp0LldhdGVyV2F2ZVNwZWVkID0gMAp0LldhdGVyUmVmbGVjdGFuY2UgPSAwCnQuV2F0ZXJUcmFuc3BhcmVuY3kgPSAwCmwuR2xvYmFsU2hhZG93cyA9IGZhbHNlCmwuRm9nRW5kID0gOWU5CmwuQnJpZ2h0bmVzcyA9IDAKc2V0dGluZ3MoKS5SZW5kZXJpbmcuUXVhbGl0eUxldmVsID0gIkxldmVsMDEiCmZvciBpLCB2IGluIHBhaXJzKGc6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgIGlmIHY6SXNBKCJQYXJ0Iikgb3IgdjpJc0EoIlVuaW9uIikgb3IgdjpJc0EoIkNvcm5lcldlZGdlUGFydCIpIG9yIHY6SXNBKCJUcnVzc1BhcnQiKSB0aGVuCiAgICAgICAgdi5NYXRlcmlhbCA9ICJQbGFzdGljIgogICAgICAgIHYuUmVmbGVjdGFuY2UgPSAwCiAgICBlbHNlaWYgdjpJc0EoIkRlY2FsIikgb3IgdjpJc0EoIlRleHR1cmUiKSBhbmQgZGVjYWxzeWVldGVkIHRoZW4KICAgICAgICB2LlRyYW5zcGFyZW5jeSA9IDEKICAgIGVsc2VpZiB2OklzQSgiUGFydGljbGVFbWl0dGVyIikgb3IgdjpJc0EoIlRyYWlsIikgdGhlbgogICAgICAgIHYuTGlmZXRpbWUgPSBOdW1iZXJSYW5nZS5uZXcoMCkKICAgIGVsc2VpZiB2OklzQSgiRXhwbG9zaW9uIikgdGhlbgogICAgICAgIHYuQmxhc3RQcmVzc3VyZSA9IDEKICAgICAgICB2LkJsYXN0UmFkaXVzID0gMQogICAgZWxzZWlmIHY6SXNBKCJGaXJlIikgb3IgdjpJc0EoIlNwb3RMaWdodCIpIG9yIHY6SXNBKCJTbW9rZSIpIHRoZW4KICAgICAgICB2LkVuYWJsZWQgPSBmYWxzZQogICAgZWxzZWlmIHY6SXNBKCJNZXNoUGFydCIpIHRoZW4KICAgICAgICB2Lk1hdGVyaWFsID0gIlBsYXN0aWMiCiAgICAgICAgdi5SZWZsZWN0YW5jZSA9IDAKICAgICAgICB2LlRleHR1cmVJRCA9IDEwMzg1OTAyNzU4NzI4OTU3CiAgICBlbmQKZW5kCmZvciBpLCBlIGluIHBhaXJzKGw6R2V0Q2hpbGRyZW4oKSkgZG8KICAgIGlmIGU6SXNBKCJCbHVyRWZmZWN0Iikgb3IgZTpJc0EoIlN1blJheXNFZmZlY3QiKSBvciBlOklzQSgiQ29sb3JDb3JyZWN0aW9uRWZmZWN0Iikgb3IgZTpJc0EoIkJsb29tRWZmZWN0Iikgb3IgZTpJc0EoIkRlcHRoT2ZGaWVsZEVmZmVjdCIpIHRoZW4KICAgICAgICBlLkVuYWJsZWQgPSBmYWxzZQogICAgZW5kCmVuZAogICAgZW5kCgppZiBXb3JsZDIgdGhlbiAKX0cuU2VsZWN0V2VhcG9uID0gIk1lbGVlIgpfRy5BdXRvRmFybSA9IHRydWUKU3RvcFR3ZWVuKF9HLkF1dG9GYXJtKQpzZXRmcHNjYXAoMjQwKQpfRy5YRVJVTktBSVRVTiA9IHZhbHVlCl9HLkR1biA9IHZhbHVlCmVuZAoKaWYgV29ybGQzIHRoZW4gCl9HLlNlbGVjdFdlYXBvbiA9ICJNZWxlZSIKX0cuQXV0b0Zhcm0gPSB0cnVlClN0b3BUd2VlbihfRy5BdXRvRmFybSkKc2V0ZnBzY2FwKDI0MCkKX0cuWEVSVU5LQUlUVU4gPSB2YWx1ZQpfRy5EdW4gPSB2YWx1ZQplbmQKCkZhcm1Nb2RlID0gRmFybU1vZGUgb3IgIlF1ZXN0IgpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBGYXJtTW9kZSA9PSAiUXVlc3QiIGFuZCBfRy5BdXRvRmFybSB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGxvY2FsIFF1ZXN0VGl0bGUgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0CiAgICAgICAgICAgICAgICBpZiBub3Qgc3RyaW5nLmZpbmQoUXVlc3RUaXRsZSwgTmFtZU1vbikgdGhlbgogICAgICAgICAgICAgICAgICAgIFN0YXJ0TWFnbmV0ID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJBYmFuZG9uUXVlc3QiKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlIHRoZW4KICAgICAgICAgICAgICAgICAgICBTdGFydE1hZ25ldCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgQ2hlY2tRdWVzdCgpCiAgICAgICAgICAgICAgICAgICAgaWYgQnlwYXNzVFAgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBDRnJhbWVRdWVzdC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMTUwMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgQlRQKENGcmFtZVF1ZXN0KQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gQ0ZyYW1lUXVlc3QuUG9zaXRpb24pLk1hZ25pdHVkZSA8IDE1MDAgdGhlbgogICAgICAgICAgICAgICAgICAgIEFUd2VlbihDRnJhbWVRdWVzdCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBBVHdlZW4oQ0ZyYW1lUXVlc3QpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGlmIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBDRnJhbWVRdWVzdC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDUgdGhlbgogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0YXJ0UXVlc3QiLE5hbWVRdWVzdCxMZXZlbFF1ZXN0KQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gdHJ1ZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgQ2hlY2tRdWVzdCgpCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKE1vbikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSBNb24gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCBOYW1lTW9uKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgdGFzay53YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFdlYXBvbihfRy5TZWxlY3RXZWFwb24pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9zTW9uID0gdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkLldhbGtTcGVlZCA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg3MCw3MCw3MCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdGFydE1hZ25ldCA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UnVmlydHVhbFVzZXInOkNhcHR1cmVDb250cm9sbGVyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UnVmlydHVhbFVzZXInOkJ1dHRvbjFEb3duKFZlY3RvcjIubmV3KDEyODAsIDY3MikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b0Zhcm0gb3Igdi5IdW1hbm9pZC5IZWFsdGggPD0gMCBvciBub3Qgdi5QYXJlbnQgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdGFydE1hZ25ldCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJBYmFuZG9uUXVlc3QiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIEFUd2VlbihDRnJhbWVNb24pCiAgICAgICAgICAgICAgICAgICAgICAgIFVuRXF1aXBXZWFwb24oX0cuU2VsZWN0V2VhcG9uKQogICAgICAgICAgICAgICAgICAgICAgICBTdGFydE1hZ25ldCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZChNb24pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgIEFUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoTW9uKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMTUsMTAsMikpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgIGVuZAplbmQpCnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIEZhcm1Nb2RlID09ICJObyBRdWVzdCIgYW5kIF9HLkF1dG9GYXJtIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgbG9jYWwgUXVlc3RUaXRsZSA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQKICAgICAgICAgICAgICAgIGlmIG5vdCBzdHJpbmcuZmluZChRdWVzdFRpdGxlLCBOYW1lTW9uKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgU3RhcnRNYWduZXQgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFiYW5kb25RdWVzdCIpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gZmFsc2UgdGhlbgogICAgICAgICAgICAgICAgICAgIFN0YXJ0TWFnbmV0ID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICBDaGVja1F1ZXN0KCkKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdGFydFF1ZXN0IixOYW1lUXVlc3QsTGV2ZWxRdWVzdCkKICAgICAgICAgICAgICAgICAgICBpZiBCeXBhc3NUUCB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIENGcmFtZU1vbi5Qb3NpdGlvbikuTWFnbml0dWRlID4gMTUwMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgQlRQKENGcmFtZU1vbikKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIENGcmFtZU1vbi5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMTUwMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgQVR3ZWVuKENGcmFtZU1vbikKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBBVHdlZW4oQ0ZyYW1lTW9uKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSB0cnVlIHRoZW4KICAgICAgICAgICAgICAgICAgICBDaGVja1F1ZXN0KCkKICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoTW9uKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09IE1vbiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsIE5hbWVNb24pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCB0YXNrLndhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwV2VhcG9uKF9HLlNlbGVjdFdlYXBvbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3NNb24gPSB2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQVR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSGVhZC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDcwLDcwLDcwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXJ0TWFnbmV0ID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSdWaXJ0dWFsVXNlcic6Q2FwdHVyZUNvbnRyb2xsZXIoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSdWaXJ0dWFsVXNlcic6QnV0dG9uMURvd24oVmVjdG9yMi5uZXcoMTI4MCwgNjcyKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvRmFybSBvciB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwIG9yIG5vdCB2LlBhcmVudCBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXJ0TWFnbmV0ID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFiYW5kb25RdWVzdCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgQVR3ZWVuKENGcmFtZU1vbikKICAgICAgICAgICAgICAgICAgICAgICAgVW5FcXVpcFdlYXBvbihfRy5TZWxlY3RXZWFwb24pCiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXJ0TWFnbmV0ID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKE1vbikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgQVR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZChNb24pLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygxNSwxMCwyKSkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kCmVuZCkKX0cuQVVUT0hBS0kgPSB0cnVlCnNwYXduKGZ1bmN0aW9uKCkKCXdoaWxlIHdhaXQoLjEpIGRvCgkJaWYgX0cuQVVUT0hBS0kgdGhlbiAKCQkJaWYgbm90IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkhhc0J1c28iKSB0aGVuCgkJCQlsb2NhbCBhcmdzID0gewoJCQkJCVsxXSA9ICJCdXNvIgoJCQkJfQoJCQkJZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpCgkJCWVuZAoJCWVuZAoJZW5kCmVuZCkKX0cuQXV0b1NldFNwYXduID0gdHJ1ZQpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9TZXRTcGF3biB0aGVuCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU2V0U3Bhd25Qb2ludCIpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZCkKX0cuQnJpbmdNb25zdGVyID0gdHJ1ZQpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQnJpbmdNb25zdGVyIHRoZW4KICAgICAgICAgICAgICAgIENoZWNrUXVlc3QoKQogICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiBfRy5BdXRvRmFybSBhbmQgU3RhcnRNYWduZXQgYW5kIHYuTmFtZSA9PSBNb24gYW5kIChNb24gPT0gIkZhY3RvcnkgU3RhZmYiIG9yIE1vbiA9PSAiTW9ua2V5IiBvciBNb24gPT0gIkRyYWdvbiBDcmV3IFdhcnJpb3IiIG9yIE1vbiA9PSAiRHJhZ29uIENyZXcgQXJjaGVyIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIGFuZCAodi5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAyMjAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLDUwLDUwKQogICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gUG9zTW9uCiAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdi5IZWFkLkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQuQW5pbWF0b3I6RGVzdHJveSgpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBzZXRoaWRkZW5wcm9wZXJ0eShnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllciwiU2ltdWxhdGlvblJhZGl1cyIsbWF0aC5odWdlKQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBfRy5BdXRvRmFybSBhbmQgU3RhcnRNYWduZXQgYW5kIHYuTmFtZSA9PSBNb24gYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIGFuZCAodi5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSBfRy5CcmluZ01vZGUgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLDUwLDUwKQogICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gUG9zTW9uCiAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdi5IZWFkLkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQuQW5pbWF0b3I6RGVzdHJveSgpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBzZXRoaWRkZW5wcm9wZXJ0eShnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllciwiU2ltdWxhdGlvblJhZGl1cyIsbWF0aC5odWdlKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgIGVuZAplbmQpCnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5CcmluZ01vbnN0ZXIgdGhlbgogICAgICAgICAgICAgICAgQ2hlY2tRdWVzdCgpCiAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIF9HLkF1dG9GYXJtIGFuZCBTdGFydE1hZ25ldCBhbmQgdi5OYW1lID09IE1vbiBhbmQgKE1vbiA9PSAiRmFjdG9yeSBTdGFmZiIgb3IgTW9uID09ICJNb25rZXkiIG9yIE1vbiA9PSAiRHJhZ29uIENyZXcgV2FycmlvciIgb3IgTW9uID09ICJEcmFnb24gQ3JldyBBcmNoZXIiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgYW5kICh2Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDI1MCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoMTUwLDE1MCwxNTApCiAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBQb3NNb24KICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkKICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLCJTaW11bGF0aW9uUmFkaXVzIixtYXRoLmh1Z2UpCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIF9HLkF1dG9GYXJtIGFuZCBTdGFydE1hZ25ldCBhbmQgdi5OYW1lID09IE1vbiBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgYW5kICh2Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IF9HLkJyaW5nTW9kZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoMTUwLDE1MCwxNTApCiAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBQb3NNb24KICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkKICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLCJTaW11bGF0aW9uUmFkaXVzIixtYXRoLmh1Z2UpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgX0cuQXV0b0VjdG9wbGFzbSBhbmQgU3RhcnRFY3RvcGxhc21NYWduZXQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2Lk5hbWUsICJTaGlwIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIGFuZCAodi5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gRWN0b3BsYXNtTW9uLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gX0cuQnJpbmdNb2RlIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsNTAsNTApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gRWN0b3BsYXNtTW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IZWFkLkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5IdW1hbm9pZDpGaW5kRmlyc3RDaGlsZCgiQW5pbWF0b3IiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIsICJTaW11bGF0aW9uUmFkaXVzIiwgbWF0aC5odWdlKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiBfRy5BdXRvUmVuZ29rdSBhbmQgU3RhcnRSZW5nb2t1TWFnbmV0IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYuTmFtZSA9PSAiU25vdyBMdXJrZXIiIG9yIHYuTmFtZSA9PSAiQXJjdGljIFdhcnJpb3IiKSBhbmQgKHYuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFJlbmdva3VNb24uUG9zaXRpb24pLk1hZ25pdHVkZSA8PSBfRy5CcmluZ01vZGUgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoMTUwMCwxNTAwLDE1MDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IZWFkLkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IFJlbmdva3VNb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQuQW5pbWF0b3I6RGVzdHJveSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgX0cuQXV0b011c2tldGVlckhhdCBhbmQgU3RhcnRNYWduZXRNdXNrZXRlZXJoYXQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIkZvcmVzdCBQaXJhdGUiIGFuZCAodi5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gTXVza2V0ZWVySGF0TW9uLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gX0cuQnJpbmdNb2RlIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLDUwLDUwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSGVhZC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBNdXNrZXRlZXJIYXRNb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQuQW5pbWF0b3I6RGVzdHJveSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgX0cuQXV0b09ic2VydmF0aW9uSGFraVYyIGFuZCBNYW5nbmV0Y2l0emVubW9uIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJGb3Jlc3QgUGlyYXRlIiBhbmQgKHYuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIE11c2tldGVlckhhdE1vbi5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IF9HLkJyaW5nTW9kZSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCw1MCw1MCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gUG9zSGVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRoaWRkZW5wcm9wZXJ0eShnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllciwgIlNpbXVsYXRpb25SYWRpdXMiLCBtYXRoLmh1Z2UpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIF9HLkF1dG9fRXZvUmFjZSBhbmQgU3RhcnRFdm9NYWduZXQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIlpvbWJpZSIgYW5kICh2Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBQb3NNb25Fdm8uUG9zaXRpb24pLk1hZ25pdHVkZSA8PSBfRy5CcmluZ01vZGUgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsNTAsNTApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IZWFkLkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IFBvc01vbkV2bwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5IdW1hbm9pZDpGaW5kRmlyc3RDaGlsZCgiQW5pbWF0b3IiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIsICJTaW11bGF0aW9uUmFkaXVzIiwgbWF0aC5odWdlKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiBfRy5BdXRvQmFydGlsbyBhbmQgQXV0b0JhcnRpbG9CcmluZyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiU3dhbiBQaXJhdGUiIGFuZCAodi5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gUG9zTW9uQmFydG8uUG9zaXRpb24pLk1hZ25pdHVkZSA8PSBfRy5CcmluZ01vZGUgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsNTAsNTApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IZWFkLkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IFBvc01vbkJhcnRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRoaWRkZW5wcm9wZXJ0eShnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllciwgIlNpbXVsYXRpb25SYWRpdXMiLCBtYXRoLmh1Z2UpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIF9HLkF1dG9GYXJtRnJ1aXRNYXN0ZXJ5IGFuZCBTdGFydE1hc3RlcnlGcnVpdE1hZ25ldCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiTW9ua2V5IiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodi5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gUG9zTW9uTWFzdGVyeUZydWl0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gX0cuQnJpbmdNb2RlIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCw1MCw1MCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IFBvc01vbk1hc3RlcnlGcnVpdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgdi5OYW1lID09ICJGYWN0b3J5IFN0YWZmIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodi5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gUG9zTW9uTWFzdGVyeUZydWl0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gX0cuQnJpbmdNb2RlIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCw1MCw1MCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IFBvc01vbk1hc3RlcnlGcnVpdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgdi5OYW1lID09IE1vbiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodi5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gUG9zTW9uTWFzdGVyeUZydWl0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gX0cuQnJpbmdNb2RlIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCw1MCw1MCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IFBvc01vbk1hc3RlcnlGcnVpdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiBfRy5BdXRvRmFybUd1bk1hc3RlcnkgYW5kIFN0YXJ0TWFzdGVyeUd1bk1hZ25ldCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAiTW9ua2V5IiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodi5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gUG9zTW9uTWFzdGVyeUd1bi5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IF9HLkJyaW5nTW9kZSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsNTAsNTApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IZWFkLkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBQb3NNb25NYXN0ZXJ5R3VuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5IdW1hbm9pZDpGaW5kRmlyc3RDaGlsZCgiQW5pbWF0b3IiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQuQW5pbWF0b3I6RGVzdHJveSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIsICJTaW11bGF0aW9uUmFkaXVzIiwgbWF0aC5odWdlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiB2Lk5hbWUgPT0gIkZhY3RvcnkgU3RhZmYiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBQb3NNb25NYXN0ZXJ5R3VuLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gX0cuQnJpbmdNb2RlIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCw1MCw1MCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IFBvc01vbk1hc3RlcnlHdW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRoaWRkZW5wcm9wZXJ0eShnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllciwgIlNpbXVsYXRpb25SYWRpdXMiLCBtYXRoLmh1Z2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHYuTmFtZSA9PSBNb24gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFBvc01vbk1hc3RlcnlHdW4uUG9zaXRpb24pLk1hZ25pdHVkZSA8PSBfRy5CcmluZ01vZGUgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLDUwLDUwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSGVhZC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gUG9zTW9uTWFzdGVyeUd1bgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiBfRy5BdXRvX0JvbmUgYW5kIFN0YXJ0TWFnbmV0Qm9uZU1vbiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2Lk5hbWUgPT0gIlJlYm9ybiBTa2VsZXRvbiIgb3Igdi5OYW1lID09ICJMaXZpbmcgWm9tYmllIiBvciB2Lk5hbWUgPT0gIkRlbW9uaWMgU291bCIgb3Igdi5OYW1lID09ICJQb3Nlc3NlZCBNdW1teSIpIGFuZCAodi5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gUG9zTW9uQm9uZS5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IF9HLkJyaW5nTW9kZSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCw1MCw1MCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gUG9zTW9uQm9uZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5IdW1hbm9pZDpGaW5kRmlyc3RDaGlsZCgiQW5pbWF0b3IiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIsICJTaW11bGF0aW9uUmFkaXVzIiwgbWF0aC5odWdlKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiBfRy5BdXRvRmFybUNhbmR5IGFuZCBTdGFydENhbmR5TWFnbmV0IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYuTmFtZSA9PSAiSWNlIENyZWFtIENoZWYiIG9yIHYuTmFtZSA9PSAiSWNlIENyZWFtIENvbW1hbmRlciIpIGFuZCAodi5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gQ2FuZHlNb24uUG9zaXRpb24pLk1hZ25pdHVkZSA8PSBfRy5CcmluZ01vZGUgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsNTAsNTApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IZWFkLkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IENhbmR5TW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRoaWRkZW5wcm9wZXJ0eShnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllciwgIlNpbXVsYXRpb25SYWRpdXMiLCBtYXRoLmh1Z2UpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIFN0YXJkRmFybSBhbmQgRmFybU1hZyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2Lk5hbWUgPT0gIkNvY29hIFdhcnJpb3IiIG9yIHYuTmFtZSA9PSAiQ2hvY29sYXRlIEJhciBCYXR0bGVyIiBvciB2Lk5hbWUgPT0gIlN3ZWV0IFRoaWVmIiBvciB2Lk5hbWUgPT0gIkNhbmR5IFJlYmVsIikgYW5kICh2Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBQb3NHRy5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDI1MCBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCw1MCw1MCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gUG9zR0cKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQuQW5pbWF0b3I6RGVzdHJveSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgX0cuRmFzdEZhcm1Nb2RlIGFuZCBTdGFyZE1hZyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2Lk5hbWUgPT0gIlNoYW5kYSIgb3Igdi5OYW1lID09ICJTaGFuZGEiKSBhbmQgKHYuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIEZhc3RNb24uUG9zaXRpb24pLk1hZ25pdHVkZSA8PSBfRy5CcmluZ01vZGUgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsNTAsNTApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDE0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IZWFkLkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IEZhc3RNb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQuQW5pbWF0b3I6RGVzdHJveSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgX0cuQXV0b0RvdWdodEJvc3MgYW5kIE1hZ25ldERvdWdodCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2Lk5hbWUgPT0gIkNvb2tpZSBDcmFmdGVyIiBvciB2Lk5hbWUgPT0gIkNha2UgR3VhcmQiIG9yIHYuTmFtZSA9PSAiQmFraW5nIFN0YWZmIiBvciB2Lk5hbWUgPT0gIkhlYWQgQmFrZXIiKSBhbmQgKHYuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFBvc01vbkRvdWdodE9wZW5Eb29yLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gX0cuQnJpbmdNb2RlIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLDUwLDUwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSGVhZC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBQb3NNb25Eb3VnaHRPcGVuRG9vcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5IdW1hbm9pZDpGaW5kRmlyc3RDaGlsZCgiQW5pbWF0b3IiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIsICJTaW11bGF0aW9uUmFkaXVzIiwgbWF0aC5odWdlKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbmQKZW5kKQp0YXNrLnNwYXduKGZ1bmN0aW9uKCkKCXdoaWxlIHRydWUgZG8gd2FpdCgpCgkJaWYgc2V0c2NyaXB0YWJsZSB0aGVuCgkJCXNldHNjcmlwdGFibGUoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIHRydWUpCgkJZW5kCgkJaWYgc2V0aGlkZGVucHJvcGVydHkgdGhlbgoJCQlzZXRoaWRkZW5wcm9wZXJ0eShnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIsICJTaW11bGF0aW9uUmFkaXVzIiwgbWF0aC5odWdlKQoJCWVuZAoJZW5kCmVuZCkKdGFzay5zcGF3bihmdW5jdGlvbigpCgl3aGlsZSB0YXNrLndhaXQoKSBkbwoJCXBjYWxsKGZ1bmN0aW9uKCkKCQkJaWYgTWFrb3JpR2F5TWFnIGFuZCBfRy5CcmluZ01vbnN0ZXIgdGhlbgoJCQkJZm9yIGksdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCgkJCQkJaWYgbm90IHN0cmluZy5maW5kKHYuTmFtZSwiQm9zcyIpIGFuZCAodi5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gX0cuQnJpbmdNb2RlIHRoZW4KCQkJCQkJaWYgSW5NeU5ldFdvcmsodi5IdW1hbm9pZFJvb3RQYXJ0KSB0aGVuCgkJCQkJCQl2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gUG9zR2F5CgkJCQkJCQl2Lkh1bWFub2lkLkp1bXBQb3dlciA9IDAKCQkJCQkJCXYuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMAoJCQkJCQkJdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkKCQkJCQkJCXYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxCgkJCQkJCQl2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlCgkJCQkJCQl2LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlCgkJCQkJCQlpZiB2Lkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpIHRoZW4KCQkJCQkJCQl2Lkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKQoJCQkJCQkJZW5kCgkJCQkJCQl2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQoJCQkJCQkJdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkKCQkJCQkJZW5kCgkJCQkJZW5kCgkJCQllbmQKCQkJZW5kCgkJZW5kKQoJZW5kCmVuZCkKdGFzay5zcGF3bihmdW5jdGlvbigpCgl3aGlsZSB0YXNrLndhaXQoKSBkbwoJCXBjYWxsKGZ1bmN0aW9uKCkKCQkJaWYgX0cuQXV0b1N3b3JkTWFzdGVyeSBhbmQgQXV0b1N3b3JkTWFzdGVyeU1hZyBhbmQgX0cuQnJpbmdNb25zdGVyIHRoZW4KCQkJCWZvciBpLHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwoJCQkJCWlmIG5vdCBzdHJpbmcuZmluZCh2Lk5hbWUsIkJvc3MiKSBhbmQgKHYuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IF9HLkJyaW5nTW9kZSB0aGVuCgkJCQkJCWlmIEluTXlOZXRXb3JrKHYuSHVtYW5vaWRSb290UGFydCkgdGhlbgoJCQkJCQkJdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IFBvc01vbgoJCQkJCQkJdi5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwCgkJCQkJCQl2Lkh1bWFub2lkLldhbGtTcGVlZCA9IDAKCQkJCQkJCXYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsNjAsNjApCgkJCQkJCQl2Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMQoJCQkJCQkJdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQoJCQkJCQkJdi5IZWFkLkNhbkNvbGxpZGUgPSBmYWxzZQoJCQkJCQkJaWYgdi5IdW1hbm9pZDpGaW5kRmlyc3RDaGlsZCgiQW5pbWF0b3IiKSB0aGVuCgkJCQkJCQkJdi5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCkKCQkJCQkJCWVuZAoJCQkJCQkJdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSkKCQkJCQkJCXYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpCgkJCQkJCWVuZAoJCQkJCWVuZAoJCQkJZW5kCgkJCWVuZAoJCWVuZCkKCWVuZAplbmQpCnRhc2suc3Bhd24oZnVuY3Rpb24oKQoJd2hpbGUgdGFzay53YWl0KCkgZG8KCQlwY2FsbChmdW5jdGlvbigpCgkJCWlmIE1pbl9YVF9Jc19LYWsgYW5kIF9HLkJyaW5nTW9uc3RlciB0aGVuCgkJCQlmb3IgaSx2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KCQkJCQlpZiBub3Qgc3RyaW5nLmZpbmQodi5OYW1lLCJCb3NzIikgYW5kICh2Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSBfRy5CcmluZ01vZGUgdGhlbgoJCQkJCQlpZiBJbk15TmV0V29yayh2Lkh1bWFub2lkUm9vdFBhcnQpIHRoZW4KCQkJCQkJCXYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBQb3NOYXJhdGhpd2F0CgkJCQkJCQl2Lkh1bWFub2lkLkp1bXBQb3dlciA9IDAKCQkJCQkJCXYuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMAoJCQkJCQkJdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkKCQkJCQkJCXYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxCgkJCQkJCQl2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlCgkJCQkJCQl2LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlCgkJCQkJCQlpZiB2Lkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpIHRoZW4KCQkJCQkJCQl2Lkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKQoJCQkJCQkJZW5kCgkJCQkJCQl2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQoJCQkJCQkJdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkKCQkJCQkJZW5kCgkJCQkJZW5kCgkJCQllbmQKCQkJZW5kCgkJZW5kKQoJZW5kCmVuZCkKdGFzay5zcGF3bihmdW5jdGlvbigpCgl3aGlsZSB0YXNrLndhaXQoKSBkbwoJCXBjYWxsKGZ1bmN0aW9uKCkKCQkJaWYgX0cuQXV0b0Zhcm1OZWFyZXN0IGFuZCBBdXRvRmFybU5lYXJlc3RNYWduZXQgb3IgU2VsZWN0TWFnIGFuZCBfRy5CcmluZ01vbnN0ZXIgdGhlbgoJCQkJZm9yIGksdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCgkJCQkJaWYgbm90IHN0cmluZy5maW5kKHYuTmFtZSwiQm9zcyIpIGFuZCAodi5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gX0cuQnJpbmdNb2RlIHRoZW4KCQkJCQkJaWYgSW5NeU5ldFdvcmsodi5IdW1hbm9pZFJvb3RQYXJ0KSB0aGVuCgkJCQkJCQl2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gUG9zTW9uCgkJCQkJCQl2Lkh1bWFub2lkLkp1bXBQb3dlciA9IDAKCQkJCQkJCXYuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMAoJCQkJCQkJdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkKCQkJCQkJCXYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxCgkJCQkJCQl2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlCgkJCQkJCQl2LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlCgkJCQkJCQlpZiB2Lkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpIHRoZW4KCQkJCQkJCQl2Lkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKQoJCQkJCQkJZW5kCgkJCQkJCQl2Lkh1bWFub2lkOkNoYW5nZVN0YXRlKDExKQoJCQkJCQkJdi5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCkKCQkJCQkJZW5kCgkJCQkJZW5kCgkJCQllbmQKCQkJZW5kCgkJZW5kKQoJZW5kCmVuZCkKaWYgV29ybGQxIHRoZW4gCl9HLkJyaW5nTW9kZSA9IDMwMAplbmQKaWYgV29ybGQyIHRoZW4gCl9HLkJyaW5nTW9kZSA9IDI1MAplbmQKaWYgV29ybGQzIHRoZW4gCl9HLkJyaW5nTW9kZSA9IDIzMAplbmQKX0cuQXV0b1N1cGVyaHVtYW4gPSB0cnVlCmlmIFdvcmxkMyB0aGVuIApfRy5BdXRvRHJhZ29uVGFsb24gPSB0cnVlCl9HLkF1dG9FbGVjdHJpY0NsYXcgPSB0cnVlCmVuZApTdG9wVHdlZW4oX0cuQXV0b0VsZWN0cmljQ2xhdykKc3Bhd24oZnVuY3Rpb24oKQoJd2hpbGUgd2FpdCgpIGRvCglwY2FsbChmdW5jdGlvbigpCgkgIGlmIF9HLlNlbGVjdFdlYXBvbiA9PSAiTWVsZWUiIHRoZW4KCSAgZm9yIGkgLHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCgkgIGlmIHYuVG9vbFRpcCA9PSAiTWVsZWUiIHRoZW4KCSAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHRvc3RyaW5nKHYuTmFtZSkpIHRoZW4KCQlfRy5TZWxlY3RXZWFwb24gPSB2Lk5hbWUKCSAgZW5kCgkgIGVuZAoJICBlbmQKCSAgZWxzZWlmIF9HLlNlbGVjdFdlYXBvbiA9PSAiU3dvcmQiIHRoZW4KCSAgZm9yIGkgLHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCgkgIGlmIHYuVG9vbFRpcCA9PSAiU3dvcmQiIHRoZW4KCSAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHRvc3RyaW5nKHYuTmFtZSkpIHRoZW4KCQlfRy5TZWxlY3RXZWFwb24gPSB2Lk5hbWUKCSAgZW5kCgkgIGVuZAoJICBlbmQKCSAgZWxzZWlmIF9HLlNlbGVjdFdlYXBvbiA9PSAiRGV2aWwgRnJ1aXQiIHRoZW4KCSAgZm9yIGkgLHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCgkgIGlmIHYuVG9vbFRpcCA9PSAiQmxveCBGcnVpdCIgdGhlbgoJICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQodG9zdHJpbmcodi5OYW1lKSkgdGhlbgoJCV9HLlNlbGVjdFdlYXBvbiA9IHYuTmFtZQoJICBlbmQKCSAgZW5kCgkgIGVuZAoJICBlbHNlaWYgX0cuU2VsZWN0V2VhcG9uID09ICJHdW4iIHRoZW4KCSAgZm9yIGkgLHYgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCgkgIGlmIHYuVG9vbFRpcCA9PSAiR3VuIiB0aGVuCgkgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCh0b3N0cmluZyh2Lk5hbWUpKSB0aGVuCgkJX0cuU2VsZWN0V2VhcG9uID0gdi5OYW1lCgkgIGVuZAoJICBlbmQKCSAgZW5kCgkgIGVsc2UKCQlmb3IgaSAsdiBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KCSAgaWYgdi5Ub29sVGlwID09IF9HLlNlbGVjdFdlYXBvbiB0aGVuCgkJX0cuU2VsZWN0V2VhcG9uID0gdi5OYW1lCgkgIGVuZAoJICBlbmQKCSAgZW5kCgkgIGVuZCkKCWVuZAogIGVuZCkKZ2V0Z2VudigpLkthaXR1bk1vZGVSZWFsbHkgPSB0cnVlCgp0YXNrLnNwYXduKAogICAgZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBwY2FsbCgKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBpZiBnZXRnZW52KCkuS2FpdHVuTW9kZVJlYWxseSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJBZGRQb2ludCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk1lbGVlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICApCiAgICAgICAgZW5kCiAgICBlbmQKKQp0YXNrLnNwYXduKAogICAgZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBwY2FsbCgKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBpZiBnZXRnZW52KCkuS2FpdHVuTW9kZVJlYWxseSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLmxvY2FsUGxheWVyLkRhdGEuU3RhdHMuTWVsZWUuTGV2ZWwuVmFsdWUgPiAyNTUwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkFkZFBvaW50IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRGVmZW5zZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICkKICAgICAgICBlbmQKICAgIGVuZAopCnRhc2suc3Bhd24oCiAgICBmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIHBjYWxsKAogICAgICAgICAgICAgICAgZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGdldGdlbnYoKS5LYWl0dW5Nb2RlUmVhbGx5IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikubG9jYWxQbGF5ZXIuRGF0YS5TdGF0cy5EZWZlbnNlLkxldmVsLlZhbHVlID09IDI1NTAgYW5kIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLmxvY2FsUGxheWVyLkRhdGEuU3RhdHMuTWVsZWUuTGV2ZWwuVmFsdWUgPT0gMjQ1MCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJBZGRQb2ludCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlN3b3JkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgKQogICAgICAgIGVuZAogICAgZW5kKQoJCWxvY2FsIENvZGUgPSB7CgkJCSJDSU5DT0RFTUFZT19CT09TVCIsCgkJCSIxNUJfQkVTVEJST1RIRVJTIiwKCQkJIlN1YjJDYXB0YWluTWF1aSIsCgkJCSJERVZTQ09PS0lORyIsCgkJCSJOT09CX1JFRlVORCIsCgkJCSJraXR0Z2FtaW5nIiwKCQkJIlN1YjJGZXI5OTkiLAoJCQkiRW55dV9pc19Qcm8iLAoJCQkiTWFnaWNidXMiLAoJCQkiSkNXSyIsCgkJCSJTdGFyY29kZWhlbyIsCgkJCSJCbHV4eHkiLAoJCQkiZnVkZDEwX3YyIiwKCQkJIlNVQjJHQU1FUlJPQk9UX0VYUDEiLAoJCQkiU3ViMk5vb2JNYXN0ZXIxMjMiLAoJCQkiU3ViMlVuY2xlS2l6YXJ1IiwKCQkJIlN1YjJEYWlncm9jayIsCgkJCSJBeGlvcmUiLAoJCQkiVGFudGFpR2FtaW5nIiwKCQkJIlN0cmF3SGF0TWFpbmUiLAoJCQkiU3ViMk9mZmljaWFsTm9vYmllIiwKCQkJIkZ1ZGQxMCIsCgkJCSJCaWduZXdzIiwKCQkJIlRoZUdyZWF0QWNlIiwKICAgICAgICAgICAgIlNFQ1JFVF9BRE1JTiIsCiAgICAgICAgICAgICJLSVRUX1JFU0VUIiwKICAgICAgICAgICAgIlN1YjJDYXB0YWluTWF1aSIsCiAgICAgICAgICAgICIiCgkJfQkKCQlzcGF3bihmdW5jdGlvbigpCgkJCWZvciBfLCBjb2RlIGluIGlwYWlycyhDb2RlKSBkbwoJCQkJZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOldhaXRGb3JDaGlsZCgiUmVtb3RlcyIpOldhaXRGb3JDaGlsZCgiUmVkZWVtIik6SW52b2tlU2VydmVyKGNvZGUpCgkJCQl3YWl0KCkKCQkJZW5kCgkJZW5kKQpQb3NZID0gIjUiCmlmIFdvcmxkMSB0aGVuCnNwYXduKGZ1bmN0aW9uKCkKCQlwY2FsbChmdW5jdGlvbigpCgkJCXdoaWxlIHdhaXQoKSBkbwoJCQkJaWYgX0cuWEVSVU5LQUlUVU4gYW5kIFdvcmxkMSB0aGVuCgkJCQkJaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWUgPj0gMzEwIHRoZW4KCQkJCQkgICAgX0cuRmFzdEZhcm1Nb2RlID0gZmFsc2UKCQkJCQllbmQKCQkJCWVuZAoJCQllbmQKCQllbmQpCmVuZCkKU3RvcFR3ZWVuKF9HLkZhc3RGYXJtTW9kZSkKICAgIHNwYXduKGZ1bmN0aW9uKCkKCQlwY2FsbChmdW5jdGlvbigpCgkJCXdoaWxlIHdhaXQoKSBkbwoJCQkJaWYgX0cuRmFzdEZhcm1Nb2RlIGFuZCBXb3JsZDEgdGhlbgoJCQkJCWlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlID49IDEwIHRoZW4KCQkJCQkgICAgX0cuQXV0b0Zhcm0gPSBmYWxzZQoJCQkJCSAgICBfRy5GYXN0RmFybU1vZGUgPSB0cnVlCgkJCQkJZW5kCgkJCQllbmQKCQkJZW5kCgkJZW5kKQoJZW5kKQogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5GYXN0RmFybU1vZGUgYW5kIFdvcmxkMSB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZSA+PSAxMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIixWZWN0b3IzLm5ldygtNzg5NC42MTc2NzU3ODEzLCA1NTQ3LjE0MTYwMTU2MjUsIC0zODAuMjkxMTk4NzMwNDcpKQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJTaGFuZGEiIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCB0YXNrLndhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBXZWFwb24oX0cuU2VsZWN0V2VhcG9uKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdGFyZE1hZyA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhc3RNb24gPSB2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDgwLDgwLDgwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbFVzZXIiKTpDYXB0dXJlQ29udHJvbGxlcigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxVc2VyIik6QnV0dG9uMURvd24oVmVjdG9yMi5uZXcoMTI4MCw2NzIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuRmFzdEZhcm1Nb2RlIG9yIG5vdCB2LlBhcmVudCBvciB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXJkTWFnID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQVR3ZWVuKENGcmFtZS5uZXcoLTc2NzguNDg5NzQ2MDkzNzUsIDU1NjYuNDAzODA4NTkzNzUsIC00OTcuMjE1NjA2Njg5NDUzMSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVuRXF1aXBXZWFwb24oX0cuU2VsZWN0V2VhcG9uKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJTaGFuZGEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJTaGFuZGEiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoNSwxMCwyKSkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKQogICAgc3Bhd24oZnVuY3Rpb24oKQoJCXBjYWxsKGZ1bmN0aW9uKCkKCQkJd2hpbGUgd2FpdCgpIGRvCgkJCQlpZiBfRy5GYXN0RmFybU1vZGUgYW5kIFdvcmxkMSB0aGVuCgkJCQkJaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWUgPj0gNTAgdGhlbgoJCQkJCQlfRy5GYXN0RmFybU1vZGUgPSBmYWxzZQoJCQkJCQlfRy5BdXRvUGxheWVySHVudGVyID0gdHJ1ZQoJCQkJCQlVc2Vza2lsbCA9IHRydWUKCQkJCQllbmQKCQkJCWVuZAoJCQllbmQKCQllbmQpCgllbmQpCiAgICBzcGF3bihmdW5jdGlvbigpCgkJcGNhbGwoZnVuY3Rpb24oKQoJCQl3aGlsZSB3YWl0KCkgZG8KCQkJCWlmIF9HLkZhc3RGYXJtTW9kZSBhbmQgV29ybGQxIHRoZW4KCQkJCQlpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZSA+PSA4MCB0aGVuCgkJCQkgICAgCV9HLkF1dG9GYXJtID0gdHJ1ZQoJCQkJCQlfRy5BdXRvUGxheWVySHVudGVyID0gZmFsc2UKCQkJCQkJVXNlc2tpbGwgPSBmYWxzZQoJCQkJCWVuZAoJCQkJZW5kCgkJCWVuZAoJCWVuZCkKCWVuZCkKU3RvcFR3ZWVuKF9HLkF1dG9QbGF5ZXJIdW50ZXIpCnNwYXduKGZ1bmN0aW9uKCkKICAgIGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDpjb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9QbGF5ZXJIdW50ZXIgdGhlbgogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTEpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kKQplbmQpCnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KC4xKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvUGxheWVySHVudGVyIHRoZW4KICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlB2cERpc2FibGVkLlZpc2libGUgPT0gdHJ1ZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiRW5hYmxlUHZwIikKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCkKZW5kKQpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvUGxheWVySHVudGVyIHRoZW4KICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZSB0aGVuCiAgICAgICAgICAgICAgICB3YWl0KC41KQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUGxheWVySHVudGVyIikKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkNoYXJhY3RlcnM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LHYuTmFtZSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgd2FpdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGFzQnVzbyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBhcmdzID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbMV0gPSAiQnVzbyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwV2VhcG9uKF9HLlNlbGVjdFdlYXBvbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVzZXNraWxsID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQVR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDEsNywzKSkJCQkJCQkJCQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCw2MCw2MCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSdWaXJ0dWFsVXNlcic6Q2FwdHVyZUNvbnRyb2xsZXIoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlJ1ZpcnR1YWxVc2VyJzpCdXR0b24xRG93bihWZWN0b3IyLm5ldygxMjgwLCA2NzIpKQogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBfRy5BdXRvUGxheWVySHVudGVyID09IGZhbHNlIG9yIHYuSHVtYW5vaWQuSGVhbHRoIDw9IDAKICAgICAgICAgICAgICAgICAgICAgICAgVXNlc2tpbGwgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJBYmFuZG9uUXVlc3QiKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCkKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCgkJcGNhbGwoZnVuY3Rpb24oKQoJCQlpZiBVc2Vza2lsbCB0aGVuCgkJCQlnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwiWiIsZmFsc2UsZ2FtZSkKCQkJCXdhaXQoMC4xKQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCJaIixmYWxzZSxnYW1lKQogICAgICAgICAgICAgICAgd2FpdCgwLjEpCgkJCQlnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwiWCIsZmFsc2UsZ2FtZSkKCQkJCXdhaXQoMC4xKQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCJYIixmYWxzZSxnYW1lKQogICAgICAgICAgICAgICAgd2FpdCgwLjEpCgkJCWVuZAoJCWVuZCkKICAgIGVuZAplbmQpCmVuZApzcGF3bihmdW5jdGlvbigpCgkJcGNhbGwoZnVuY3Rpb24oKQoJCQl3aGlsZSB3YWl0KCkgZG8KCQkJCWlmIF9HLlhFUlVOS0FJVFVOIGFuZCBXb3JsZDEgdGhlbgoJCQkJCWlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlID49IDcwMCB0aGVuCgkJCQkJZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiVHJhdmVsRHJlc3Nyb3NhIikKCQkJCQkJX0cuQXV0b0Zhcm0gPSBmYWxzZQoJCQkJCQlfRy5BdXRvU2Vjb25kU2VhID0gdmFsdWUKCQkJCQllbmQKCQkJCWVuZAoJCQllbmQKCQllbmQpCgllbmQpClN0b3BUd2VlbihfRy5BdXRvU2Vjb25kU2VhKQpzcGF3bihmdW5jdGlvbigpCgkJcGNhbGwoZnVuY3Rpb24oKQoJCQl3aGlsZSB3YWl0KCkgZG8KCQkJCWlmIF9HLlhFUlVOS0FJVFVOIGFuZCBXb3JsZDIgdGhlbgoJCQkJCWlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlID49IDE1MDAgdGhlbgoJCQkJCQlfRy5BdXRvRmFybSA9IGZhbHNlCgkJCQkJCV9HLkF1dG9UaGlyZFNlYSA9IHZhbHVlCgkJCQkJZW5kCgkJCQllbmQKCQkJZW5kCgkJZW5kKQoJZW5kKQpTdG9wVHdlZW4oX0cuQXV0b1RoaXJkU2VhKQpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8gCiAgICAgICAgaWYgX0cuQXV0b1NlY29uZFNlYSB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGxvY2FsIE15TGV2ZWwgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlCiAgICAgICAgICAgICAgICBpZiBNeUxldmVsID49IDcwMCBhbmQgV29ybGQxIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5JY2UuRG9vci5DYW5Db2xsaWRlID09IGZhbHNlIGFuZCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5JY2UuRG9vci5UcmFuc3BhcmVuY3kgPT0gMSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIENGcmFtZTEgPSBDRnJhbWUubmV3KDQ4NDkuMjk4ODMsIDUuNjUxMzgxNDksIDcxOS42MTE4NzcpCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCBBVHdlZW4oQ0ZyYW1lMSkgd2FpdCgpIHVudGlsIChDRnJhbWUxLlBvc2l0aW9uLWdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMyBvciBfRy5BdXRvU2Vjb25kU2VhID09IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS4xKQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJEcmVzc3Jvc2FRdWVzdFByb2dyZXNzIiwiRGV0ZWN0aXZlIikKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwV2VhcG9uKCJLZXkiKQogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgQVR3ZWVuKENGcmFtZS5uZXcoMTM0Ny43MTI0LCAzNy4zNzUxNjAyLCAtMTMyNS42NDg4KSkgd2FpdCgpIHVudGlsIChWZWN0b3IzLm5ldygxMzQ3LjcxMjQsIDM3LjM3NTE2MDIsIC0xMzI1LjY0ODgpLWdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMyBvciBfRy5BdXRvU2Vjb25kU2VhID09IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC41KQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSWNlLkRvb3IuQ2FuQ29sbGlkZSA9PSBmYWxzZSBhbmQgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSWNlLkRvb3IuVHJhbnNwYXJlbmN5ID09IDEgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJJY2UgQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIkljZSBBZG1pcmFsIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3Qgdi5IdW1hbm9pZC5IZWFsdGggPD0gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPbGRDRnJhbWVTZWNvbmQgPSB2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCB0YXNrLndhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBXZWFwb24oX0cuU2VsZWN0V2VhcG9uKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLDUwLDUwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IE9sZENGcmFtZVNlY29uZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQVR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxVc2VyIik6Q2FwdHVyZUNvbnRyb2xsZXIoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsVXNlciIpOkJ1dHRvbjFEb3duKFZlY3RvcjIubmV3KDEyODAsNjcyKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLCJTaW11bGF0aW9uUmFkaXVzIixtYXRoLmh1Z2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvU2Vjb25kU2VhIG9yIG5vdCB2LlBhcmVudCBvciB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlRyYXZlbERyZXNzcm9zYSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJJY2UgQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQVR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiSWNlIEFkbWlyYWwiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoNSwxMCw3KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKQpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvVGhpcmRTZWEgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlID49IDE1MDAgYW5kIFdvcmxkMiB0aGVuCiAgICAgICAgICAgICAgICAgICAgX0cuQXV0b0Zhcm0gPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzWyJDb21tRl8iXTpJbnZva2VTZXJ2ZXIoIlpRdWVzdFByb2dyZXNzIiwgIkdlbmVyYWwiKSA9PSAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgQVR3ZWVuKENGcmFtZS5uZXcoLTE5MjYuMzIyMTQzNTU0NywgMTIuODE5ODUxODc1MzA1LCAxNzM4LjMwOTIwNDEwMTYpKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoQ0ZyYW1lLm5ldygtMTkyNi4zMjIxNDM1NTQ3LCAxMi44MTk4NTE4NzUzMDUsIDE3MzguMzA5MjA0MTAxNikuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDEwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiWlF1ZXN0UHJvZ3Jlc3MiLCJCZWdpbiIpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuOCkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJyaXBfaW5kcmEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAicmlwX2luZHJhIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9sZENGcmFtZVRoaXJkID0gdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgdGFzay53YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwV2VhcG9uKF9HLlNlbGVjdFdlYXBvbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IE9sZENGcmFtZVRoaXJkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLDUwLDUwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UnVmlydHVhbFVzZXInOkNhcHR1cmVDb250cm9sbGVyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSdWaXJ0dWFsVXNlcic6QnV0dG9uMURvd24oVmVjdG9yMi5uZXcoMTI4MCwgNjcyKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlRyYXZlbFpvdSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRoaWRkZW5wcm9wZXJ0eShnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllciwiU2ltdWxhdGlvblJhZGl1cyIsbWF0aC5odWdlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBfRy5BdXRvVGhpcmRTZWEgPT0gZmFsc2Ugb3Igdi5IdW1hbm9pZC5IZWFsdGggPD0gMCBvciBub3Qgdi5QYXJlbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgicmlwX2luZHJhIikgYW5kIChDRnJhbWUubmV3KC0yNjg4MC45MzM1OTM3NSwgMjIuODQ4NTU0NjExMjA2LCA0NzMuMTg5NTE0MTYwMTYpLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAxMDAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFUd2VlbihDRnJhbWUubmV3KC0yNjg4MC45MzM1OTM3NSwgMjIuODQ4NTU0NjExMjA2LCA0NzMuMTg5NTE0MTYwMTYpKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKQppZiBXb3JsZDEgdGhlbiAKX0cuQXV0b19TYWJlciA9IHRydWUKX0cuQXV0b1NhYmVySG9wID0gdHJ1ZQpTdG9wVHdlZW4oX0cuQXV0b19TYWJlcikKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX1NhYmVyIGFuZCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZSA+PSAxODAgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5KdW5nbGUuRmluYWwuUGFydC5UcmFuc3BhcmVuY3kgPT0gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLlF1ZXN0UGxhdGVzLkRvb3IuVHJhbnNwYXJlbmN5ID09IDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoQ0ZyYW1lLm5ldygtMTYxMi41NTg4NCwgMzYuOTc3NDEzMiwgMTQ4LjcxOTU0MywgMC4zNzA5MTI3OSwgMy4wNzE3MTUxZS0wOSwgLTAuOTI4NjY3NzI0LCAzLjk3MDk5NDkxZS0wOCwgMSwgMS45MTY3OTM0OGUtMDgsIDAuOTI4NjY3NzI0LCAtNC4zOTg2OTc5NGUtMDgsIDAuMzcwOTEyNzkpLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMTAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFUd2VlbihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLlF1ZXN0UGxhdGVzLlBsYXRlMS5CdXR0b24uQ0ZyYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLlF1ZXN0UGxhdGVzLlBsYXRlMi5CdXR0b24uQ0ZyYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLlF1ZXN0UGxhdGVzLlBsYXRlMy5CdXR0b24uQ0ZyYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLlF1ZXN0UGxhdGVzLlBsYXRlNC5CdXR0b24uQ0ZyYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLlF1ZXN0UGxhdGVzLlBsYXRlNS5CdXR0b24uQ0ZyYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFUd2VlbihDRnJhbWUubmV3KC0xNjEyLjU1ODg0LCAzNi45Nzc0MTMyLCAxNDguNzE5NTQzLCAwLjM3MDkxMjc5LCAzLjA3MTcxNTFlLTA5LCAtMC45Mjg2Njc3MjQsIDMuOTcwOTk0OTFlLTA4LCAxLCAxLjkxNjc5MzQ4ZS0wOCwgMC45Mjg2Njc3MjQsIC00LjM5ODY5Nzk0ZS0wOCwgMC4zNzA5MTI3OSkpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuRGVzZXJ0LkJ1cm4uUGFydC5UcmFuc3BhcmVuY3kgPT0gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiVG9yY2giKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJUb3JjaCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFdlYXBvbigiVG9yY2giKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFUd2VlbihDRnJhbWUubmV3KDExMTQuNjE0NzUsIDUuMDQ2Nzk3MjgsIDQzNTAuMjI4MDMsIC0wLjY0ODQ2NjU4NywgLTEuMjg3OTkwOTRlLTA5LCAwLjc2MTI0MzEwNSwgLTUuNzA2NTI5MTRlLTEwLCAxLCAxLjIwNTg0NTQyZS0wOSwgLTAuNzYxMjQzMTA1LCAzLjQ3NTQ0ODgyZS0xMCwgLTAuNjQ4NDY2NTg3KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBVHdlZW4oQ0ZyYW1lLm5ldygtMTYxMC4wMDc1NywgMTEuNTA0OTg1OCwgMTY0LjAwMTU4NywgMC45ODQ4MDc1NTEsIC0wLjE2NzcyMjI4NSwgLTAuMDQ0OTgxODE0OSwgMC4xNzM2NDk0MywgMC45NTEyNDQyMzUsIDAuMjU0OTEyMTk4LCAzLjQyMzcyODA1ZS0wNSwgLTAuMjU4ODUwNTE1LCAwLjk2NTkxNzQwOCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsIlNpY2tNYW4iKSB+PSAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwiR2V0Q3VwIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFdlYXBvbigiQ3VwIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwiRmlsbEN1cCIsZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkN1cCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsIlNpY2tNYW4iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCJSaWNoU29uIikgPT0gbmlsIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsIlJpY2hTb24iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwiUmljaFNvbiIpID09IDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiTW9iIExlYWRlciIpIG9yIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiTW9iIExlYWRlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQVR3ZWVuKENGcmFtZS5uZXcoLTI4NzQuOTcwMjE0ODQzNzUsIDIwLjAxMzEyODI4MDYzOTY1LCA1NDE1LjI1MjQ0MTQwNjI1KSktLS3guITguKfguKIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lID09ICJNb2IgTGVhZGVyIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJNb2IgTGVhZGVyIFtMdi4gMTIwXSBbQm9zc10iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCB0YXNrLndhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBXZWFwb24oX0cuU2VsZWN0V2VhcG9uKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDgwLDgwLDgwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBVHdlZW4odi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbFVzZXIiKTpDYXB0dXJlQ29udHJvbGxlcigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxVc2VyIik6QnV0dG9uMURvd24oVmVjdG9yMi5uZXcoMTI4MCw2NzIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIsIlNpbXVsYXRpb25SYWRpdXMiLG1hdGguaHVnZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIHYuSHVtYW5vaWQuSGVhbHRoIDw9IDAgb3Igbm90IF9HLkF1dG9fU2FiZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiTW9iIExlYWRlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQVR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiTW9iIExlYWRlciIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogRmFybV9Nb2RlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsIlJpY2hTb24iKSA9PSAxIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsIlJpY2hTb24iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBXZWFwb24oIlJlbGljIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFUd2VlbihDRnJhbWUubmV3KC0xNDA0LjkxNTA0LCAyOS45NzczMjczLCAzLjgwNTk4MTE2LCAwLjg3NjUxNDQ5NCwgNS42NjkwNjg3N2UtMDksIDAuNDgxMzc1NDU2LCAyLjUzODUxOTk3ZS0wOCwgMSwgLTUuNzk5OTU2MDdlLTA4LCAtMC40ODEzNzU0NTYsIDYuMzA1NzI2NDNlLTA4LCAwLjg3NjUxNDQ5NCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJTYWJlciBFeHBlcnQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlNhYmVyIEV4cGVydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdi5IdW1hbm9pZC5IZWFsdGggPiAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgPT0gIlNhYmVyIEV4cGVydCIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgdGFzay53YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwV2VhcG9uKF9HLlNlbGVjdFdlYXBvbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFUd2Vlbih2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWQuSnVtcFBvd2VyID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLXYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLXYuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYuTmFtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlJ1ZpcnR1YWxVc2VyJzpDYXB0dXJlQ29udHJvbGxlcigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UnVmlydHVhbFVzZXInOkJ1dHRvbjFEb3duKFZlY3RvcjIubmV3KDEyODAsIDY3Miksd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ0ZyYW1lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwIG9yIG5vdCBfRy5BdXRvX1NhYmVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuSHVtYW5vaWQuSGVhbHRoIDw9IDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsIlBsYWNlUmVsaWMiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKQplbmQKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbyAKICAgICAgICAgICAgaWYgX0cuQXV0b1N1cGVyaHVtYW4gdGhlbgogICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJDb21iYXQiKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJDb21iYXQiKSBhbmQgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIilbIkxvY2FsUGxheWVyIl0uRGF0YS5CZWxpLlZhbHVlID49IDE1MDAwMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgVW5FcXVpcFdlYXBvbigiQ29tYmF0IikKICAgICAgICAgICAgICAgICAgICB3YWl0KC4xKQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUJsYWNrTGVnIikKICAgICAgICAgICAgICAgIGVuZCAgIAogICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU3VwZXJodW1hbiIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3VwZXJodW1hbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBfRy5TZWxlY3RXZWFwb24gPSAiU3VwZXJodW1hbiIKICAgICAgICAgICAgICAgIGVuZCAgCiAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkJsYWNrIExlZyIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkJsYWNrIExlZyIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRWxlY3RybyIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkVsZWN0cm8iKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZpc2htYW4gS2FyYXRlIikgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRmlzaG1hbiBLYXJhdGUiKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkRyYWdvbiBDbGF3Iikgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRHJhZ29uIENsYXciKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCbGFjayBMZWciKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCbGFjayBMZWciKS5MZXZlbC5WYWx1ZSA8PSA0MDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBfRy5TZWxlY3RXZWFwb24gPSAiQmxhY2sgTGVnIgogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRWxlY3RybyIpIGFuZCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkVsZWN0cm8iKS5MZXZlbC5WYWx1ZSA8PSA0MDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBfRy5TZWxlY3RXZWFwb24gPSAiRWxlY3RybyIKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZpc2htYW4gS2FyYXRlIikgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRmlzaG1hbiBLYXJhdGUiKS5MZXZlbC5WYWx1ZSA8PSA0MDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBfRy5TZWxlY3RXZWFwb24gPSAiRmlzaG1hbiBLYXJhdGUiCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEcmFnb24gQ2xhdyIpIGFuZCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkRyYWdvbiBDbGF3IikuTGV2ZWwuVmFsdWUgPD0gMjk5IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgX0cuU2VsZWN0V2VhcG9uID0gIkRyYWdvbiBDbGF3IgogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQmxhY2sgTGVnIikgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQmxhY2sgTGVnIikuTGV2ZWwuVmFsdWUgPj0gMzAwIGFuZCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKVsiTG9jYWxQbGF5ZXIiXS5EYXRhLkJlbGkuVmFsdWUgPj0gMzAwMDAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVW5FcXVpcFdlYXBvbigiQmxhY2sgTGVnIikKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCguMSkKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RWxlY3RybyIpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQmxhY2sgTGVnIikgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkJsYWNrIExlZyIpLkxldmVsLlZhbHVlID49IDMwMCBhbmQgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIilbIkxvY2FsUGxheWVyIl0uRGF0YS5CZWxpLlZhbHVlID49IDMwMDAwMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFVuRXF1aXBXZWFwb24oIkJsYWNrIExlZyIpCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoLjEpCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUVsZWN0cm8iKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRWxlY3RybyIpIGFuZCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkVsZWN0cm8iKS5MZXZlbC5WYWx1ZSA+PSA0MDAgYW5kIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpWyJMb2NhbFBsYXllciJdLkRhdGEuQmVsaS5WYWx1ZSA+PSA3NTAwMDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBVbkVxdWlwV2VhcG9uKCJFbGVjdHJvIikKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCguMSkKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RmlzaG1hbkthcmF0ZSIpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRWxlY3RybyIpIGFuZCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJFbGVjdHJvIikuTGV2ZWwuVmFsdWUgPj0gNDAwIGFuZCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKVsiTG9jYWxQbGF5ZXIiXS5EYXRhLkJlbGkuVmFsdWUgPj0gNzUwMDAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVW5FcXVpcFdlYXBvbigiRWxlY3RybyIpCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoLjEpCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUZpc2htYW5LYXJhdGUiKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRmlzaG1hbiBLYXJhdGUiKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJGaXNobWFuIEthcmF0ZSIpLkxldmVsLlZhbHVlID49IDMwMCBhbmQgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIilbIkxvY2FscGxheWVyIl0uRGF0YS5GcmFnbWVudHMuVmFsdWUgPj0gMTUwMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFVuRXF1aXBXZWFwb24oIkZpc2htYW4gS2FyYXRlIikKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCguMSkKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsIkRyYWdvbkNsYXciLCIxIikKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsIkRyYWdvbkNsYXciLCIyIikgCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRmlzaG1hbiBLYXJhdGUiKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRmlzaG1hbiBLYXJhdGUiKS5MZXZlbC5WYWx1ZSA+PSAzMDAgYW5kIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpWyJMb2NhbHBsYXllciJdLkRhdGEuRnJhZ21lbnRzLlZhbHVlID49IDE1MDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBVbkVxdWlwV2VhcG9uKCJGaXNobWFuIEthcmF0ZSIpCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoLjEpCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJsYWNrYmVhcmRSZXdhcmQiLCJEcmFnb25DbGF3IiwiMSIpCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJsYWNrYmVhcmRSZXdhcmQiLCJEcmFnb25DbGF3IiwiMiIpIAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRHJhZ29uIENsYXciKSBhbmQgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEcmFnb24gQ2xhdyIpLkxldmVsLlZhbHVlID49IDMwMCBhbmQgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIilbIkxvY2FsUGxheWVyIl0uRGF0YS5CZWxpLlZhbHVlID49IDMwMDAwMDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBVbkVxdWlwV2VhcG9uKCJEcmFnb24gQ2xhdyIpCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoLjEpCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eVN1cGVyaHVtYW4iKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkRyYWdvbiBDbGF3IikgYW5kIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkRyYWdvbiBDbGF3IikuTGV2ZWwuVmFsdWUgPj0gMzAwIGFuZCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKVsiTG9jYWxQbGF5ZXIiXS5EYXRhLkJlbGkuVmFsdWUgPj0gMzAwMDAwMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFVuRXF1aXBXZWFwb24oIkRyYWdvbiBDbGF3IikKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCguMSkKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5U3VwZXJodW1hbiIpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZCkKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbyAKICAgICAgICAgICAgaWYgX0cuQXV0b0VsZWN0cmljQ2xhdyB0aGVuCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRWxlY3RybyIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRWxlY3RybyIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJFbGVjdHJpYyBDbGF3Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJFbGVjdHJpYyBDbGF3IikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJFbGVjdHJvIikgYW5kIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJFbGVjdHJvIikuTGV2ZWwuVmFsdWUgPj0gNDAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RWxlY3RyaWNDbGF3IikKICAgICAgICAgICAgICAgICAgICAgICAgX0cuU2VsZWN0V2VhcG9uID0gIkVsZWN0cmljIENsYXciCiAgICAgICAgICAgICAgICAgICAgZW5kICAKICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkVsZWN0cm8iKSBhbmQgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJFbGVjdHJvIikuTGV2ZWwuVmFsdWUgPj0gNDAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RWxlY3RyaWNDbGF3IikKICAgICAgICAgICAgICAgICAgICAgICAgX0cuU2VsZWN0V2VhcG9uID0gIkVsZWN0cmljIENsYXciCiAgICAgICAgICAgICAgICAgICAgZW5kICAKICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRWxlY3RybyIpIGFuZCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRWxlY3RybyIpLkxldmVsLlZhbHVlIDw9IDM5OSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIF9HLlNlbGVjdFdlYXBvbiA9ICJFbGVjdHJvIgogICAgICAgICAgICAgICAgICAgIGVuZCAKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlFbGVjdHJvIikKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgaWYgX0cuQXV0b0VsZWN0cmljQ2xhdyB0aGVuCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRWxlY3RybyIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRWxlY3RybyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRWxlY3RybyIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRWxlY3RybyIpIGFuZCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRWxlY3RybyIpLkxldmVsLlZhbHVlID49IDQwMCBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkVsZWN0cm8iKS5MZXZlbC5WYWx1ZSA+PSA0MDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBfRy5BdXRvRmFybSA9PSBmYWxzZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgdGFzay53YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBVHdlZW4oQ0ZyYW1lLm5ldygtMTAzNzEuNDcxNywgMzMwLjc2NDQ5NiwgLTEwMTMxLjQxOTkpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9FbGVjdHJpY0NsYXcgb3IgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gQ0ZyYW1lLm5ldygtMTAzNzEuNDcxNywgMzMwLjc2NDQ5NiwgLTEwMTMxLjQxOTkpLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMTAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUVsZWN0cmljQ2xhdyIsIlN0YXJ0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCB0YXNrLndhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFUd2VlbihDRnJhbWUubmV3KC0xMjU1MC41MzIyMjY1NjMsIDMzNi4yMjYzMTgzNTkzOCwgLTc1MTAuNDIzMzM5ODQzOCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b0VsZWN0cmljQ2xhdyBvciAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBDRnJhbWUubmV3KC0xMjU1MC41MzIyMjY1NjMsIDMzNi4yMjYzMTgzNTkzOCwgLTc1MTAuNDIzMzM5ODQzOCkuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAxMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IHRhc2sud2FpdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQVR3ZWVuKENGcmFtZS5uZXcoLTEwMzcxLjQ3MTcsIDMzMC43NjQ0OTYsIC0xMDEzMS40MTk5KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvRWxlY3RyaWNDbGF3IG9yIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIENGcmFtZS5uZXcoLTEwMzcxLjQ3MTcsIDMzMC43NjQ0OTYsIC0xMDEzMS40MTk5KS5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlFbGVjdHJpY0NsYXciKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgX0cuQXV0b0Zhcm0gPT0gdHJ1ZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfRy5BdXRvRmFybSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgdGFzay53YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBVHdlZW4oQ0ZyYW1lLm5ldygtMTAzNzEuNDcxNywgMzMwLjc2NDQ5NiwgLTEwMTMxLjQxOTkpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9FbGVjdHJpY0NsYXcgb3IgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gQ0ZyYW1lLm5ldygtMTAzNzEuNDcxNywgMzMwLjc2NDQ5NiwgLTEwMTMxLjQxOTkpLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMTAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUVsZWN0cmljQ2xhdyIsIlN0YXJ0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCB0YXNrLndhaXQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFUd2VlbihDRnJhbWUubmV3KC0xMjU1MC41MzIyMjY1NjMsIDMzNi4yMjYzMTgzNTkzOCwgLTc1MTAuNDIzMzM5ODQzOCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b0VsZWN0cmljQ2xhdyBvciAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBDRnJhbWUubmV3KC0xMjU1MC41MzIyMjY1NjMsIDMzNi4yMjYzMTgzNTkzOCwgLTc1MTAuNDIzMzM5ODQzOCkuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAxMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0IHRhc2sud2FpdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQVR3ZWVuKENGcmFtZS5uZXcoLTEwMzcxLjQ3MTcsIDMzMC43NjQ0OTYsIC0xMDEzMS40MTk5KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvRWxlY3RyaWNDbGF3IG9yIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIENGcmFtZS5uZXcoLTEwMzcxLjQ3MTcsIDMzMC43NjQ0OTYsIC0xMDEzMS40MTk5KS5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlFbGVjdHJpY0NsYXciKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgX0cuU2VsZWN0V2VhcG9uID0gIkVsZWN0cmljIENsYXciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KC4xKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgX0cuQXV0b0Zhcm0gPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKQplbmQpCnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9EcmFnb25UYWxvbiB0aGVuCiAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEcmFnb24gQ2xhdyIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRHJhZ29uIENsYXciKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRHJhZ29uIFRhbG9uIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJEcmFnb24gVGFsb24iKSB0aGVuCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRHJhZ29uIENsYXciKSBhbmQgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkRyYWdvbiBDbGF3IikuTGV2ZWwuVmFsdWUgPj0gNDAwIHRoZW4KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlEcmFnb25UYWxvbiIpCiAgICAgICAgICAgICAgICAgICAgX0cuU2VsZWN0V2VhcG9uID0gIkRyYWdvbiBUYWxvbiIKICAgICAgICAgICAgICAgIGVuZCAgCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkRyYWdvbiBDbGF3IikgYW5kIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRHJhZ29uIENsYXciKS5MZXZlbC5WYWx1ZSA+PSA0MDAgdGhlbgogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eURyYWdvblRhbG9uIikKICAgICAgICAgICAgICAgICAgICBfRy5TZWxlY3RXZWFwb24gPSAiRHJhZ29uIFRhbG9uIgogICAgICAgICAgICAgICAgZW5kICAKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEcmFnb24gQ2xhdyIpIGFuZCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRHJhZ29uIENsYXciKS5MZXZlbC5WYWx1ZSA8PSAzOTkgdGhlbgogICAgICAgICAgICAgICAgICAgIF9HLlNlbGVjdFdlYXBvbiA9ICJEcmFnb24gQ2xhdyIKICAgICAgICAgICAgICAgIGVuZCAKICAgICAgICAgICAgZWxzZSAKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJsYWNrYmVhcmRSZXdhcmQiLCJEcmFnb25DbGF3IiwiMiIpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCkKX0cuQXV0b0J1eUxlZ2VuZGFyeVN3b3JkID0gdHJ1ZQpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvQnV5TGVnZW5kYXJ5U3dvcmQgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCBhcmdzID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMZWdlbmRhcnlTd29yZERlYWxlciIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIjEiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkKICAgICAgICAgICAgICAgIGxvY2FsIGFyZ3MgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxlZ2VuZGFyeVN3b3JkRGVhbGVyIiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiMiIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKGFyZ3MpKQogICAgICAgICAgICAgICAgbG9jYWwgYXJncyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTGVnZW5kYXJ5U3dvcmREZWFsZXIiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICIzIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpCiAgICAgICAgICAgICAgICBpZiBfRy5BdXRvQnV5TGVnZW5kYXJ5U3dvcmRfSG9wIGFuZCBfRy5BdXRvQnV5TGVnZW5kYXJ5U3dvcmQgYW5kIFdvcmxkMiB0aGVuCiAgICAgICAgICAgICAgICAgICAgd2FpdCgxMCkKICAgICAgICAgICAgICAgICAgICBIb3AoKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQgCiAgICBlbmQKZW5kKQpzcGF3bihmdW5jdGlvbigpCgkJcGNhbGwoZnVuY3Rpb24oKQoJCQl3aGlsZSB3YWl0KCkgZG8KCQkJCWlmIF9HLlhFUlVOS0FJVFVOIGFuZCBXb3JsZDIgdGhlbgoJCQkJCWlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlID49IDE0MjAgdGhlbgoJCQkJCSAgICBfRy5BdXRvRmFybSA9IGZhbHNlCgkJCQkJICAgIF9HLkF1dG9SZW5nb2t1ID0gdHJ1ZQoJCQkJCWVuZAoJCQkJZW5kCgkJCWVuZAoJCWVuZCkKZW5kKQpzcGF3bihmdW5jdGlvbigpCgkJcGNhbGwoZnVuY3Rpb24oKQoJCQl3aGlsZSB3YWl0KCkgZG8KCQkJCWlmIF9HLlhFUlVOS0FJVFVOIGFuZCBXb3JsZDIgdGhlbgoJCQkJCWlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlID49IDE0MjUgdGhlbgoJCQkJCSAgICBfRy5BdXRvRmFybSA9IHRydWUKCQkJCQkgICAgX0cuQXV0b1Jlbmdva3UgPSBmYWxzZQoJCQkJCWVuZAoJCQkJZW5kCgkJCWVuZAoJCWVuZCkKZW5kKQpTdG9wVHdlZW4oX0cuQXV0b1Jlbmdva3UpCnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b1Jlbmdva3UgdGhlbgogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkhpZGRlbiBLZXkiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkhpZGRlbiBLZXkiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgRXF1aXBXZWFwb24oIkhpZGRlbiBLZXkiKQogICAgICAgICAgICAgICAgICAgIEFUd2VlbihDRnJhbWUubmV3KDY1NzEuMTIwMTE3MTg3NSwgMjk5LjIzMDI4NTY0NDUzLCAtNjk2Ny44NDE3OTY4NzUpKQogICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU25vdyBMdXJrZXIiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkFyY3RpYyBXYXJyaW9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2Lk5hbWUgPT0gIlNub3cgTHVya2VyIiBvciB2Lk5hbWUgPT0gIkFyY3RpYyBXYXJyaW9yIikgYW5kIHYuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQgdGFzay53YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFdlYXBvbihfRy5TZWxlY3RXZWFwb24pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLDUwLDUwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlbmdva3VNb24gPSB2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQVR3ZWVuKHYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlJ1ZpcnR1YWxVc2VyJzpDYXB0dXJlQ29udHJvbGxlcigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlJ1ZpcnR1YWxVc2VyJzpCdXR0b24xRG93bihWZWN0b3IyLm5ldygxMjgwLCA2NzIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXJ0UmVuZ29rdU1hZ25ldCA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJIaWRkZW4gS2V5Iikgb3IgX0cuQXV0b1Jlbmdva3UgPT0gZmFsc2Ugb3Igbm90IHYuUGFyZW50IG9yIHYuSHVtYW5vaWQuSGVhbHRoIDw9IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXJ0UmVuZ29rdU1hZ25ldCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIFN0YXJ0UmVuZ29rdU1hZ25ldCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgQVR3ZWVuKENGcmFtZS5uZXcoNTQzOS43MTY3OTY4NzUsIDg0LjQyMDk0NDIxMzg2NywgLTY3MTUuMTYzNTc0MjE4OCkpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZCkKX0cuQXV0b0JyaW5nRnJ1aXQgPSB0cnVlCnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KC4xKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvQnJpbmdGcnVpdCB0aGVuCiAgICAgICAgICAgICAgICBmb3IgaSx2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2Lk5hbWUsICJGcnVpdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LkhhbmRsZS5DRnJhbWUgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCA0NSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoLjMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBGaXJlRnJ1aXQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KEZpcmVGcnVpdCwgdi5IYW5kbGUsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKQplbmQpCl9HLkF1dG9TdG9yZVNzRnJ1aXQgPSB0cnVlCnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b1N0b3JlU3NGcnVpdCB0aGVuCiAgICAgICAgICAgICAgICBmb3IgaSwgdiBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2OklzQSgiVG9vbCIpIGFuZCBzdHJpbmcuZmluZCh2Lk5hbWUsICJGcnVpdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsdjpHZXRBdHRyaWJ1dGUoIk9yaWdpbmFsTmFtZSIpLHYpCiAgICAgICAgICAgICAgICAgICAgICAgIExvYWQuVGV4dCA9ICJLZWVwIEZydWl0IFN1Y2Nlc3MiCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGZvciBpLCB2IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2OklzQSgiVG9vbCIpIGFuZCBzdHJpbmcuZmluZCh2Lk5hbWUsICJGcnVpdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsdjpHZXRBdHRyaWJ1dGUoIk9yaWdpbmFsTmFtZSIpLHYpCiAgICAgICAgICAgICAgICAgICAgICAgIExvYWQuVGV4dCA9ICJLZWVwIEZydWl0IFN1Y2Nlc3MiCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZCkKX0cuUmVtb3ZlX3RyY3QgPSB0cnVlCnNwYXduKGZ1bmN0aW9uKCkKCXdoaWxlIHdhaXQoKSBkbwoJCWlmIF9HLlJlbW92ZV90cmN0IHRoZW4KCQkJZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlBsYXllckd1aS5Ob3RpZmljYXRpb25zLkVuYWJsZWQgPSBmYWxzZQoJCWVsc2UKCQkJZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlBsYXllckd1aS5Ob3RpZmljYXRpb25zLkVuYWJsZWQgPSB0cnVlCgkJZW5kCgllbmQKZW5kKQpnZXRnZW52KCkuQXV0b1Jlam9pbiA9IHRydWUKCXNwYXduKGZ1bmN0aW9uKCkKCSAgICB3aGlsZSB3YWl0KCkgZG8KCSAgICAgICAgaWYgZ2V0Z2VudigpLkF1dG9SZWpvaW4gdGhlbgoJICAgICAgICAgICAgICAgIGdldGdlbnYoKS5yZWpvaW4gPSBnYW1lOkdldFNlcnZpY2UoIkNvcmVHdWkiKS5Sb2Jsb3hQcm9tcHRHdWkucHJvbXB0T3ZlcmxheS5DaGlsZEFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oY2hpbGQpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNoaWxkLk5hbWUgPT0gJ0Vycm9yUHJvbXB0JyBhbmQgY2hpbGQ6RmluZEZpcnN0Q2hpbGQoJ01lc3NhZ2VBcmVhJykgYW5kIGNoaWxkLk1lc3NhZ2VBcmVhOkZpbmRGaXJzdENoaWxkKCJFcnJvckZyYW1lIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJUZWxlcG9ydFNlcnZpY2UiKTpUZWxlcG9ydChnYW1lLlBsYWNlSWQpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICBlbmQpCgkgICAgICAgICAgICBlbmQKCSAgICAgICAgZW5kCgkgICAgZW5kKQpzcGF3bihmdW5jdGlvbigpCgl3aGlsZSB3YWl0KCkgZG8KCQlpZiBnZXRnZW52KCkucmVtb3ZlIHRoZW4KCQkJcGNhbGwoZnVuY3Rpb24oKQoJCQlnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLkVmZmVjdC5Db250YWluZXIuRGVhdGg6RGVzdHJveSgpCgkJCWdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuRWZmZWN0LkNvbnRhaW5lci5SZXNwYXduOkRlc3Ryb3koKQoJCQlnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLkVmZmVjdC5Db250YWluZXIuSGl0OkRlc3Ryb3koKSAgICAgICAgICAgICAgICAgICAgZW5kKQoJCQllbmQKCQkJZW5kCgkJCWVuZCkKc3Bhd24oZnVuY3Rpb24oKQoJd2hpbGUgd2FpdCgpIGRvCgkJaWYgZ2V0Z2VudigpLnJlbW92ZWhlYXZ5IHRoZW4KCQkJcGNhbGwoZnVuY3Rpb24oKQoJCQlnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuRWZmZWN0LkNvbnRhaW5lcjpEZXN0cm95KCkKCQkJZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLkFzc2V0czpGaW5kRmlyc3RDaGlsZCgnU2xhc2hIaXQnKTpEZXN0cm95KCkKCQkJZW5kKQoJCQllbmQKCQkJZW5kCgkJCWVuZCkKCnNwYXduKGZ1bmN0aW9uKCkKCXdoaWxlIHRhc2sud2FpdCgpIGRvCgkJcGNhbGwoZnVuY3Rpb24oKQoJCQlpZiBnZXRnZW52KCkuRGlzbmFibGVEYW1lIHRoZW4KCQkJCWdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Bc3NldHMuR1VJLkRhbWFnZUNvdW50ZXIuRW5hYmxlZCA9IGZhbHNlCgkJCWVsc2UKCQkJCWdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Bc3NldHMuR1VJLkRhbWFnZUNvdW50ZXIuRW5hYmxlZCA9IHRydWUKCQkJZW5kCgkJZW5kKQoJZW5kCmVuZCkKX0cuUmVtb3ZlSGl0ID0gdHJ1ZQogICAgICAgX0cuUmVtb3ZlX3RyY3QgPSB0cnVlCmdldGdlbnYoKS5EaXNuYWJsZURhbWUgPSB0cnVlCgkgICBnZXRnZW52KCkucmVtb3ZlaGVhdnkgPSB0cnVlCgkgICBnZXRnZW52KCkucmVtb3ZlID0gdHJ1ZQpzcGF3bihmdW5jdGlvbigpCiAgICBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGlmIF9HLlJlbW92ZV90cmN0ID09IHRydWUgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuTm90aWZpY2F0aW9uOkRlc3Ryb3koKSAgICAgICAgCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZCkKc3Bhd24oZnVuY3Rpb24oKQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBpZiBfRy5SZW1vdmVIaXQgPT0gdHJ1ZSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5FZmZlY3QuQ29udGFpbmVyLkxldmVsVXA6RGVzdHJveSgpCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5VdGlsLlNvdW5kOkRlc3Ryb3koKQogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuVXRpbC5Tb3VuZC5TdG9yYWdlLk90aGVyOkZpbmRGaXJzdENoaWxkKCJMZXZlbFVwX1Byb3h5Iik6RGVzdHJveSgpCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5VdGlsLlNvdW5kLlN0b3JhZ2UuT3RoZXI6RmluZEZpcnN0Q2hpbGQoIkxldmVsVXAiKTpEZXN0cm95KCkKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLkVmZmVjdC5Db250YWluZXIuUmVzcGF3bjpEZXN0cm95KCkgICAgICAgIAogICAgICAgIGVuZAogICAgZW5kKQplbmQpCl9HLkJ1eUFsbEFpYiA9IHRydWUKCQkgICAgICAgX0cuQnV5QWxsU3dvcmQgPSB0cnVlCnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQnV5QWxsU3dvcmQgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCJDdXRsYXNzIikKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwiS2F0YW5hIikKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwiSXJvbiBNYWNlIikKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwiRHVlbCBLYXRhbmEiKQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCJUcmlwbGUgS2F0YW5hIikKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwiUGlwZSIpCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsIkJpc2VudG8iKQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCJEdWFsLUhlYWRlZCBCbGFkZSIpCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsIlNvdWwgQ2FuZSIpCiAgICAgICAgICAgICAgICAgICAgaWYgX0cuQnV5SG9wIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxMCkKICAgICAgICAgICAgICAgICAgICAgICAgSG9wKCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgZW5kIAogICAgICAgIGVuZAogICAgZW5kKQogICAgCiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkJ1eUFsbEFpYiB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiS2VuVGFsayIsIkJ1eSIpCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SGFraSIsIkdlcHBvIikKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlIYWtpIiwiQnVzbyIpCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SGFraSIsIlNvcnUiKQogICAgICAgICAgICAgICAgICAgIGlmIF9HLkhvcEJ1eSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMTApCiAgICAgICAgICAgICAgICAgICAgICAgIEhvcCgpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgIGVuZCAKICAgICAgICBlbmQKICAgIGVuZCkKX0cuU2VsZWN0Q2hpcCA9ICJGbGFtZSIKX0cuU2VsZWN0Q2hpcCA9IHNlbGVjdHJhaWRzIG9yICIiClJhaWRzbGlzdCA9IHt9ClJhaWRzTW9kdWxlID0gcmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJhaWRzKQpmb3IgaSx2IGluIHBhaXJzKFJhaWRzTW9kdWxlLnJhaWRzKSBkbwogICAgdGFibGUuaW5zZXJ0KFJhaWRzbGlzdCx2KQplbmQKZm9yIGksdiBpbiBwYWlycyhSYWlkc01vZHVsZS5hZHZhbmNlZFJhaWRzKSBkbwogICAgdGFibGUuaW5zZXJ0KFJhaWRzbGlzdCx2KQplbmQKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b1NlbGVjdER1bmdlb24gdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZsYW1lLUZsYW1lIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZsYW1lLUZsYW1lIikgdGhlbgogICAgICAgICAgICAgICAgICAgIF9HLlNlbGVjdENoaXAgPSAiRmxhbWUiCiAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJJY2UtSWNlIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkljZS1JY2UiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgX0cuU2VsZWN0Q2hpcCA9ICJJY2UiCiAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJRdWFrZS1RdWFrZSIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJRdWFrZS1RdWFrZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBfRy5TZWxlY3RDaGlwID0gIlF1YWtlIgogICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTGlnaHQtTGlnaHQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTGlnaHQtTGlnaHQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgX0cuU2VsZWN0Q2hpcCA9ICJMaWdodCIKICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkRhcmstRGFyayIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEYXJrLURhcmsiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgX0cuU2VsZWN0Q2hpcCA9ICJEYXJrIgogICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU3RyaW5nLVN0cmluZyIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTdHJpbmctU3RyaW5nIikgdGhlbgogICAgICAgICAgICAgICAgICAgIF9HLlNlbGVjdENoaXAgPSAiU3RyaW5nIgogICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUnVtYmxlLVJ1bWJsZSIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJSdW1ibGUtUnVtYmxlIikgdGhlbgogICAgICAgICAgICAgICAgICAgIF9HLlNlbGVjdENoaXAgPSAiUnVtYmxlIgogICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTWFnbWEtTWFnbWEiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTWFnbWEtTWFnbWEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgX0cuU2VsZWN0Q2hpcCA9ICJNYWdtYSIKICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFuLUh1bWFuOiBCdWRkaGEgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiSHVtYW4tSHVtYW46IEJ1ZGRoYSBGcnVpdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBfRy5TZWxlY3RDaGlwID0gIkh1bWFuOiBCdWRkaGEiCiAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTYW5kLVNhbmQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU2FuZC1TYW5kIikgdGhlbgogICAgICAgICAgICAgICAgICAgIF9HLlNlbGVjdENoaXAgPSAiU2FuZCIKICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkJpcmQtQmlyZDogUGhvZW5peCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCaXJkLUJpcmQ6IFBob2VuaXgiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgX0cuU2VsZWN0Q2hpcCA9ICJCaXJkOiBQaG9lbml4IgogICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRG91Z2giKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRG91Z2giKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgX0cuU2VsZWN0Q2hpcCA9ICJEb3VnaCIKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBfRy5TZWxlY3RDaGlwID0gIkZsYW1lIgogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgIGVuZAplbmQpCnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b0J1eUNoaXAgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTcGVjaWFsIE1pY3JvY2hpcCIpIG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlNwZWNpYWwgTWljcm9jaGlwIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWyJfV29ybGRPcmlnaW4iXS5Mb2NhdGlvbnM6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCAxIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJSYWlkc05wYyIsICJTZWxlY3QiLCBfRy5TZWxlY3RDaGlwKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKQplbmQpCnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoLjEpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvX1N0YXJ0UmFpZCB0aGVuCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKVsiTG9jYWxQbGF5ZXIiXS5QbGF5ZXJHdWkuTWFpbi5UaW1lci5WaXNpYmxlID09IGZhbHNlIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsiX1dvcmxkT3JpZ2luIl0uTG9jYXRpb25zOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgMSIpIGFuZCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3BlY2lhbCBNaWNyb2NoaXAiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlNwZWNpYWwgTWljcm9jaGlwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBXb3JsZDIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuQ2lyY2xlSXNsYW5kLlJhaWRTdW1tb24yLkJ1dHRvbi5NYWluLkNsaWNrRGV0ZWN0b3IpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBXb3JsZDMgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkJvYXQgQ2FzdGxlIl0uUmFpZFN1bW1vbjIuQnV0dG9uLk1haW4uQ2xpY2tEZXRlY3RvcikKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kCmVuZCkKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKSAKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuS2lsbF9BdXJhIHRoZW4KICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpWyJMb2NhbFBsYXllciJdLlBsYXllckd1aS5NYWluLlRpbWVyLlZpc2libGUgPT0gdHJ1ZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2Lkh1bWFub2lkLkhlYWx0aCA+IDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdCB3YWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIsIlNpbXVsYXRpb25SYWRpdXMiLG1hdGguaHVnZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5IdW1hbm9pZC5IZWFsdGggPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuS2lsbF9BdXJhIG9yIG5vdCB2LlBhcmVudCBvciB2Lkh1bWFub2lkLkhlYWx0aCA8PSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKQplbmQpCnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b19EdW5nZW9uIHRoZW4KICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpWyJMb2NhbFBsYXllciJdLlBsYXllckd1aS5NYWluLlRpbWVyLlZpc2libGUgPT0gdHJ1ZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsiX1dvcmxkT3JpZ2luIl0uTG9jYXRpb25zOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgNSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgQVR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbIl9Xb3JsZE9yaWdpbiJdLkxvY2F0aW9uczpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDUiKS5DRnJhbWUqUmFpZFBvcykKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsiX1dvcmxkT3JpZ2luIl0uTG9jYXRpb25zOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgNCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgQVR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbIl9Xb3JsZE9yaWdpbiJdLkxvY2F0aW9uczpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDQiKS5DRnJhbWUqUmFpZFBvcykKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsiX1dvcmxkT3JpZ2luIl0uTG9jYXRpb25zOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgMyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgQVR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbIl9Xb3JsZE9yaWdpbiJdLkxvY2F0aW9uczpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDMiKS5DRnJhbWUqUmFpZFBvcykKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsiX1dvcmxkT3JpZ2luIl0uTG9jYXRpb25zOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgMiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgQVR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbIl9Xb3JsZE9yaWdpbiJdLkxvY2F0aW9uczpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDIiKS5DRnJhbWUqUmFpZFBvcykKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsiX1dvcmxkT3JpZ2luIl0uTG9jYXRpb25zOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgMSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgQVR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbIl9Xb3JsZE9yaWdpbiJdLkxvY2F0aW9uczpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDEiKS5DRnJhbWUqUmFpZFBvcykKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCkKZW5kKQpUeXBlID0gMQpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KC4xKSBkbwogICAgICAgIGlmIFR5cGUgPT0gMSB0aGVuCiAgICAgICAgICAgIFJhaWRQb3MgPSBDRnJhbWUubmV3KDAsMjUsMCkKCQllbHNlaWYgVHlwZSA9PSAyIHRoZW4KCQkJUmFpZFBvcyA9IENGcmFtZS5uZXcoMCwyNSwtNDApCgkJZWxzZWlmIFR5cGUgPT0gMyB0aGVuCgkJCVJhaWRQb3MgPSBDRnJhbWUubmV3KDQwLDI1LDApCgkJZWxzZWlmIFR5cGUgPT0gNCB0aGVuCgkJCVJhaWRQb3MgPSBDRnJhbWUubmV3KDAsMjUsNDApCQoJCWVsc2VpZiBUeXBlID09IDUgdGhlbgoJCQlSYWlkUG9zID0gQ0ZyYW1lLm5ldygtNDAsMjUsMCkKCQllbHNlaWYgVHlwZSA9PSA2IHRoZW4KCQkJUmFpZFBvcyA9IENGcmFtZS5uZXcoMCwyNSwwKQogICAgICAgIGVuZAogICAgZW5kCmVuZCkKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCguMSkgZG8KICAgICAgICBUeXBlID0gMQogICAgICAgIHdhaXQoMC45KQogICAgICAgIFR5cGUgPSAyCiAgICAgICAgd2FpdCgwLjkpCiAgICAgICAgVHlwZSA9IDMKICAgICAgICB3YWl0KDAuOSkKICAgICAgICBUeXBlID0gNAogICAgICAgIHdhaXQoMC45KQogICAgICAgIFR5cGUgPSA1CiAgICAgICAgd2FpdCgwLjkpCiAgICBlbmQKZW5kKQpzcGF3bihmdW5jdGlvbigpCgkJcGNhbGwoZnVuY3Rpb24oKQoJCQl3aGlsZSB3YWl0KCkgZG8KCQkJCWlmIF9HLkR1biBhbmQgV29ybGQyIHRoZW4KCQkJCQlpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZSA+PSAxMTUwIHRoZW4KCQkJCQkgICAgX0cuQXV0b0Zhcm0gPSBmYWxzZQoJCQkJCSAgICBfRy5BdXRvU2VsZWN0RHVuZ2VvbiA9IHRydWUKCQkJCQlfRy5BdXRvQnV5Q2hpcCA9IHRydWUKCQkJCQlfRy5BdXRvX1N0YXJ0UmFpZCA9IHRydWUKCQkJCQlfRy5LaWxsX0F1cmEgPSB0cnVlCgkJCQkJX0cuQXV0b19EdW5nZW9uID0gdHJ1ZQoJCQkJCWVuZAoJCQkJZW5kCgkJCWVuZAoJCWVuZCkKCWVuZCkKU3RvcFR3ZWVuKF9HLkF1dG9fRHVuZ2VvbikKc3Bhd24oZnVuY3Rpb24oKQoJCXBjYWxsKGZ1bmN0aW9uKCkKCQkJd2hpbGUgd2FpdCgpIGRvCgkJCQlpZiBfRy5EdW4gYW5kIFdvcmxkMiB0aGVuCgkJCQkJaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWUgPj0gMTM1MCB0aGVuCgkJCQkJZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsIkRyYWdvbkNsYXciLCIxIilnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCbGFja2JlYXJkUmV3YXJkIiwiRHJhZ29uQ2xhdyIsIjIiKQoJCQkJCSAgICBfRy5BdXRvRmFybSA9IHRydWUKCQkJCQkgICAgX0cuQXV0b1NlbGVjdER1bmdlb24gPSBmYWxzZQoJCQkJCV9HLkF1dG9CdXlDaGlwID0gZmFsc2UKCQkJCQlfRy5BdXRvX1N0YXJ0UmFpZCA9IGZhbHNlCgkJCQkJX0cuS2lsbF9BdXJhID0gZmFsc2UKCQkJCQlfRy5BdXRvX0R1bmdlb24gPSBmYWxzZQoJCQkJCWVuZAoJCQkJZW5kCgkJCWVuZAoJCWVuZCkKCWVuZCkKU3RvcFR3ZWVuKF9HLkF1dG9fRHVuZ2VvbikKCiAKCiAgICAgICAgICAgIF09XSkoKQogICAgICAgIGVsc2UKICAgICAgICAgICAgcHJpbnQoIlRvZ2dsZSDEkcOjIHThuq90ISIpCiAgICAgICAgZW5kCiAgICBlbmQKfSkK]]
local loadstring = loadstring or function() end
loadstring(game:GetService("HttpService"):Base64Decode(var_2099))()
